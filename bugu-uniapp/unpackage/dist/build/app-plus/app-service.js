var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__spreadValues=(e,t)=>{for(var o in t||(t={}))__hasOwnProp.call(t,o)&&__defNormalProp(e,o,t[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(t))__propIsEnum.call(t,o)&&__defNormalProp(e,o,t[o]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t));(function(vue){"use strict";function _interopNamespace(e){if(e&&e.__esModule)return e;var t={__proto__:null,[Symbol.toStringTag]:"Module"};return e&&Object.keys(e).forEach((function(o){if("default"!==o){var i=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var vue__namespace=_interopNamespace(vue);const isString=e=>"string"==typeof e,objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1);function isDebugMode(){return"string"==typeof __channelId__&&__channelId__}function jsonStringifyReplacer(e,t){return"Function"===toRawType(t)?"function() { [native code] }":t}function normalizeLog(t,o,i){if(isDebugMode())return i.push(o.replace("at ","uni-app:///")),console[t].apply(console,i);return i.map((function(t){const o=toTypeString(t).toLowerCase();if("[object object]"===o||"[object array]"===o)try{t="---BEGIN:JSON---"+JSON.stringify(t,jsonStringifyReplacer)+"---END:JSON---"}catch(e){t=o}else if(null===t)t="---NULL---";else if(void 0===t)t="---UNDEFINED---";else{const e=toRawType(t).toUpperCase();t="NUMBER"===e||"BOOLEAN"===e?"---BEGIN:"+e+"---"+t+"---END:"+e+"---":String(t)}return t})).join("---COMMA---")+" "+o}function formatAppLog(e,t,...o){const i=normalizeLog(e,t,o);i&&console[e](i)}var _export_sfc=(e,t)=>{const o=e.__vccOpts||e;for(const[i,a]of t)o[i]=a;return o};const _sfc_main$1l={name:"page-tabs",props:{index:{type:Number,default:0},labels:{type:Array,default:[]},flex:{type:Boolean,default:!1},tabPadding:{type:Number,default:20},borderBottom:{type:Boolean,default:!1},activeColor:{type:String,default:"#000000"},defaultColor:{type:String,default:"#aaaaaa"},defaultFontSize:{type:Number,default:16},activeFontSize:{type:Number,default:16},underLineType:{type:String,default:"default"}},emits:["changeIndex"],setup(e,t){formatAppLog("log","at components/page-tabs/page-tabs.vue:99",e.index);const o=vue.reactive({tabList:e.labels?e.labels:["默认"],translateX:-100*+e.index,transition:!1===e.animation?0:.2,scrollId:"tab_0",tabPadding:e.tabPadding?e.tabPadding:20});return setTimeout((()=>{o.scrollId="tab_"+(e.index-1)}),100),__spreadProps(__spreadValues({},vue.toRefs(o)),{tabChange:e=>{if(o.tabIndex==e)return!1;o.tabIndex=e,o.translateX=-100*o.tabIndex,o.scrollId="tab_"+(e-1),t.emit("changeIndex",e)}})},computed:{tabIndex(){return this.index?+this.index:0}}};function _sfc_render$1k(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["tab"])},[vue.createElementVNode("scroll-view",{class:vue.normalizeClass(["tab-bar","tab-bar-flex-"+o.flex,"tab-bar-borde-bottom"+o.borderBottom]),"scroll-x":"true","scroll-into-view":e.scrollId,"scroll-with-animation":""},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.tabList,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["tab-bar-item",n.tabIndex===t?"active underline-"+o.underLineType:""]),id:`tab_${t}`,style:vue.normalizeStyle({padding:`0 ${o.tabPadding}rpx`,color:n.tabIndex===t?o.activeColor:o.defaultColor,fontSize:n.tabIndex===t?o.activeFontSize+"px":o.defaultFontSize+"px"}),key:t,onClick:e=>i.tabChange(t)},[vue.createElementVNode("text",{class:"txt"},vue.toDisplayString(e.title),1),e.badge?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"tabs-badge",style:vue.normalizeStyle({right:e.badge<10?"-5rpx":e.badge<100?"-10rpx":"-20rpx"})},[vue.createElementVNode("text",null,vue.toDisplayString(e.badge<100?e.badge:"99+"),1)],4)):vue.createCommentVNode("",!0)],14,["id","onClick"])))),128))],10,["scroll-into-view"])])}var __easycom_0$3=_export_sfc(_sfc_main$1l,[["render",_sfc_render$1k],["__scopeId","data-v-c7535bac"]]);function resolveEasycom(e,t){return isString(e)?t:e}var icons={id:"2852637",name:"uniui图标库",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]};const _sfc_main$1k={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data:()=>({icons:icons.glyphs}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?unescape(`%u${e.unicode}`):""}},methods:{_onClick(){this.$emit("click")}}};function _sfc_render$1j(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("text",{style:vue.normalizeStyle({color:o.color,"font-size":o.size+"px"}),class:vue.normalizeClass(["uni-icons",["uniui-"+o.type,o.customPrefix,o.customPrefix?o.type:""]]),onClick:t[0]||(t[0]=(...e)=>n._onClick&&n._onClick(...e))},null,6)}var __easycom_1$h=_export_sfc(_sfc_main$1k,[["render",_sfc_render$1j],["__scopeId","data-v-2ab84dc6"]]);const TitleColor="#808080",MainColor="#4eccb8",Protocol="https",AppVersion="1.0.6",ServerDomain="bgxq.kaleer.cn/living",SoketUrl="wss://bgxq.kaleer.cn/webSocketServer/",UploadUrl="https://upload-cn-east-2.qiniup.com",UseProtocolUrl="https://www.mulantools.top/bugu-use-protocol",PrivacyPolicyUrl="https://www.mulantools.top/bugu-privacy-policy",key="%7GsMTFD#Rv)ff_oTAWSH1PSRaecv10l-",timestamp=1e3*(new Date).getTime();function random16String(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnoprstuvwxyz123456789",t=e.length,o="";for(let i=0;i<16;i++)o+=e.charAt(Math.floor(Math.random()*t));return o}const ImageFatherPath="http://file.bgxq.kaleer.cn/",AnonymousAvatar="http://file.bgxq.kaleer.cn/user/anonymous_avatar/anonymous_avatar.png",WITHDRAW="WITHDRAW",USER_MESSAGE="USER_MESSAGE",ALREADY_READ="ALREADY_READ",INTERACTIVE="INTERACTIVE",LIKE="LIKE",ATTENTION="ATTENTION",COMMENT="COMMENT",PUBLISH="PUBLISH",InteractiveTypeList=[LIKE,ATTENTION,COMMENT,PUBLISH],ACTIVITY="activity",PUNISH="punish",REQUEST_SUCCEEDED_CODE="00000",RingingToneList=[{value:0,label:"默认",url:`${ImageFatherPath}user/sound/new_message.mp3`},{value:1,label:"三全音",url:`${ImageFatherPath}user/sound/threetone.mp3`},{value:2,label:"溪流",url:`${ImageFatherPath}user/sound/stream.mp3`},{value:3,label:"冒出",url:`${ImageFatherPath}user/sound/emerge.mp3`},{value:4,label:"喵喵",url:`${ImageFatherPath}user/sound/cat.mp3`},{value:5,label:"皮卡丘",url:`${ImageFatherPath}user/sound/Pikachu.mp3`},{value:6,label:"水滴",url:`${ImageFatherPath}user/sound/drip.mp3`},{value:7,label:"YOHU~",url:`${ImageFatherPath}user/sound/YOHO.mp3`},{value:8,label:"哆啦A梦",url:`${ImageFatherPath}user/sound/Doraemon.mp3`},{value:9,label:"简短",url:`${ImageFatherPath}user/sound/brief.mp3`},{value:10,label:"胡巴",url:`${ImageFatherPath}user/sound/huba.mp3`},{value:11,label:"无",url:""}],AnonymousAvatars=[`${ImageFatherPath}user/anonymous_avatar/earth.png`,`${ImageFatherPath}user/anonymous_avatar/neptune.png`,`${ImageFatherPath}user/anonymous_avatar/mercury.png`,`${ImageFatherPath}user/anonymous_avatar/jupiter.png`,`${ImageFatherPath}user/anonymous_avatar/pluto.png`,`${ImageFatherPath}user/anonymous_avatar/venus.png`,`${ImageFatherPath}user/anonymous_avatar/mars.png`,`${ImageFatherPath}user/anonymous_avatar/sun.png`,`${ImageFatherPath}user/anonymous_avatar/uranus.png`,`${ImageFatherPath}user/anonymous_avatar/moon.png`,`${ImageFatherPath}user/anonymous_avatar/saturn.png`],privateSettingGroup=["所有人可见","主页可见","仅自己可见"],emojiList=["😀","😁","😃","😄","😅","😆","😉","😊","😋","😎","😍","😘","😗","😙","😚","☺","😇","😐","😑","😶","😏","😣","😥","😮","😯","😪","😫","😴","😌","😛","😜","😝","😒","😓","😔","😕","😲","😷","😖","😞","😟","😤","😢","😭","😦","😧","😨","😬","😰","😱","😳","😵","😡","😠","👦","👧","👨","👩","👴","👵","👶","👱","👮","👲","👳","👷","👸","💂","🎅","👰","👼","💆","💇","🙍","🙎","🙅","🙆","💁","🙋","🙇","🙌","🙏","👤","👥","🚶","🏃","👯","💃","👫","👬","👭","💏","💑","👪","💪","👈","👉","☝","👆","👇","✌","✋","👌","👍","👎","✊","👊","👋","👏","👐","✍","👣","👀","👂","👃","👅","👄","💋","👓","👔","👙","👛","👜","👝","🎒","💼","👞","👟","👠","👡","👢","👑","👒","🎩","🎓","💄","💅","💍","🌂","📶","📳","📴","♻","🏧","🚮","🚰","♿","🚹","🚺","🚻","🚼","🚾","⚠","🚸","⛔","🚫","🚳","🚭","🚯","🚱","🚷","🔞","💈","🙈","🐒","🐶","🐕","🐩","🐺","🐱","🐈","🐯","🐅","🐆","🐴","🐎","🐮","🐂","🐃","🐄","🐷","🐖","🐗","🐽","🐏","🐑","🐐","🐪","🐫","🐘","🐭","🐁","🐀","🐹","🐰","🐇","🐻","🐨","🐼","🐾","🐔","🐓","🐣","🐤","🐥","🐦","🐧","🐸","🐊","🐢","🐍","🐲","🐉","🐳","🐋","🐬","🐟","🐠","🐡","🐙","🐚","🐌","🐛","🐜","🐝","🐞","🦋","💐","🌸","💮","🌹","🌺","🌻","🌼","🌷","🌱","🌲","🌳","🌴","🌵","🌾","🌿","🍀","🍁","🍂","🍃","🌍","🌎","🌏","🌐","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","☀","🌝","🌞","⭐","🌟","🌠","☁","⛅","☔","⚡","❄","🔥","💧","🌊","🏀","🏈","🏉","🎾","🎱","🎳","⛳","🎣","🎽","🎿","😈","👿","👹","👺","💀","☠","👻","👽","👾","💣","🌋","🗻","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏨","⛲","🌁","🌃","🌆","🌇","🎠","🎡","🎢","🚂","🚌","🚍","🚎","🚏","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","💌","💎","🔪","💈","🚪","🚽","🚿","🛁","⌛","⏳","⌚","⏰","🎈","🎉","💤","💢","💬","💭","♨","🌀","🔔","🔕","✡","✝","🔯","📛","🔰","🔱","⭕","✅","☑","✔","✖","❌","❎","➕","➖","➗","➰","➿","〽","✳","✴","❇","‼","⁉","❓","❔","❕","❗","🕛","🕧","🕐","🕜","🕑","🕝","🕒","🕞","🕓","🕟","🕔","🕠","🕕","🕡","🕖","🕢","🕗","🕣","🕘","🕤","🕙","🕥","🕚","🕦","⏱","⏲","🕰","💘","❤","💓","💔","💕","💖","💗","💙","💚","💛","💜","💝","💞","💟❣","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🍎","🍏","🍐","🍑","🍒","🍓"],reportTypes=["垃圾广告信息","不实信息","辱骂人身攻击等不友善行为","有害信息","涉嫌侵权","诱导赞同关注等行为","骚扰","清朗行动专项举报","有人意图自杀或自残","其他"],reportObjectType={activity:"activity",comment:"comment",chat:"chat",commentResponse:"commentResponse"},sexGrounp=["女","男"],updateLogs=[{version:"1.0.6",logTexts:["可以自定义表情了","修复一些bug"]},{version:"1.0.5",logTexts:["可以搜索并添加用户了","现在可以发布视频动态了","优化登录界面逻辑","优化部分代码逻辑"]},{version:"1.0.4",logTexts:["新增热门动态","修复无法显示搜索历史的问题","优化消息通知显示","修复动态匿名回复的问题"]},{version:"1.0.3",logTexts:["修复发布动态时容易重复发送的问题","修复评论时容易重复的问题","底部消息按钮增加红点提示","修复聊天记录偶尔错位的问题","修复修改名字含有表情不正确提示的问题","优化部分代码逻辑"]},{version:"1.0.2",logTexts:["内测版正式发布","增加登录认证"]},{version:"1.0.1",logTexts:["增加布咕页面-包括天气信息、banner、签到、和邀请获奖"]},{version:"1.0.0",logTexts:["完善大部分功能"]}],globalData={},setGlobalData=(e,t)=>{globalData[e]=t},getGlobalData=e=>globalData[e];var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var md5$2={exports:{}};
/**
   * [js-md5]{@link https://github.com/emn178/js-md5}
   *
   * @namespace md5
   * @version 0.7.3
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   */(function(module){(function(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var o=OUTPUT_TYPES[t];e[o]=createOutputMethod(o)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,o=typeof e;if("string"!==o){if("object"!==o)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var i,a,n=0,s=e.length,r=this.blocks,l=this.buffer8;n<s;){if(this.hashed&&(this.hashed=!1,r[0]=r[16],r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),t)if(ARRAY_BUFFER)for(a=this.start;n<s&&a<64;++n)l[a++]=e[n];else for(a=this.start;n<s&&a<64;++n)r[a>>2]|=e[n]<<SHIFT[3&a++];else if(ARRAY_BUFFER)for(a=this.start;n<s&&a<64;++n)(i=e.charCodeAt(n))<128?l[a++]=i:i<2048?(l[a++]=192|i>>6,l[a++]=128|63&i):i<55296||i>=57344?(l[a++]=224|i>>12,l[a++]=128|i>>6&63,l[a++]=128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++n)),l[a++]=240|i>>18,l[a++]=128|i>>12&63,l[a++]=128|i>>6&63,l[a++]=128|63&i);else for(a=this.start;n<s&&a<64;++n)(i=e.charCodeAt(n))<128?r[a>>2]|=i<<SHIFT[3&a++]:i<2048?(r[a>>2]|=(192|i>>6)<<SHIFT[3&a++],r[a>>2]|=(128|63&i)<<SHIFT[3&a++]):i<55296||i>=57344?(r[a>>2]|=(224|i>>12)<<SHIFT[3&a++],r[a>>2]|=(128|i>>6&63)<<SHIFT[3&a++],r[a>>2]|=(128|63&i)<<SHIFT[3&a++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++n)),r[a>>2]|=(240|i>>18)<<SHIFT[3&a++],r[a>>2]|=(128|i>>12&63)<<SHIFT[3&a++],r[a>>2]|=(128|i>>6&63)<<SHIFT[3&a++],r[a>>2]|=(128|63&i)<<SHIFT[3&a++]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,o,i,a,n,s=this.blocks;this.first?t=((t=((e=((e=s[0]-680876937)<<7|e>>>25)-271733879<<0)^(o=((o=(-271733879^(i=((i=(-1732584194^2004318071&e)+s[1]-117830708)<<12|i>>>20)+e<<0)&(-271733879^e))+s[2]-1126478375)<<17|o>>>15)+i<<0)&(i^e))+s[3]-1316259209)<<22|t>>>10)+o<<0:(e=this.h0,t=this.h1,o=this.h2,t=((t+=((e=((e+=((i=this.h3)^t&(o^i))+s[0]-680876936)<<7|e>>>25)+t<<0)^(o=((o+=(t^(i=((i+=(o^e&(t^o))+s[1]-389564586)<<12|i>>>20)+e<<0)&(e^t))+s[2]+606105819)<<17|o>>>15)+i<<0)&(i^e))+s[3]-1044525330)<<22|t>>>10)+o<<0),t=((t+=((e=((e+=(i^t&(o^i))+s[4]-176418897)<<7|e>>>25)+t<<0)^(o=((o+=(t^(i=((i+=(o^e&(t^o))+s[5]+1200080426)<<12|i>>>20)+e<<0)&(e^t))+s[6]-1473231341)<<17|o>>>15)+i<<0)&(i^e))+s[7]-45705983)<<22|t>>>10)+o<<0,t=((t+=((e=((e+=(i^t&(o^i))+s[8]+1770035416)<<7|e>>>25)+t<<0)^(o=((o+=(t^(i=((i+=(o^e&(t^o))+s[9]-1958414417)<<12|i>>>20)+e<<0)&(e^t))+s[10]-42063)<<17|o>>>15)+i<<0)&(i^e))+s[11]-1990404162)<<22|t>>>10)+o<<0,t=((t+=((e=((e+=(i^t&(o^i))+s[12]+1804603682)<<7|e>>>25)+t<<0)^(o=((o+=(t^(i=((i+=(o^e&(t^o))+s[13]-40341101)<<12|i>>>20)+e<<0)&(e^t))+s[14]-1502002290)<<17|o>>>15)+i<<0)&(i^e))+s[15]+1236535329)<<22|t>>>10)+o<<0,t=((t+=((i=((i+=(t^o&((e=((e+=(o^i&(t^o))+s[1]-165796510)<<5|e>>>27)+t<<0)^t))+s[6]-1069501632)<<9|i>>>23)+e<<0)^e&((o=((o+=(e^t&(i^e))+s[11]+643717713)<<14|o>>>18)+i<<0)^i))+s[0]-373897302)<<20|t>>>12)+o<<0,t=((t+=((i=((i+=(t^o&((e=((e+=(o^i&(t^o))+s[5]-701558691)<<5|e>>>27)+t<<0)^t))+s[10]+38016083)<<9|i>>>23)+e<<0)^e&((o=((o+=(e^t&(i^e))+s[15]-660478335)<<14|o>>>18)+i<<0)^i))+s[4]-405537848)<<20|t>>>12)+o<<0,t=((t+=((i=((i+=(t^o&((e=((e+=(o^i&(t^o))+s[9]+568446438)<<5|e>>>27)+t<<0)^t))+s[14]-1019803690)<<9|i>>>23)+e<<0)^e&((o=((o+=(e^t&(i^e))+s[3]-187363961)<<14|o>>>18)+i<<0)^i))+s[8]+1163531501)<<20|t>>>12)+o<<0,t=((t+=((i=((i+=(t^o&((e=((e+=(o^i&(t^o))+s[13]-1444681467)<<5|e>>>27)+t<<0)^t))+s[2]-51403784)<<9|i>>>23)+e<<0)^e&((o=((o+=(e^t&(i^e))+s[7]+1735328473)<<14|o>>>18)+i<<0)^i))+s[12]-1926607734)<<20|t>>>12)+o<<0,t=((t+=((n=(i=((i+=((a=t^o)^(e=((e+=(a^i)+s[5]-378558)<<4|e>>>28)+t<<0))+s[8]-2022574463)<<11|i>>>21)+e<<0)^e)^(o=((o+=(n^t)+s[11]+1839030562)<<16|o>>>16)+i<<0))+s[14]-35309556)<<23|t>>>9)+o<<0,t=((t+=((n=(i=((i+=((a=t^o)^(e=((e+=(a^i)+s[1]-1530992060)<<4|e>>>28)+t<<0))+s[4]+1272893353)<<11|i>>>21)+e<<0)^e)^(o=((o+=(n^t)+s[7]-155497632)<<16|o>>>16)+i<<0))+s[10]-1094730640)<<23|t>>>9)+o<<0,t=((t+=((n=(i=((i+=((a=t^o)^(e=((e+=(a^i)+s[13]+681279174)<<4|e>>>28)+t<<0))+s[0]-358537222)<<11|i>>>21)+e<<0)^e)^(o=((o+=(n^t)+s[3]-722521979)<<16|o>>>16)+i<<0))+s[6]+76029189)<<23|t>>>9)+o<<0,t=((t+=((n=(i=((i+=((a=t^o)^(e=((e+=(a^i)+s[9]-640364487)<<4|e>>>28)+t<<0))+s[12]-421815835)<<11|i>>>21)+e<<0)^e)^(o=((o+=(n^t)+s[15]+530742520)<<16|o>>>16)+i<<0))+s[2]-995338651)<<23|t>>>9)+o<<0,t=((t+=((i=((i+=(t^((e=((e+=(o^(t|~i))+s[0]-198630844)<<6|e>>>26)+t<<0)|~o))+s[7]+1126891415)<<10|i>>>22)+e<<0)^((o=((o+=(e^(i|~t))+s[14]-1416354905)<<15|o>>>17)+i<<0)|~e))+s[5]-57434055)<<21|t>>>11)+o<<0,t=((t+=((i=((i+=(t^((e=((e+=(o^(t|~i))+s[12]+1700485571)<<6|e>>>26)+t<<0)|~o))+s[3]-1894986606)<<10|i>>>22)+e<<0)^((o=((o+=(e^(i|~t))+s[10]-1051523)<<15|o>>>17)+i<<0)|~e))+s[1]-2054922799)<<21|t>>>11)+o<<0,t=((t+=((i=((i+=(t^((e=((e+=(o^(t|~i))+s[8]+1873313359)<<6|e>>>26)+t<<0)|~o))+s[15]-30611744)<<10|i>>>22)+e<<0)^((o=((o+=(e^(i|~t))+s[6]-1560198380)<<15|o>>>17)+i<<0)|~e))+s[13]+1309151649)<<21|t>>>11)+o<<0,t=((t+=((i=((i+=(t^((e=((e+=(o^(t|~i))+s[4]-145523070)<<6|e>>>26)+t<<0)|~o))+s[11]-1120210379)<<10|i>>>22)+e<<0)^((o=((o+=(e^(i|~t))+s[2]+718787259)<<15|o>>>17)+i<<0)|~e))+s[9]-343485551)<<21|t>>>11)+o<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=o-1732584194<<0,this.h3=i+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+o<<0,this.h3=this.h3+i<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,o=this.h2,i=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,o=this.h2,i=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,o,i="",a=this.array(),n=0;n<15;)e=a[n++],t=a[n++],o=a[n++],i+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|o>>>6)]+BASE64_ENCODE_CHAR[63&o];return e=a[n],i+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})(md5$2);var md5$1=md5$2.exports;let showModel=!0;async function getWeatherInfo(){return new Promise(((e,t)=>{uni.request({method:"GET",url:"https://www.mulantools.top/Api/weather_api",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){return e(t),t},fail:function(e){formatAppLog("log","at utils/request.ts:46","error in..."),t(e)}})}))}async function request(e){let t="";try{t=uni.getStorageSync("token")}catch{}t||formatAppLog("log","at utils/request.ts:69","未登錄");let o=random16String(),i=timestamp,a=__spreadProps(__spreadValues({},e.data.header),{t:i,r:o,s:md5$1(i+o+key),token:t});return new Promise(((t,o)=>{uni.request({method:e.data.method,url:`${Protocol}://${ServerDomain}/${e.data.group}/${e.data.action}`,data:e.data.data,header:a,success:function(e){t(e);let o=e.data,i=o.code,a=o.userMsg;return i!=REQUEST_SUCCEEDED_CODE&&("A0001"===i||"A0005"===i?showModel&&(showModel=!1,uni.showModal({title:"登录过期",content:"登录过期请重新登录",success:function(e){e.confirm?(uni.setStorage({key:"token",data:null}),uni.navigateTo({url:"/pages/login/login"}),showModel=!0):showModel=!0}})):uni.showToast({title:a,icon:"none"})),e},fail:function(e){formatAppLog("log","at utils/request.ts:126","error in..."),o(e)}})}))}const SEARCH_USER_HISTORY="search_user_history",SEARCH_ACTIVITY_HISTORY="search_history",USER_INFO="userInfo",TOKEN="token",REFRESH_DYNAMIC_SOUND="refresh_dynamic_sound",NEW_MESSAGE_SOUND="new_message_sound";function getFansNumberChangedKey(e){return`${e}_fansNumberChanged`}function getFollowedNumberChangedKey(e){return`${e}_followedNumberChanged`}function getViewsNumberChangedKey(e){return`${e}_viewsNumberChanged`}function getUserMessageListKey(e){return`user_message_list_${e}`}function getChatRecordKey(e,t){return`chat_record_${e}_${t}`}function getInteractiveMessageListKey(e,t){return`interactive_message_list_${e}_${t}`}function getOfficeNewsListKey(e){return`offical_news_list_${e}`}function getOfficeTypeNewsListKey(e,t){return`offical_type_news_${e}_${t}`}async function getMyUserInfo(){return uni.getStorageSync(USER_INFO)}async function saveChatRecord(e,t){let o=getChatRecordKey(t,e.data.fromUserId),i=await getChatRecord(t,e.data.fromUserId),a=i.messages;a.push({content:e.data.content,type:e.data.type,id:e.data.id,createTime:getTime$1(),isMe:!1,time:e.data.time}),i.badgeNumber=i.badgeNumber+1,i.messages=a,uni.setStorage({key:o,data:i})}async function saveWithDrawChatRecord(e,t){let o=getChatRecordKey(t,e.data.userId),i=await getChatRecord(t,e.data.userId),a=i.messages;for(let n=a.length-1;n>=0;n--)a[n].id==e.data.messageId&&(a[n]={id:e.data.messageId,type:-1,content:"对方撤回了一条消息",createTime:a[n].createTime,isMe:!1});i.messages=a,uni.setStorage({key:o,data:i})}async function saveAlreadyRead(e,t){let o=getChatRecordKey(t,e.data.userId),i=await getChatRecord(t,e.data.userId),a=i.messages;for(let n=0;n<a.length;n++)a[n].isMe&&(a[n].isNotRead=!1);i.messages=a,uni.setStorage({key:o,data:i})}async function getChatRecord(e,t){let o=getChatRecordKey(e,t),i=uni.getStorageSync(o);return i||(i={fromUserId:t,type:USER_MESSAGE,badgeNumber:0,messages:[]}),i}async function saveUserMessageList(e,t){let o=getUserMessageListKey(t),i=await getUserMessageList(t),a=!1;for(let n=0;n<i.length;n++)if(e.data.fromUserId==i[n].userId){i.push({avatar:i[n].avatar,lastMessage:e.data.content,lastMessageType:e.data.type,lastTime:getTime$1(),online:i[n].online,unreadSum:i[n].unreadSum+1,userId:i[n].userId,username:i[n].username}),i.splice(n,1),a=!0,uni.setStorage({key:o,data:i});break}if(!a){let t=await getUserinfo(e.data.fromUserId);t&&i.push({avatar:t.avatar,lastMessage:e.data.content,lastMessageType:e.data.type,lastTime:getTime$1(),online:!0,unreadSum:1,userId:t.id,username:t.username})}uni.setStorage({key:o,data:i})}async function saveUserMessageListWhenWithDraw(e,t){let o=getUserMessageListKey(t),i=await getUserMessageList(t),a=!1;for(let n=0;n<i.length;n++)if(e.data.userId==i[n].userId){i[n]={avatar:i[n].avatar,lastMessage:"对方撤回了一条消息",lastMessageType:-1,lastTime:i[n].lastTime,online:i[n].online,unreadSum:i[n].unreadSum,userId:i[n].userId,username:i[n].username},a=!0;break}if(!a){let t=await getUserinfo(e.data.userId);t&&i.push({avatar:t.avatar,lastMessage:"对方撤回了一条消息",lastMessageType:-1,lastTime:getTime$1(),online:!0,unreadSum:0,userId:t.id,username:t.username})}uni.setStorage({key:o,data:i})}async function deleteUserMessageItem(e,t){let o=await getUserMessageList(e),i=getUserMessageListKey(e);for(let a=0;a<o.length;a++)if(o[a].userId==t){let i=getChatRecordKey(e,t);uni.setStorage({key:i,data:null}),o.splice(a,1);break}return uni.setStorage({key:i,data:o}),o}async function getUserMessageList(e){let t=getUserMessageListKey(e),o=uni.getStorageSync(t);return o||(o=[]),o}async function saveInteractiveMessageList(e,t){formatAppLog("log","at common/storageFunctions.ts:238",e);let o=getInteractiveMessageListKey(t,e.data.type),i=await getInteractiveMessageList(t,e.type);e.data.createTime=getTime$1(),i.data.push(e.data),i.unreadSum=i.unreadSum+1,uni.setStorage({key:o,data:i})}async function interactiveMessageALLRead(e,t){let o=getInteractiveMessageListKey(e,t),i=await getInteractiveMessageList(e,t);i.unreadSum=0,uni.setStorage({key:o,data:i})}async function deleteAllInteractiveMessage(e,t){let o=getInteractiveMessageListKey(e,t);uni.setStorage({key:o,data:null})}async function getInteractiveMessageList(e,t){let o=getInteractiveMessageListKey(e,t),i=uni.getStorageSync(o);return i||(i={unreadSum:0,data:[]}),i}async function getOfficalList(e){let t=getOfficeNewsListKey(e),o=uni.getStorageSync(t);return o||(o=[]),o}async function deleteOfficalNewsItem(e,t){let o=await getOfficalList(e),i=getOfficeNewsListKey(e);for(let a=0;a<o.length;a++)if(o[a].type===t){let i=getOfficeTypeNewsListKey(e,t);uni.setStorage({key:i,data:null}),o.splice(a,1);break}return uni.setStorage({key:i,data:o}),o}async function getTypeOfficalNews(e,t){let o=getOfficeTypeNewsListKey(e,t),i=uni.getStorageSync(o);return i||(i=[]),i}async function deleteMessageRecord(e){InteractiveTypeList.forEach((t=>{let o=getInteractiveMessageListKey(e,t);uni.setStorage({key:o,data:null})}));let t=getUserMessageListKey(e);(await getUserMessageList(e)).forEach((t=>{let o=getChatRecordKey(e,t.userId);uni.setStorage({key:o,data:null})})),uni.setStorage({key:t,data:null})}function getTime$1(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),a=e.getHours(),n=e.getMinutes(),s=e.getSeconds();return t+"-"+o+"-"+i+" "+(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)+":"+(s<10?"0"+s:s)}async function getUserinfo(e){let t=await request({data:{method:"GET",group:"user",action:`${e}/info`,data:{userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return t.data.code===REQUEST_SUCCEEDED_CODE?(formatAppLog("log","at common/requestFunctions.ts:31",t.data.data),t.data.data):void 0}async function followUser(e){let t=await request({data:{method:"POST",group:"social",action:`attention/${e}`,data:{userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return t.data.code===REQUEST_SUCCEEDED_CODE||(formatAppLog("log","at common/requestFunctions.ts:62",t),!1)}async function cancelAttention(e){let t=await request({data:{method:"DELETE",group:"social",action:`removeAttention/${e}`,data:{userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return t.data.code===REQUEST_SUCCEEDED_CODE||(formatAppLog("log","at common/requestFunctions.ts:88",t),!1)}async function CancleLikeArticle(e){return(await request({data:{method:"POST",group:"activity",action:`${e}/like/remove`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE}async function LikeThisArtice(e){let t=await request({data:{method:"POST",group:"activity",action:`${e}/like`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return formatAppLog("log","at common/requestFunctions.ts:138",t.data),t.data.code===REQUEST_SUCCEEDED_CODE}async function GetonlineState(e){let t=await request({data:{method:"GET",group:"message",action:"onlineState",data:{userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return t.data.code===REQUEST_SUCCEEDED_CODE&&t.data.data}async function deleteMyArticle(e){return(await request({data:{method:"DELETE",group:"activity",action:`${e}/delete`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE}async function getHotLabels(e=1){let t=await request({data:{method:"GET",group:"activity",action:"label/list",data:{page:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){return t.data.data.list}return[]}async function getAndHandleUserMessageList(e){let t=await getUnReadUser(),o=[],i=[];(await getUserMessageList(e)).forEach((e=>{let a=!1;for(let o=0;o<t.length;o++)if(t[o].userId==e.userId){a=!0,t[o].unreadSum=e.unreadSum+t[o].unreadSum;break}a||(o.push(e.userId),i.push(e))}));let a=await updateUserInfo(o);for(let s=0;s<a.length;s++)if(a[s].id==i[s].userId)i[s].avatar=a[s].avatar,i[s].username=a[s].username,i[s].online=a[s].online;else for(let e=0;e<i.length;e++)if(a[s].id==i[e].userId){i[e].avatar=a[s].avatar,i[e].username=a[s].username,i[e].online=a[s].online;break}i=i.concat(t);let n=getUserMessageListKey(e);return uni.setStorage({key:n,data:i}),i}async function updateUserInfo(e){if(!e||e.length<=0)return[];let t=await request({data:{method:"GET",group:"message",action:"users/info",data:{userIds:e},header:{"content-type":"application/x-www-form-urlencoded"}}}),o=[];return t.data.code===REQUEST_SUCCEEDED_CODE?(o=t.data.data,formatAppLog("log","at common/requestFunctions.ts:323",t.data)):formatAppLog("log","at common/requestFunctions.ts:325",t.data),o}async function getUnReadUser(){let e=[];try{let t=await request({data:{method:"GET",group:"message",action:"unRead/user",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});t.data.code===REQUEST_SUCCEEDED_CODE?(formatAppLog("log","at common/requestFunctions.ts:351",`getUnReadUser:${JSON.stringify(t.data)}`),e=t.data.data):formatAppLog("log","at common/requestFunctions.ts:355",`getUnReadUser_error:${t.data}`)}catch{}return e}async function getAndHandleInteractiveMessageList(e){let t=0,o=await getUnReadInteractiveMessage();t=o.length;for(let i=0;i<InteractiveTypeList.length;i++){t=(await getInteractiveMessageList(e,InteractiveTypeList[i])).unreadSum+t}return o.forEach((async t=>{let i=getInteractiveMessageListKey(e,t.type),a=await getInteractiveMessageList(e,t.type);a.data=a.data.concat(o),a.unreadSum=a.unreadSum+1,uni.setStorage({key:i,data:a})})),t}async function getUnReadInteractiveMessage(){let e=await request({data:{method:"GET",group:"message",action:"interactive/unread",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});if(e.data.code===REQUEST_SUCCEEDED_CODE){let t=e.data.data;return formatAppLog("log","at common/requestFunctions.ts:409",t),t}return formatAppLog("log","at common/requestFunctions.ts:412",e.data),[]}async function getAndHandOfficialNewsList(e){let t=await getUnReadOfficialNews();formatAppLog("log","at common/requestFunctions.ts:424",t);let o=await getOfficalList(e),i=[];o.forEach(((e,o)=>{let a=!1;for(let i=0;i<t.length;i++)if(t[i].type==e.type){a=!0;break}a||i.push(e)}));let a=getOfficeNewsListKey(e);return i=i.concat(t),await uni.setStorage({key:a,data:i}),i}async function getUnReadOfficialNews(){let e=await request({data:{method:"GET",group:"message",action:"official/unread/list",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});if(e.data.code===REQUEST_SUCCEEDED_CODE){return e.data.data}return[]}async function commentActivity(e,t,o){return(await request({data:{method:"POST",group:"activity",action:`${e}/comment`,data:{id:e,content:t,type:o},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE}async function ReplyComments(e,t,o,i=0){return(await request({data:{method:"POST",group:"activity/comment",action:`${e}/response`,data:{id:e,content:t,toUserId:i,type:o},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE}async function DeleteComments(e){return(await request({data:{method:"DELETE",group:"activity/comment",action:`${e}/delete`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE}async function DeleteReply(e){return(await request({data:{method:"DELETE",group:"activity/comment",action:`response/${e}/delete`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE}function GettimeifferenceOfNow(e){e=e.replace(/\-/g,"/");var t=new Date(e),o=t.getTime(),i=(new Date).getTime(),a=Math.round((i-o)/864e5),n=Math.round((i-o)/36e5),s=Math.round((i-o)/6e4),r=t.getFullYear(),l=t.getMonth()+1,c=t.getDate(),u=t.getHours(),d=t.getMinutes();return a>0?a>10?{DistanceNow:r+"年"+l+"月"+c+"日",Detailed:l+"-"+c,MinuteDifference:s,HourDifference:n}:{DistanceNow:`${a}天前`,Detailed:l+"-"+c,MinuteDifference:s,HourDifference:n}:n>0?{DistanceNow:`${n}小时前`,Detailed:(u<10?"0"+u:u)+":"+(d<10?"0"+d:d),MinuteDifference:s,HourDifference:n}:s>0?{DistanceNow:`${s}分钟前`,Detailed:(u<10?"0"+u:u)+":"+(d<10?"0"+d:d),MinuteDifference:s,HourDifference:n}:{DistanceNow:"刚刚",Detailed:(u<10?"0"+u:u)+":"+(d<10?"0"+d:d),HourDifference:n,MinuteDifference:s}}function GetNowDate(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),a=e.getDay(),n=e.getHours(),s=e.getMinutes();return{MonthAndDay:o+"月"+i+"日",YearAndMothAndDay:t+"年"+o+"月"+i+"日",weekday:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a],time:(n<10?"0"+n:n)+":"+(s<10?"0"+s:s)}}function GetNumberOfMenit(e,t){e=e.replace(/\-/g,"/"),t=t.replace(/\-/g,"/");var o=new Date(e).getTime(),i=new Date(t).getTime();return Math.round((i-o)/6e4)}function getTime(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),a=e.getHours(),n=e.getMinutes(),s=e.getSeconds();return t+"/"+o+"/"+i+" "+(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)+":"+(s<10?"0"+s:s)}const _sfc_main$1j={name:"activity-item",props:{articleItem:{type:Object,required:!0},isMe:{type:Boolean,required:!0},needShowAll:{type:Boolean,default:!1}},data:()=>({AnonymousAvatar:AnonymousAvatar,imageContentStyle:"",numberOfpics:0,maxLength:100,transformTextLength:0,showAll:!0,isLiked:!1,likeSum:0,isAttention:0,publishTime:"",playVideo:!1,videoContext:{}}),created(){this.isLiked=this.articleItem.isLiked,this.likeSum=this.articleItem.likeSum,this.publishTime=GettimeifferenceOfNow(this.articleItem.createTime).DistanceNow,this.articleItem.publisher&&(this.isAttention=this.articleItem.publisher.isAttention),this.initText(),this.initImageTypesetting()},watch:{articleItem(e){formatAppLog("log","at components/activity-item/activity-item.vue:230","articleItem"),0==e.isAnonymity&&(this.isAttention=e.publisher.isAttention)}},methods:{onActivityClick(){try{this.$emit("onClick")}catch{}},onAvatarClick(){0!=this.articleItem.isAnonymity||this.isMe||uni.navigateTo({url:`/pages/user-home-page/user-home-page?userId=${this.articleItem.publisher.id}`})},onChatButtonClick(){uni.navigateTo({url:`/pages/message-secondary-page/chat-content/chat-content?fromUserId=${this.articleItem.publisher.id}`})},onMoreClick(){formatAppLog("log","at components/activity-item/activity-item.vue:272","onMoreClick()"),this.$emit("onMoreClick")},onImageClick(e){uni.previewImage({urls:this.articleItem.pic,current:e})},onVideoClick(){this.playVideo=!0,this.videoContext=uni.createVideoContext(`video_${this.articleItem.id}`),videoContext.requestFullScreen({direction:0}),videoContext.play()},onFullscreenChange(e){this.playVideo=e.detail.fullScreen,this.playVideo||this.videoContext.stop()},initText(){let e=this.articleItem.text,t=0,o=e.match(/\n/gi);if(o&&(t=o.length),t<=0)this.transformTextLength=e.length;else if(this.transformTextLength=e.length+19*t,this.transformTextLength>100){let t=e.indexOf("\n"),o=t,i=t,a=e;for(;o<100&&(a=e.slice(i+1),-1!=a.indexOf("\n"));)o=o+20+a.indexOf("\n"),i=i+1+a.indexOf("\n");this.maxLength=i}let i=this.transformTextLength<=100;this.needShowAll?this.showAll=!0:this.showAll=i},initImageTypesetting(){let e=0;this.articleItem.pic.length&&(e=this.articleItem.pic.length),this.imageContentStyle=e<=1?"picture-typesetting-1":2==e||4==e?"picture-typesetting-4":"picture-typesetting-9",this.numberOfpics=e},onLabelItemClick(e){uni.navigateTo({url:`../../pages/label-activity/label-activity?labelId=${e.id}&labelContent=${e.content}`})},onFollowButtonClick(){this.$emit("onFollowClick")},async onLikeButtonClick(){let e=this.isLiked,t=this.likeSum;if(0==e){this.isLiked=1,this.likeSum=this.likeSum+1,await LikeThisArtice(this.articleItem.id)||(this.isLiked=0,this.likeSum=t)}else{this.isLiked=0,this.likeSum=this.likeSum-1,await CancleLikeArticle(this.articleItem.id)||(this.isLiked=1,this.likeSum=t)}},onShowAllTextClick(){this.showAll=!this.showAll}}};function _sfc_render$1i(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{onClick:t[9]||(t[9]=(...e)=>n.onActivityClick&&n.onActivityClick(...e)),class:"acitivity-content"},[vue.createElementVNode("view",{class:"activity-header"},[vue.createElementVNode("view",{class:"activity-header-avatar"},[vue.createElementVNode("image",{class:"activity-user-avatar",mode:"aspectFill",src:1==o.articleItem.isAnonymity?a.AnonymousAvatar:o.articleItem.publisher.avatar,onClick:t[0]||(t[0]=vue.withModifiers((e=>n.onAvatarClick()),["stop"]))},null,8,["src"]),o.articleItem.publisher&&1==o.articleItem.publisher.isVip?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"vip-logo"},[vue.createElementVNode("image",{src:"../../static/svgs/vip-logo.svg",mode:"aspectFit",style:{width:"15px",height:"15px"}},null,8,["src"])])):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"activity-header-name-and-time"},[vue.createElementVNode("view",{class:"activity-header-name"},[vue.createElementVNode("view",{class:"activity-header-username"},[vue.createTextVNode(vue.toDisplayString(1==o.articleItem.isAnonymity?"某只小布咕":o.articleItem.publisher.username&&o.articleItem.publisher.username.length>8?o.articleItem.publisher.username.slice(0,8)+"...":o.articleItem.publisher.username),1),o.articleItem.publisher&&1==o.articleItem.publisher.isVerify?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"iconfont icon-shimingrenzheng_shimingrenzheng",style:{fontSize:"15px",color:"#3bd8bf",marginLeft:"5px"}})):vue.createCommentVNode("",!0),o.articleItem.publisher&&null!=o.articleItem.publisher.sex?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:vue.normalizeClass(0==o.articleItem.publisher.sex?"iconfont icon-nvxing":"iconfont icon-nanxing"),style:vue.normalizeStyle({fontSize:"15px",color:0==o.articleItem.publisher.sex?"#e86591":"#528cea",marginLeft:"5px"})},null,6)):vue.createCommentVNode("",!0)])]),vue.createElementVNode("view",{class:"activity-header-time"},[vue.createElementVNode("view",{class:"creat-time"},vue.toDisplayString(a.publishTime),1)])]),vue.createElementVNode("view",{class:"activity-header-button"},[0==o.articleItem.isAnonymity?(vue.openBlock(),vue.createElementBlock("view",{key:0},[o.isMe?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("view",{key:0},[0==o.articleItem.publisher.isAttention?(vue.openBlock(),vue.createElementBlock("view",{key:0,onClick:t[1]||(t[1]=vue.withModifiers((e=>n.onFollowButtonClick()),["stop"])),class:"follow-button"},"关注 ")):(vue.openBlock(),vue.createElementBlock("view",{key:1,onClick:t[2]||(t[2]=vue.withModifiers((e=>n.onChatButtonClick()),["stop"])),class:"chat-button"},[vue.createElementVNode("view",{class:"iconfont icon-message",style:{fontSize:"32rpx",color:"#FFF"}})]))]))])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"activity-more",onClick:t[3]||(t[3]=vue.withModifiers((e=>n.onMoreClick()),["stop"]))},[vue.createElementVNode("view",{class:"iconfont icon-gengduo-c",style:{fontSize:"50rpx",color:"#afafaf"}})])])]),vue.createElementVNode("view",{class:"activity-body"},[vue.createElementVNode("view",{class:"activity-tag-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.articleItem.labels,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,class:"activity-body-tag",onClick:vue.withModifiers((t=>n.onLabelItemClick(e)),["stop"])}," #"+vue.toDisplayString(e.content),9,["onClick"])))),128))]),vue.createElementVNode("view",{class:"activity-body-text"},[a.showAll?(vue.openBlock(),vue.createElementBlock("text",{key:0},vue.toDisplayString(o.articleItem.text),1)):(vue.openBlock(),vue.createElementBlock("text",{key:1},vue.toDisplayString(o.articleItem.text.slice(0,a.maxLength)+"..."),1)),a.transformTextLength>100?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[a.showAll?(vue.openBlock(),vue.createElementBlock("text",{key:0,onClick:t[4]||(t[4]=vue.withModifiers((e=>n.onShowAllTextClick()),["stop"])),class:"more-text"},vue.toDisplayString("\n收起"))):(vue.openBlock(),vue.createElementBlock("text",{key:1,onClick:t[5]||(t[5]=vue.withModifiers((e=>n.onShowAllTextClick()),["stop"])),class:"more-text"},vue.toDisplayString("\n展开")))],64)):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"activity-body-images",style:vue.normalizeStyle({width:1!=o.articleItem.video&&a.numberOfpics<=1?"60vw":"100%"})},[1==o.articleItem.video?(vue.openBlock(),vue.createElementBlock("view",{key:0},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.articleItem.pic,(e=>(vue.openBlock(),vue.createElementBlock("view",{onClick:t[7]||(t[7]=vue.withModifiers(((...e)=>n.onVideoClick&&n.onVideoClick(...e)),["stop"])),key:e,class:"video-content"},[vue.withDirectives(vue.createElementVNode("image",{style:{width:"100%",height:"55vw","background-color":"#000000"},"lazy-load":!0,mode:"aspectFit",src:e+"?vframe/jpg/offset/0"},null,8,["src"]),[[vue.vShow,!a.playVideo]]),vue.withDirectives(vue.createElementVNode("video",{style:{width:"100%",height:"55vw","background-color":"#000000"},src:e,id:`video_${o.articleItem.id}`,"initial-time":"0",onFullscreenchange:t[6]||(t[6]=(...e)=>n.onFullscreenChange&&n.onFullscreenChange(...e)),controls:""},null,40,["src","id"]),[[vue.vShow,a.playVideo]]),vue.withDirectives(vue.createElementVNode("view",{class:"play-icon-content"},[vue.createVNode(s,{customPrefix:"customicons",type:"videocam-filled",color:"#c5c5c5dc",size:"100"})],512),[[vue.vShow,!a.playVideo]])])))),128))])):vue.createCommentVNode("",!0),1!=o.articleItem.video?(vue.openBlock(),vue.createElementBlock("view",{key:1},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.articleItem.pic,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t,class:vue.normalizeClass("activity-body-image "+a.imageContentStyle),onClick:vue.withModifiers((t=>n.onImageClick(e)),["stop"])},[vue.createElementVNode("image",{"lazy-load":!0,mode:a.numberOfpics<=1?"widthFix":"aspectFill",src:e,class:"image-item"},null,8,["mode","src"])],10,["onClick"])))),128))])):vue.createCommentVNode("",!0)],4)]),vue.createElementVNode("view",{class:"activity-footer"},[vue.createElementVNode("view",{class:"activity-footer-item"},[vue.createElementVNode("view",{class:"iconfont icon-fenxiang",style:{fontSize:"25px",color:"#b8b8b8"}})]),vue.createElementVNode("view",{class:"activity-footer-item activity-footer-like",onClick:t[8]||(t[8]=vue.withModifiers((e=>n.onLikeButtonClick()),["stop"]))},[vue.createElementVNode("view",{class:vue.normalizeClass(0==a.isLiked?"iconfont icon-dianzan":0==o.articleItem.isLiked?"iconfont icon-dianzan1 is-activity":"iconfont icon-dianzan1"),style:vue.normalizeStyle({fontSize:"25px",color:0==a.isLiked?"#b8b8b8":"#83dbcd"})},null,6),vue.createTextVNode(" "+vue.toDisplayString(a.likeSum),1)]),vue.createElementVNode("view",{class:"activity-footer-item"},[vue.createElementVNode("view",{class:"iconfont icon-pinglun",style:{fontSize:"25px",color:"#b8b8b8"}}),vue.createTextVNode(" "+vue.toDisplayString(o.articleItem.commentSum),1)])])])])}var __easycom_1$g=_export_sfc(_sfc_main$1j,[["render",_sfc_render$1i],["__scopeId","data-v-6596e4c9"]]);let platform;setTimeout((()=>{platform=uni.getSystemInfoSync().platform}),16);const _sfc_main$1i={name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:()=>({contentdown:"",contentrefresh:"",contentnomore:""})}},data:()=>({webviewHide:!1,platform:platform,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}),computed:{iconSnowWidth(){return 2*(Math.floor(this.iconSize/24)||1)},contentdownText(){return this.contentText.contentdown||t("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||t("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||t("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1].$getAppWebview();t.addEventListener("hide",(()=>{this.webviewHide=!0})),t.addEventListener("show",(()=>{this.webviewHide=!1}))},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}};function _sfc_render$1h(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-load-more",onClick:t[0]||(t[0]=(...e)=>n.onClick&&n.onClick(...e))},[!a.webviewHide&&("circle"===o.iconType||"auto"===o.iconType&&"android"===a.platform)&&"loading"===o.status&&o.showIcon?(vue.openBlock(),vue.createElementBlock("view",{key:0,style:vue.normalizeStyle({width:o.iconSize+"px",height:o.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--android-MP"},[vue.createElementVNode("view",{style:vue.normalizeStyle({borderTopColor:o.color,borderTopWidth:o.iconSize/12})},null,4),vue.createElementVNode("view",{style:vue.normalizeStyle({borderTopColor:o.color,borderTopWidth:o.iconSize/12})},null,4),vue.createElementVNode("view",{style:vue.normalizeStyle({borderTopColor:o.color,borderTopWidth:o.iconSize/12})},null,4)],4)):!a.webviewHide&&"loading"===o.status&&o.showIcon?(vue.openBlock(),vue.createElementBlock("view",{key:1,style:vue.normalizeStyle({width:o.iconSize+"px",height:o.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--ios-H5"},[vue.createElementVNode("image",{src:a.imgBase64,mode:"widthFix"},null,8,["src"])],4)):vue.createCommentVNode("",!0),vue.createElementVNode("text",{class:"uni-load-more__text",style:vue.normalizeStyle({color:o.color})},vue.toDisplayString("more"===o.status?n.contentdownText:"loading"===o.status?n.contentrefreshText:n.contentnomoreText),5)])}var __easycom_1$f=_export_sfc(_sfc_main$1i,[["render",_sfc_render$1h],["__scopeId","data-v-5587089a"]]);const _sfc_main$1h={name:"activity-item",props:{},data:()=>({})};function _sfc_render$1g(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{class:"acitivity-skeleton-content"},[vue.createElementVNode("view",{class:"activity-header"},[vue.createElementVNode("view",{class:"activity-header-avatar"},[vue.createElementVNode("view",{class:"activity-user-avatar skeleton-item"})]),vue.createElementVNode("view",{class:"activity-header-name-and-time"},[vue.createElementVNode("view",{class:"activity-header-name skeleton-item"}),vue.createElementVNode("view",{class:"activity-header-time skeleton-item"})])]),vue.createElementVNode("view",{class:"activity-body"},[vue.createElementVNode("view",{class:"activity-body-text"},[vue.createElementVNode("view",{class:"body-text skeleton-item"}),vue.createElementVNode("view",{class:"body-text skeleton-item"}),vue.createElementVNode("view",{class:"body-text skeleton-item"})]),vue.createElementVNode("view",{class:"activity-body-images"},[vue.createElementVNode("view",{class:"image-item skeleton-item"})])]),vue.createElementVNode("view",{class:"activity-footer"},[vue.createElementVNode("view",{class:"footer skeleton-item"})])])])}var __easycom_3$7=_export_sfc(_sfc_main$1h,[["render",_sfc_render$1g],["__scopeId","data-v-213be704"]]);const _sfc_main$1g={name:"hot-activity-item",props:{articleItem:{type:Object,required:!0},ranking:{type:Number,required:!0}},data:()=>({articleText:""}),computed:{hot(){let e=this.articleItem.hot,t=e;return e>1e3&&(t=e/1e3+"k"),t}},beforeMount(){this.initText()},methods:{onClick(){this.$emit("onClick")},initText(){let e=this.articleItem.text,t=100,o=0,i=0,a=e.match(/\n/gi);if(a&&(o=a.length),o<=0)i=e.length;else if(i=e.length+19*o,i>50){let o=e.indexOf("\n"),i=o,a=o,n=e;for(;i<50&&(n=e.slice(a+1),-1!=n.indexOf("\n"));)i=i+20+n.indexOf("\n"),a=a+1+n.indexOf("\n");t=a}let n=i<=50;this.articleText=n?this.articleItem.text:this.articleItem.text.slice(0,t)+"..."}}};function _sfc_render$1f(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{class:"hot-activity-body",onClick:t[0]||(t[0]=e=>n.onClick())},[vue.createElementVNode("view",{class:"hot-ranking"},[vue.createElementVNode("view",{class:"ranking-content",style:vue.normalizeStyle({backgroundColor:1==o.ranking?"#EF4F4A":2==o.ranking?"#FD930D":3==o.ranking?"#F0C174":"#56CDBA"})},[vue.createElementVNode("view",{class:"ranking-text"},vue.toDisplayString(o.ranking),1),vue.createElementVNode("view",{class:"ranking-assist",style:vue.normalizeStyle({borderTop:1==o.ranking?"8rpx solid #EF4F4A":2==o.ranking?"8rpx solid #FD930D":3==o.ranking?"8rpx solid #F0C174":"8rpx solid #56CDBA",borderRight:"15rpx solid transparent"})},null,4)],4)]),vue.createElementVNode("view",{class:"hot-activity-content"},[vue.createElementVNode("view",{class:"hot-activity-info"},[vue.createElementVNode("view",{class:"hot-activity-text-content"},[vue.createElementVNode("view",{class:"text-info"},vue.toDisplayString(a.articleText),1),vue.createElementVNode("view",{class:"hot-activity-footer"},[vue.createElementVNode("text",null,vue.toDisplayString(n.hot)+" 热度",1)])]),o.articleItem.pic.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0},[1==o.articleItem.video?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"hot-activity-image"},[vue.createElementVNode("video",{class:"image-item",src:o.articleItem.pic[0],id:`video_${o.articleItem.id}`,"initial-time":"0",controls:""},null,8,["src","id"])])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"hot-activity-image"},[vue.createElementVNode("image",{class:"image-item","lazy-load":!0,mode:"aspectFill",src:o.articleItem.pic[0]},null,8,["src"])]))])):vue.createCommentVNode("",!0)])])])])}var __easycom_4$3=_export_sfc(_sfc_main$1g,[["render",_sfc_render$1f],["__scopeId","data-v-5b364cf8"]]);const _sfc_main$1f={name:"action-sheet-item",props:{title:{type:String,required:!0},icon:{type:String,required:!1}},data:()=>({}),methods:{click(e){this.$emit("click")}}};function _sfc_render$1e(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{onClick:t[0]||(t[0]=(...e)=>n.click&&n.click(...e)),class:"article-action-conetnt"},[o.icon?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"article-action-icon"},[vue.createElementVNode("view",{class:vue.normalizeClass("iconfont "+o.icon),style:{fontSize:"25px",color:"#c1c1c1"}},null,2)])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{style:vue.normalizeStyle({textAlign:o.icon?"left":"center"}),class:"article-action-text"},vue.toDisplayString(o.title),5)])}var __easycom_4$2=_export_sfc(_sfc_main$1f,[["render",_sfc_render$1e],["__scopeId","data-v-0766c661"]]);class MPAnimation{constructor(e,t){this.options=e,this.animation=uni.createAnimation(e),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let o=this.currentStepAnimates[this.next],i={};if(i=o||{styles:{},config:{}},animateTypes1.includes(e)){i.styles.transform||(i.styles.transform="");let o="";"rotate"===e&&(o="deg"),i.styles.transform+=`${e}(${t+o}) `}else i.styles[e]=`${t}`;this.currentStepAnimates[this.next]=i}_animateRun(e={},t={}){let o=this.$.$refs.ani.ref;if(o)return new Promise(((i,a)=>{nvueAnimation.transition(o,__spreadValues({styles:e},t),(e=>{i()}))}))}_nvueNextAnimate(e,t=0,o){let i=e[t];if(i){let{styles:a,config:n}=i;this._animateRun(a,n).then((()=>{t+=1,this._nvueNextAnimate(e,t,o)}))}else this.currentStepAnimates={},"function"==typeof o&&o(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const animateTypes1=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],animateTypes2=["opacity","backgroundColor"],animateTypes3=["width","height","left","right","top","bottom"];function createAnimation(e,t){if(t)return clearTimeout(t.timer),new MPAnimation(e,t)}animateTypes1.concat(animateTypes2,animateTypes3).forEach((e=>{MPAnimation.prototype[e]=function(...t){return this.animation[e](...t),this}}));const _sfc_main$1e={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e=__spreadProps(__spreadValues({},this.styles),{"transition-duration":this.duration/1e3+"s"}),t="";for(let o in e){t+=this.toLine(o)+":"+e[o]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=createAnimation(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(t,o={}){if(this.animation){for(let o in t)try{"object"==typeof t[o]?this.animation[o](...t[o]):this.animation[o](t[o])}catch(e){formatAppLog("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:139",`方法 ${o} 不存在`)}return this.animation.step(o),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=createAnimation(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},o=(e,o)=>{"fade"===o?t.opacity=this.animationType(e)[o]:t.transform+=this.animationType(e)[o]+" "};return"string"==typeof this.modeClass?o(e,this.modeClass):this.modeClass.forEach((t=>{o(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let o=null;"fade"===t?o=e?0:1:(o=e?"-100%":"0","zoom-in"===t&&(o=e?.8:1),"zoom-out"===t&&(o=e?1.2:1),"slide-right"===t&&(o=e?"100%":"0"),"slide-bottom"===t&&(o=e?"100%":"0")),this.animation[this.animationMode()[t]](o)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((o=>{t(e,o)})),this.animation},animationType:e=>({fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}};function _sfc_render$1d(e,t,o,i,a,n){return a.isShow?(vue.openBlock(),vue.createElementBlock("view",{key:0,ref:"ani",animation:a.animationData,class:vue.normalizeClass(o.customClass),style:vue.normalizeStyle(n.transformStyles),onClick:t[0]||(t[0]=(...e)=>n.onClick&&n.onClick(...e))},[vue.renderSlot(e.$slots,"default")],14,["animation"])):vue.createCommentVNode("",!0)}var __easycom_3$6=_export_sfc(_sfc_main$1e,[["render",_sfc_render$1d]]);const _sfc_main$1d={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},maskClick:{type:Boolean,default:!0},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:o,safeAreaInsets:i}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=t+o,this.safeArea?this.safeAreaInsets=i:this.safeAreaInsets=0})()},created(){this.mkclick=this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1},methods:{closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):formatAppLog("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:211","缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets&&this.safeAreaInsets.bottom||0,backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},e||(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)}}};function _sfc_render$1c(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-transition"),__easycom_3$6);return a.showPopup?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass(["uni-popup",[a.popupstyle,n.isDesktop?"fixforpc-z-index":""]]),onTouchmove:t[2]||(t[2]=vue.withModifiers(((...e)=>n.clear&&n.clear(...e)),["stop","prevent"]))},[vue.createElementVNode("view",{onTouchstart:t[1]||(t[1]=(...e)=>n.touchstart&&n.touchstart(...e))},[a.maskShow?(vue.openBlock(),vue.createBlock(s,{key:"1",name:"mask","mode-class":"fade",styles:a.maskClass,duration:a.duration,show:a.showTrans,onClick:n.onTap},null,8,["styles","duration","show","onClick"])):vue.createCommentVNode("",!0),vue.createVNode(s,{key:"2","mode-class":a.ani,name:"content",styles:a.transClass,duration:a.duration,show:a.showTrans,onClick:n.onTap},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-popup__wrapper",[a.popupstyle]]),style:vue.normalizeStyle({backgroundColor:n.bg}),onClick:t[0]||(t[0]=(...e)=>n.clear&&n.clear(...e))},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],6)])),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],34)):vue.createCommentVNode("",!0)}var __easycom_2$7=_export_sfc(_sfc_main$1d,[["render",_sfc_render$1c],["__scopeId","data-v-35f326ba"]]);const _sfc_main$1c={name:"action-sheet",props:{title:{type:String,required:!1},needHead:{type:Boolean,default:!1},needCancelButton:{type:Boolean,default:!1}},data:()=>({}),methods:{close(){this.$refs.actionPopup.close()},open(){this.$refs.actionPopup.open()}}};function _sfc_render$1b(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h),r=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_2$7);return vue.openBlock(),vue.createElementBlock("view",{class:"action-sheet"},[vue.createVNode(r,{backgroundColor:"#ffffff00","safe-area":"",ref:"actionPopup",type:"bottom"},{default:vue.withCtx((()=>[o.needHead?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"popup-head"},[vue.createElementVNode("view",{class:"popup-head-text"},vue.toDisplayString(o.title),1),vue.createElementVNode("view",{class:"close-icon-content"},[vue.createVNode(s,{onClick:t[0]||(t[0]=e=>n.close()),customPrefix:"customicons",type:"closeempty",color:"#000000",size:"25"})])])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"action-sheet-content"},[vue.renderSlot(e.$slots,"default",{},void 0,!0),o.needCancelButton?(vue.openBlock(),vue.createElementBlock("view",{key:0,onClick:t[1]||(t[1]=e=>n.close()),class:"article-action-cancel"},"取消")):vue.createCommentVNode("",!0)])])),_:3},512)])}var __easycom_5=_export_sfc(_sfc_main$1c,[["render",_sfc_render$1b],["__scopeId","data-v-48992edc"]]),popup={data:()=>({}),created(){this.popup=this.getParent()},methods:{getParent(e="uniPopup"){let t=this.$parent,o=t.$options.name;for(;o!==e;){if(t=t.$parent,!t)return!1;o=t.$options.name}return t}}};const _sfc_main$1b={name:"uniPopupMessage",mixins:[popup],props:{type:{type:String,default:"success"},message:{type:String,default:""},duration:{type:Number,default:3e3},maskShow:{type:Boolean,default:!1}},data:()=>({}),created(){this.popup.maskShow=this.maskShow,this.popup.messageChild=this},methods:{timerClose(){0!==this.duration&&(clearTimeout(this.timer),this.timer=setTimeout((()=>{this.popup.close()}),this.duration))}}};function _sfc_render$1a(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-popup-message"},[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-popup-message__box fixforpc-width","uni-popup__"+o.type])},[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createElementVNode("text",{class:vue.normalizeClass(["uni-popup-message-text","uni-popup__"+o.type+"-text"])},vue.toDisplayString(o.message),3)]),!0)],2)])}var __easycom_7=_export_sfc(_sfc_main$1b,[["render",_sfc_render$1a],["__scopeId","data-v-1d076376"]]);function getDevtoolsGlobalHook(){return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__}function getTarget(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}const isProxyAvailable="function"==typeof Proxy,HOOK_SETUP="devtools-plugin:setup",HOOK_PLUGIN_SETTINGS_SET="plugin:settings:set";class ApiProxy{constructor(t,o){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=o;const i={};if(t.settings)for(const e in t.settings){const o=t.settings[e];i[e]=o.defaultValue}const a=`__vue-devtools-plugin-settings__${t.id}`;let n=__spreadValues({},i);try{const e=localStorage.getItem(a),t=JSON.parse(e);Object.assign(n,t)}catch(e){}this.fallbacks={getSettings:()=>n,setSettings(t){try{localStorage.setItem(a,JSON.stringify(t))}catch(e){}n=t}},o.on(HOOK_PLUGIN_SETTINGS_SET,((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((o=>{this.targetQueue.push({method:t,args:e,resolve:o})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function setupDevtoolsPlugin(e,t){const o=getTarget(),i=getDevtoolsGlobalHook(),a=isProxyAvailable&&e.enableEarlyProxy;if(!i||!o.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&a){const n=a?new ApiProxy(e,i):null;(o.__VUE_DEVTOOLS_PLUGINS__=o.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:t,proxy:n}),n&&t(n.proxiedTarget)}else i.emit(HOOK_SETUP,e,t)}
/*!
   * vuex v4.0.2
   * (c) 2021 Evan You
   * @license MIT
   */var storeKey="store";function forEachValue(e,t){Object.keys(e).forEach((function(o){return t(e[o],o)}))}function isObject$1(e){return null!==e&&"object"==typeof e}function isPromise(e){return e&&"function"==typeof e.then}function partial(e,t){return function(){return e(t)}}function genericSubscribe(e,t,o){return t.indexOf(e)<0&&(o&&o.prepend?t.unshift(e):t.push(e)),function(){var o=t.indexOf(e);o>-1&&t.splice(o,1)}}function resetStore(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var o=e.state;installModule(e,o,[],e._modules.root,!0),resetStoreState(e,o,t)}function resetStoreState(e,t,o){var i=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var a=e._wrappedGetters,n={};forEachValue(a,(function(t,o){n[o]=partial(t,e),Object.defineProperty(e.getters,o,{get:function(){return n[o]()},enumerable:!0})})),e._state=vue.reactive({data:t}),e.strict&&enableStrictMode(e),i&&o&&e._withCommit((function(){i.data=null}))}function installModule(e,t,o,i,a){var n=!o.length,s=e._modules.getNamespace(o);if(i.namespaced&&(e._modulesNamespaceMap[s],e._modulesNamespaceMap[s]=i),!n&&!a){var r=getNestedState(t,o.slice(0,-1)),l=o[o.length-1];e._withCommit((function(){r[l]=i.state}))}var c=i.context=makeLocalContext(e,s,o);i.forEachMutation((function(t,o){registerMutation(e,s+o,t,c)})),i.forEachAction((function(t,o){var i=t.root?o:s+o,a=t.handler||t;registerAction(e,i,a,c)})),i.forEachGetter((function(t,o){registerGetter(e,s+o,t,c)})),i.forEachChild((function(i,n){installModule(e,t,o.concat(n),i,a)}))}function makeLocalContext(e,t,o){var i=""===t,a={dispatch:i?e.dispatch:function(o,i,a){var n=unifyObjectStyle(o,i,a),s=n.payload,r=n.options,l=n.type;return r&&r.root||(l=t+l),e.dispatch(l,s)},commit:i?e.commit:function(o,i,a){var n=unifyObjectStyle(o,i,a),s=n.payload,r=n.options,l=n.type;r&&r.root||(l=t+l),e.commit(l,s,r)}};return Object.defineProperties(a,{getters:{get:i?function(){return e.getters}:function(){return makeLocalGetters(e,t)}},state:{get:function(){return getNestedState(e.state,o)}}}),a}function makeLocalGetters(e,t){if(!e._makeLocalGettersCache[t]){var o={},i=t.length;Object.keys(e.getters).forEach((function(a){if(a.slice(0,i)===t){var n=a.slice(i);Object.defineProperty(o,n,{get:function(){return e.getters[a]},enumerable:!0})}})),e._makeLocalGettersCache[t]=o}return e._makeLocalGettersCache[t]}function registerMutation(e,t,o,i){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){o.call(e,i.state,t)}))}function registerAction(e,t,o,i){(e._actions[t]||(e._actions[t]=[])).push((function(t){var a=o.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},t);return isPromise(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):a}))}function registerGetter(e,t,o,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return o(i.state,i.getters,e.state,e.getters)})}function enableStrictMode(e){vue.watch((function(){return e._state.data}),(function(){}),{deep:!0,flush:"sync"})}function getNestedState(e,t){return t.reduce((function(e,t){return e[t]}),e)}function unifyObjectStyle(e,t,o){return isObject$1(e)&&e.type&&(o=t,t=e,e=e.type),{type:e,payload:t,options:o}}var LABEL_VUEX_BINDINGS="vuex bindings",MUTATIONS_LAYER_ID="vuex:mutations",ACTIONS_LAYER_ID="vuex:actions",INSPECTOR_ID="vuex",actionId=0;function addDevtools(e,t){setupDevtoolsPlugin({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[LABEL_VUEX_BINDINGS]},(function(o){o.addTimelineLayer({id:MUTATIONS_LAYER_ID,label:"Vuex Mutations",color:COLOR_LIME_500}),o.addTimelineLayer({id:ACTIONS_LAYER_ID,label:"Vuex Actions",color:COLOR_LIME_500}),o.addInspector({id:INSPECTOR_ID,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),o.on.getInspectorTree((function(o){if(o.app===e&&o.inspectorId===INSPECTOR_ID)if(o.filter){var i=[];flattenStoreForInspectorTree(i,t._modules.root,o.filter,""),o.rootNodes=i}else o.rootNodes=[formatStoreForInspectorTree(t._modules.root,"")]})),o.on.getInspectorState((function(o){if(o.app===e&&o.inspectorId===INSPECTOR_ID){var i=o.nodeId;makeLocalGetters(t,i),o.state=formatStoreForInspectorState(getStoreModule(t._modules,i),"root"===i?t.getters:t._makeLocalGettersCache,i)}})),o.on.editInspectorState((function(o){if(o.app===e&&o.inspectorId===INSPECTOR_ID){var i=o.nodeId,a=o.path;"root"!==i&&(a=i.split("/").filter(Boolean).concat(a)),t._withCommit((function(){o.set(t._state.data,a,o.state.value)}))}})),t.subscribe((function(e,t){var i={};e.payload&&(i.payload=e.payload),i.state=t,o.notifyComponentUpdate(),o.sendInspectorTree(INSPECTOR_ID),o.sendInspectorState(INSPECTOR_ID),o.addTimelineEvent({layerId:MUTATIONS_LAYER_ID,event:{time:Date.now(),title:e.type,data:i}})})),t.subscribeAction({before:function(e,t){var i={};e.payload&&(i.payload=e.payload),e._id=actionId++,e._time=Date.now(),i.state=t,o.addTimelineEvent({layerId:ACTIONS_LAYER_ID,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:i}})},after:function(e,t){var i={},a=Date.now()-e._time;i.duration={_custom:{type:"duration",display:a+"ms",tooltip:"Action duration",value:a}},e.payload&&(i.payload=e.payload),i.state=t,o.addTimelineEvent({layerId:ACTIONS_LAYER_ID,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:i}})}})}))}var COLOR_LIME_500=8702998,COLOR_DARK=6710886,COLOR_WHITE=16777215,TAG_NAMESPACED={label:"namespaced",textColor:COLOR_WHITE,backgroundColor:COLOR_DARK};function extractNameFromPath(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function formatStoreForInspectorTree(e,t){return{id:t||"root",label:extractNameFromPath(t),tags:e.namespaced?[TAG_NAMESPACED]:[],children:Object.keys(e._children).map((function(o){return formatStoreForInspectorTree(e._children[o],t+o+"/")}))}}function flattenStoreForInspectorTree(e,t,o,i){i.includes(o)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[TAG_NAMESPACED]:[]}),Object.keys(t._children).forEach((function(a){flattenStoreForInspectorTree(e,t._children[a],o,i+a+"/")}))}function formatStoreForInspectorState(e,t,o){t="root"===o?t:t[o];var i=Object.keys(t),a={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(i.length){var n=transformPathsToObjectTree(t);a.getters=Object.keys(n).map((function(e){return{key:e.endsWith("/")?extractNameFromPath(e):e,editable:!1,value:canThrow((function(){return n[e]}))}}))}return a}function transformPathsToObjectTree(e){var t={};return Object.keys(e).forEach((function(o){var i=o.split("/");if(i.length>1){var a=t,n=i.pop();i.forEach((function(e){a[e]||(a[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),a=a[e]._custom.value})),a[n]=canThrow((function(){return e[o]}))}else t[o]=canThrow((function(){return e[o]}))})),t}function getStoreModule(e,t){var o=t.split("/").filter((function(e){return e}));return o.reduce((function(e,i,a){var n=e[i];if(!n)throw new Error('Missing module "'+i+'" for path "'+t+'".');return a===o.length-1?n:n._children}),"root"===t?e:e.root._children)}function canThrow(t){try{return t()}catch(e){return e}}var Module=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var o=e.state;this.state=("function"==typeof o?o():o)||{}},prototypeAccessors$1={namespaced:{configurable:!0}};prototypeAccessors$1.namespaced.get=function(){return!!this._rawModule.namespaced},Module.prototype.addChild=function(e,t){this._children[e]=t},Module.prototype.removeChild=function(e){delete this._children[e]},Module.prototype.getChild=function(e){return this._children[e]},Module.prototype.hasChild=function(e){return e in this._children},Module.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},Module.prototype.forEachChild=function(e){forEachValue(this._children,e)},Module.prototype.forEachGetter=function(e){this._rawModule.getters&&forEachValue(this._rawModule.getters,e)},Module.prototype.forEachAction=function(e){this._rawModule.actions&&forEachValue(this._rawModule.actions,e)},Module.prototype.forEachMutation=function(e){this._rawModule.mutations&&forEachValue(this._rawModule.mutations,e)},Object.defineProperties(Module.prototype,prototypeAccessors$1);var ModuleCollection=function(e){this.register([],e,!1)};function update(e,t,o){if(t.update(o),o.modules)for(var i in o.modules){if(!t.getChild(i))return;update(e.concat(i),t.getChild(i),o.modules[i])}}function createStore(e){return new Store(e)}ModuleCollection.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},ModuleCollection.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,o){return e+((t=t.getChild(o)).namespaced?o+"/":"")}),"")},ModuleCollection.prototype.update=function(e){update([],this.root,e)},ModuleCollection.prototype.register=function(e,t,o){var i=this;void 0===o&&(o=!0);var a=new Module(t,o);0===e.length?this.root=a:this.get(e.slice(0,-1)).addChild(e[e.length-1],a);t.modules&&forEachValue(t.modules,(function(t,a){i.register(e.concat(a),t,o)}))},ModuleCollection.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),o=e[e.length-1],i=t.getChild(o);i&&i.runtime&&t.removeChild(o)},ModuleCollection.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),o=e[e.length-1];return!!t&&t.hasChild(o)};var Store=function(e){var t=this;void 0===e&&(e={});var o=e.plugins;void 0===o&&(o=[]);var i=e.strict;void 0===i&&(i=!1);var a=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ModuleCollection(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=a;var n=this,s=this.dispatch,r=this.commit;this.dispatch=function(e,t){return s.call(n,e,t)},this.commit=function(e,t,o){return r.call(n,e,t,o)},this.strict=i;var l=this._modules.root.state;installModule(this,l,[],this._modules.root),resetStoreState(this,l),o.forEach((function(e){return e(t)}))},prototypeAccessors={state:{configurable:!0}};Store.prototype.install=function(e,t){e.provide(t||storeKey,this),e.config.globalProperties.$store=this,void 0!==this._devtools&&this._devtools&&addDevtools(e,this)},prototypeAccessors.state.get=function(){return this._state.data},prototypeAccessors.state.set=function(e){},Store.prototype.commit=function(e,t,o){var i=this,a=unifyObjectStyle(e,t,o),n=a.type,s=a.payload,r={type:n,payload:s},l=this._mutations[n];l&&(this._withCommit((function(){l.forEach((function(e){e(s)}))})),this._subscribers.slice().forEach((function(e){return e(r,i.state)})))},Store.prototype.dispatch=function(t,o){var i=this,a=unifyObjectStyle(t,o),n=a.type,s=a.payload,r={type:n,payload:s},l=this._actions[n];if(l){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(r,i.state)}))}catch(e){}var c=l.length>1?Promise.all(l.map((function(e){return e(s)}))):l[0](s);return new Promise((function(t,o){c.then((function(o){try{i._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(r,i.state)}))}catch(e){}t(o)}),(function(t){try{i._actionSubscribers.filter((function(e){return e.error})).forEach((function(e){return e.error(r,i.state,t)}))}catch(e){}o(t)}))}))}},Store.prototype.subscribe=function(e,t){return genericSubscribe(e,this._subscribers,t)},Store.prototype.subscribeAction=function(e,t){return genericSubscribe("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},Store.prototype.watch=function(e,t,o){var i=this;return vue.watch((function(){return e(i.state,i.getters)}),t,Object.assign({},o))},Store.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},Store.prototype.registerModule=function(e,t,o){void 0===o&&(o={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),installModule(this,this.state,e,this._modules.get(e),o.preserveState),resetStoreState(this,this.state)},Store.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){delete getNestedState(t.state,e.slice(0,-1))[e[e.length-1]]})),resetStore(this)},Store.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},Store.prototype.hotUpdate=function(e){this._modules.update(e),resetStore(this,!0)},Store.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(Store.prototype,prototypeAccessors);const state$1=()=>({newMessage:{}}),getters$1={},actions$1={},mutations$1={onNewMessage(e,t){e.newMessage=t}},messageStore={namespaced:!0,state:state$1,getters:getters$1,actions:actions$1,mutations:mutations$1},state=()=>({isConnectSocket:!1}),getters={},actions={},mutations={onSocketConnected(e,t){e.isConnectSocket=t}},socketStateStore={namespaced:!0,state:state,getters:getters,actions:actions,mutations:mutations};var store=createStore({modules:{messageStore:messageStore,socketStateStore:socketStateStore}});const ALL_UNREAD_MESSAGE_SUM="all_unread_message_sum",REFRESH_USERINFO="refresh_userinfo",REFRESH_CHAT_CONTENT="REFRESH_CHAT_CONTENT";async function initUnreadMessageSum(e){let t=0,o=await getAndHandleUserMessageList(e),i=await getAndHandOfficialNewsList(e);o.forEach((e=>{e.unreadSum>0&&(t+=e.unreadSum)})),i.forEach((e=>{e.unreadSum>0&&(t+=e.unreadSum)}));let a=await getAndHandleInteractiveMessageList(e);formatAppLog("log","at utils/tabBarBadgeUtils.ts:33",a),t+=a,formatAppLog("log","at utils/tabBarBadgeUtils.ts:35","unreadSum",t),setGlobalData(ALL_UNREAD_MESSAGE_SUM,t),t>0?uni.setTabBarBadge({index:2,text:String(t)}):uni.removeTabBarBadge({index:2})}function changeUnreadMessageSum(e=0){let t=0;try{t=getGlobalData(ALL_UNREAD_MESSAGE_SUM),t+=e}catch{e>0&&(t+=e)}setGlobalData(ALL_UNREAD_MESSAGE_SUM,t),t>0?uni.setTabBarBadge({index:2,text:String(t)}):uni.removeTabBarBadge({index:2})}async function connectSocket(){let e=uni.getStorageSync(TOKEN),t=await getMyUserInfo();if(e){let o=uni.connectSocket({url:`${SoketUrl}${e}`,success:function(){formatAppLog("log","at utils/socket.ts:30","connect success")}});o.onOpen((function(){store.commit("socketStateStore/onSocketConnected",!0),setInterval((()=>{formatAppLog("log","at utils/socket.ts:37","onOpen"),o.send({data:"我已经上线"})}),3e4)})),o.onMessage((async function(e){formatAppLog("log","at utils/socket.ts:42","onMessage: ",e);let o=e.data,i=JSON.parse(o);if(formatAppLog("log","at utils/socket.ts:45","socketResult.type",i.type),i.type===USER_MESSAGE){let i=uni.getStorageSync(NEW_MESSAGE_SOUND);i||(i=RingingToneList[0]);const a=uni.createInnerAudioContext();a.autoplay=!0,a.src=i.url;let n=JSON.parse(o);await saveUserMessageList(n,t.id),await saveChatRecord(n,t.id),changeUnreadMessageSum(1),onNewMessage(e.data)}else if(i.type===WITHDRAW){let i=JSON.parse(o);await saveWithDrawChatRecord(i,t.id),await saveUserMessageListWhenWithDraw(i,t.id),onNewMessage(e.data)}else if(i.type===ALREADY_READ){let i=JSON.parse(o);await saveAlreadyRead(i,t.id),onNewMessage(e.data)}else if(i.type===INTERACTIVE){changeUnreadMessageSum(1);let i=JSON.parse(o);await saveInteractiveMessageList(i,t.id),onNewMessage(e.data)}})),o.onError((function(){formatAppLog("log","at utils/socket.ts:79","onError"),uni.closeSocket({})})),o.onClose((function(e){formatAppLog("log","at utils/socket.ts:86","onClose: ",e),store.commit("socketStateStore/onSocketConnected",!1)}))}}function onNewMessage(e){e=JSON.parse(e),store.commit("messageStore/onNewMessage",e),formatAppLog("log","at utils/socket.ts:96",store.state.messageStore.newMessage)}const _sfc_main$1a={components:{},data:()=>({tabLabels:[{title:"推荐",badge:0},{title:"热榜",badge:0}],tabSelect:0,touchY:0,myId:0,editArticleItem:{},scrollInto:"",showBottomLoading:!1,hotLabels:[],state:store.state,refresherEnabled:!0,squareArticles:{data:[],isRefresh:!1,haveMoreData:!0,page:1},hotArticles:{data:[],isRefresh:!1,haveMoreData:!0,page:1},contentHeight:0,navHeight:0}),async onLoad(){let e=await getMyUserInfo();this.myId=e.id,await this.getSquarearticles(this.squareArticles.page,!0),this.hotLabels=await getHotLabels(1),initUnreadMessageSum(e.id)},onReady(){let e=this;uni.getSystemInfo({success(t){e.contentHeight=t.windowHeight}}),uni.createSelectorQuery().select("#index-swiper").boundingClientRect((t=>{e.navHeight=t.top})).exec()},async onShow(){formatAppLog("log","at pages/index/index.vue:251","this.state.socketStateStore.isConnectSocket",this.state.socketStateStore.isConnectSocket),this.state.socketStateStore.isConnectSocket||connectSocket()},computed:{newMessage(){return this.state.messageStore.newMessage},statusBarHeight:()=>uni.getSystemInfoSync().statusBarHeight+"px",scollerHeight(){return this.contentHeight-this.navHeight}},watch:{newMessage:function(e){formatAppLog("log","at pages/index/index.vue:270","watch",e),this.$refs.messagePopup.open()}},methods:{onContentTouchStart(e){this.touchY=e.changedTouches[0].clientY},onContentTouchEnd(e){if(this.touchY-e.changedTouches[0].clientY>50)if(0==this.tabSelect){if(!this.squareArticles.haveMoreData||this.squareArticles.data.length>10)return;this.showBottomLoading=!0,this.squareArticles.page=this.squareArticles.page+1,this.getSquarearticles(this.squareArticles.page)}else if(1==this.tabSelect){if(!this.hotArticles.haveMoreData||this.hotArticles.data.length>10)return;this.showBottomLoading=!0,this.hotArticles.page=this.hotArticles.page+1,this.getSquarearticles(this.hotArticles.page)}},onSwiperTransition(){this.squareArticles.isRefresh||this.hotArticles.isRefresh||(this.refresherEnabled=!1)},onSwiperAnimationfinish(){this.refresherEnabled=!0,1==this.tabSelect&&this.hotArticles.data.length<1&&this.hotArticles.haveMoreData&&(this.hotArticles.isRefresh=!0)},onActivityItemClick(e){uni.navigateTo({url:`/pages/activity-info/activity-info?activityId=${e.id}`})},onSearchBarClick(){uni.navigateTo({url:"/pages/label-activity/search-activity"})},onRefreshClick(){0==this.tabSelect?(this.scrollInto="activity-search-bar-content",this.squareArticles.page=1,this.squareArticles.isRefresh=!0):1==this.tabSelect&&(this.scrollInto="hot-scrollview-top",this.hotArticles.page=1,this.hotArticles.isRefresh=!0)},onPublishButtonClick(){uni.navigateTo({url:"/pages/publish/publish"})},onMoreClick(e){this.$refs.articleActionPopup.open(),this.editArticleItem=e},onPopupReportClick(e){uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.id}&objectType=${reportObjectType.activity}`}),this.$refs.articleActionPopup.close()},onPopupDeleteClick(){let e=this;formatAppLog("log","at pages/index/index.vue:398",e.editArticleItem),uni.showModal({title:"删除动态",content:"你确定要删除这个动态吗",success:async function(t){if(t.confirm){if(await deleteMyArticle(e.editArticleItem.id)){let t=e.squareArticles.data;for(let o=0;o<t.length;o++)if(t[o].id==e.editArticleItem.id){t.splice(o,1);break}e.squareArticles.data=t,e.$refs.articleActionPopup.close(),uni.showToast({title:"删除成功",icon:"success"})}}else formatAppLog("log","at pages/index/index.vue:420","用户点击取消")}})},async onCancelFollow(e){if(!e.publisher)return;let t=this;uni.showModal({title:"取消关注",content:`你确定要取消关注${e.publisher.username}`,success:async function(o){if(o.confirm){if(e.publisher&&await cancelAttention(e.publisher.id)){let o=t.squareArticles.data;for(let t=0;t<o.length;t++)o[t].publisher&&o[t].publisher.id==e.publisher.id&&(o[t].publisher.isAttention=0);let i=t.attentionArticles.data;for(let t=0;t<i.length;t++)i[t].publisher&&i[t].publisher.id==e.publisher.id&&(i[t].publisher.isAttention=0);let a=t.hotArticles.data;for(let t=0;t<a.length;t++)a[t].publisher&&a[t].publisher.id==e.publisher.id&&(a[t].publisher.isAttention=0);t.squareArticles.data=o,t.attentionArticles.data=i,t.hotArticles.data=a,t.$refs.articleActionPopup.close(),uni.showToast({title:"取消关注",icon:"success"})}}else o.cancel&&formatAppLog("log","at pages/index/index.vue:473","用户点击取消")}})},async onFollow(e){if(!e.publisher)return;let t=this;if(await followUser(e.publisher.id)){let o=t.squareArticles.data;for(let t=0;t<o.length;t++)o[t].publisher&&o[t].publisher.id==e.publisher.id&&(o[t].publisher.isAttention=1);let i=t.attentionArticles.data;for(let t=0;t<i.length;t++)i[t].publisher&&i[t].publisher.id==e.publisher.id&&(i[t].publisher.isAttention=1);let a=t.hotArticles.data;for(let t=0;t<a.length;t++)a[t].publisher&&a[t].publisher.id==e.publisher.id&&(a[t].publisher.isAttention=1);t.squareArticles.data=o,t.attentionArticles.data=i,t.hotArticles.data=a,t.$refs.articleActionPopup.close(),uni.showToast({title:"关注成功",icon:"success"})}},async onChatClick(e){e.publisher&&uni.navigateTo({url:`/pages/message-secondary-page/chat-content/chat-content?fromUserId=${e.publisher.id}`})},onSwiperChange(e){formatAppLog("log","at pages/index/index.vue:536",this.refresherEnabled),this.tabSelect=e.detail.current},onTabsClick(e){this.tabSelect=e},onSquareIsRefresh(){this.squareArticles.isRefresh=!0,this.squareArticles.page=1,this.getSquarearticles(this.squareArticles.page)},onSquareScrolltolower(){this.squareArticles.haveMoreData&&(this.showBottomLoading=!0,this.squareArticles.page=this.squareArticles.page+1,this.getSquarearticles(this.squareArticles.page))},onHotIsRefresh(){this.hotArticles.isRefresh=!0,this.hotArticles.page=1,this.getHotArticles(this.hotArticles.page)},onHotScrolltolower(){this.hotArticles.haveMoreData&&(this.showBottomLoading=!0,this.hotArticles.page=this.hotArticles.page+1,this.getHotArticles(this.hotArticles.page))},async getSquarearticles(e,t=!1){let o=await request({data:{method:"GET",group:"activity",action:"square",data:{page:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(setTimeout((()=>{this.squareArticles.isRefresh=!1}),700),this.showBottomLoading=!1,formatAppLog("log","at pages/index/index.vue:611",o.data),o.data.code===REQUEST_SUCCEEDED_CODE){let i=o.data.data.pageSum,a=o.data.data.list;if(1===e)uni.showToast({title:"刷新成功",icon:"none"}),t||this.playRefreshDynamicSound(),this.squareArticles.data=a,this.scrollInto="",this.squareArticles.haveMoreData=!0;else if(e>i)this.squareArticles.haveMoreData=!1,this.squareArticles.page=e-1;else{let t=this.squareArticles.data.concat(a);this.squareArticles.data=t,this.squareArticles.haveMoreData=e!=i}a.length<1&&e<i&&(this.squareArticles.page=e+1,this.getSquarearticles(this.squareArticles.page,!0))}},async getHotArticles(e,t=!1){let o=await request({data:{method:"GET",group:"activity",action:"hot",data:{page:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(setTimeout((()=>{this.hotArticles.isRefresh=!1}),700),this.showBottomLoading=!1,formatAppLog("log","at pages/index/index.vue:674",o.data),o.data.code===REQUEST_SUCCEEDED_CODE){let i=o.data.data.pageSum,a=o.data.data.list;if(1===e)uni.showToast({title:"刷新成功",icon:"none"}),t||this.playRefreshDynamicSound(),this.hotArticles.data=a,this.scrollInto="",this.hotArticles.haveMoreData=!0;else if(e>i)this.hotArticles.haveMoreData=!1,this.hotArticles.page=e-1;else{let t=this.hotArticles.data.concat(a);this.hotArticles.data=t,this.hotArticles.haveMoreData=e!=i}a.length<1&&e<i&&(this.hotArticles.page=e+1,this.getHotArticles(this.hotArticles.page,!0))}},async playRefreshDynamicSound(){let e=uni.getStorageSync(REFRESH_DYNAMIC_SOUND);e||(e=RingingToneList[6]);const t=uni.createInnerAudioContext();t.autoplay=!0,t.src=e.url}}};function _sfc_render$19(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("page-tabs"),__easycom_0$3),r=resolveEasycom(vue.resolveDynamicComponent("activity-item"),__easycom_1$g),l=resolveEasycom(vue.resolveDynamicComponent("uni-load-more"),__easycom_1$f),c=resolveEasycom(vue.resolveDynamicComponent("activity-skeleton"),__easycom_3$7),u=resolveEasycom(vue.resolveDynamicComponent("hot-activity-item"),__easycom_4$3),d=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),m=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5),h=resolveEasycom(vue.resolveDynamicComponent("uni-popup-message"),__easycom_7),p=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_2$7);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"index-conent",onTouchstart:t[9]||(t[9]=(...e)=>n.onContentTouchStart&&n.onContentTouchStart(...e)),onTouchend:t[10]||(t[10]=(...e)=>n.onContentTouchEnd&&n.onContentTouchEnd(...e))},[vue.createElementVNode("movable-area",{style:{height:"100vh"},class:"refresh-button-movable"},[vue.createElementVNode("view",{class:"square-head",style:vue.normalizeStyle({paddingTop:n.statusBarHeight})},[vue.createVNode(s,{labels:a.tabLabels,index:a.tabSelect,tabPadding:26,activeFontSize:18,defaultFontSize:16,defaultColor:"#676767",underLineType:"bubble",onChangeIndex:n.onTabsClick},null,8,["labels","index","onChangeIndex"])],4),vue.createElementVNode("movable-view",{x:300,y:500,class:"refresh-button-content",direction:"all"},[vue.createElementVNode("view",{onClick:t[0]||(t[0]=(...e)=>n.onPublishButtonClick&&n.onPublishButtonClick(...e)),class:"send-button"},[vue.createElementVNode("view",{class:"iconfont icon-fabu",style:{fontSize:"30px",color:"#FFF"}})])]),vue.createElementVNode("swiper",{current:a.tabSelect,style:vue.normalizeStyle({height:n.scollerHeight+"px"}),class:"swiper",id:"index-swiper",onChange:t[6]||(t[6]=(...e)=>n.onSwiperChange&&n.onSwiperChange(...e)),onTransition:t[7]||(t[7]=(...e)=>n.onSwiperTransition&&n.onSwiperTransition(...e)),onAnimationfinish:t[8]||(t[8]=(...e)=>n.onSwiperAnimationfinish&&n.onSwiperAnimationfinish(...e))},[vue.createElementVNode("swiper-item",null,[vue.createElementVNode("scroll-view",{class:"scrollview","scroll-y":"true",style:vue.normalizeStyle({height:n.scollerHeight+"px"}),"refresher-enabled":a.refresherEnabled,"refresher-triggered":a.squareArticles.isRefresh,onRefresherrefresh:t[2]||(t[2]=e=>n.onSquareIsRefresh()),"scroll-into-view":a.scrollInto,onScrolltolower:t[3]||(t[3]=e=>n.onSquareScrolltolower())},[vue.createElementVNode("view",{class:"search-bar-content",id:"activity-search-bar-content"},[vue.createElementVNode("view",{class:"search-bar",onClick:t[1]||(t[1]=e=>n.onSearchBarClick())},[vue.createElementVNode("view",{class:"iconfont icon-search",style:{fontSize:"25px",color:"#707070"}}),vue.createElementVNode("swiper",{vertical:"true",autoplay:"true",interval:"4000",class:"labels-swiper"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.hotLabels,((e,t)=>(vue.openBlock(),vue.createElementBlock("swiper-item",{key:e.id},[vue.createElementVNode("view",{class:"search-tips"},vue.toDisplayString(e.content),1)])))),128))])])]),a.squareArticles.data.length>0?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("view",{id:"square-activity-head"}),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.squareArticles.data,((e,t)=>(vue.openBlock(),vue.createBlock(r,{articleItem:e,isMe:1!=e.isAnonymity&&a.myId==e.publisher.id,key:e.id,onOnFollowClick:t=>n.onFollow(e),onOnMoreClick:t=>n.onMoreClick(e),onOnClick:t=>n.onActivityItemClick(e)},null,8,["articleItem","isMe","onOnFollowClick","onOnMoreClick","onOnClick"])))),128)),vue.createElementVNode("view",{class:"loading-content"},[vue.createVNode(l,{status:a.squareArticles.haveMoreData?a.showBottomLoading?"loading":"more":"noMore",contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},iconType:"circle"},null,8,["status","contentText"])])],64)):(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList([...new Array(5)],((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t},[vue.createVNode(c)])))),128))],44,["refresher-enabled","refresher-triggered","scroll-into-view"])]),vue.createElementVNode("swiper-item",null,[vue.createElementVNode("scroll-view",{class:"scrollview","scroll-y":"true","refresher-enabled":a.refresherEnabled,style:vue.normalizeStyle({height:n.scollerHeight+"px"}),"refresher-triggered":a.hotArticles.isRefresh,onRefresherrefresh:t[4]||(t[4]=e=>n.onHotIsRefresh()),"scroll-into-view":a.scrollInto,onScrolltolower:t[5]||(t[5]=e=>n.onHotScrolltolower())},[vue.createElementVNode("view",{id:"hot-scrollview-top"}),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.hotArticles.data,((e,t)=>(vue.openBlock(),vue.createBlock(u,{articleItem:e,key:e.id,ranking:t+1,onOnClick:t=>n.onActivityItemClick(e)},null,8,["articleItem","ranking","onOnClick"])))),128)),vue.createElementVNode("view",{class:"loading-content"},[vue.createVNode(l,{status:a.hotArticles.haveMoreData?a.showBottomLoading?"loading":"more":"noMore",contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},iconType:"circle"},null,8,["status","contentText"])])],44,["refresher-enabled","refresher-triggered","scroll-into-view"])])],44,["current"])])],32),vue.createVNode(m,{ref:"articleActionPopup",needHead:!0,title:"动态选择",needCancelButton:!0},{default:vue.withCtx((()=>[a.editArticleItem.id?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[a.editArticleItem.isAnonymity?(vue.openBlock(),vue.createBlock(d,{key:0,onClick:t[11]||(t[11]=e=>n.onPopupReportClick(a.editArticleItem)),icon:"icon-alert",title:"举报"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[a.editArticleItem.publisher.id==a.myId?(vue.openBlock(),vue.createBlock(d,{key:0,icon:"icon-delete",title:"删除",onClick:n.onPopupDeleteClick},null,8,["onClick"])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[1==a.editArticleItem.publisher.isAttention?(vue.openBlock(),vue.createBlock(d,{key:0,icon:"icon-quxiaoguanzhu",title:"取消关注",onClick:t[12]||(t[12]=e=>n.onCancelFollow(a.editArticleItem))})):(vue.openBlock(),vue.createBlock(d,{key:1,icon:"icon-guanzhu",title:"关注",onClick:t[13]||(t[13]=e=>n.onFollow(a.editArticleItem))})),vue.createVNode(d,{onClick:t[14]||(t[14]=e=>n.onChatClick(a.editArticleItem)),icon:"icon-message",title:"私聊"}),vue.createVNode(d,{onClick:t[15]||(t[15]=e=>n.onPopupReportClick(a.editArticleItem)),icon:"icon-alert",title:"举报"})],64))],64))],64)):vue.createCommentVNode("",!0)])),_:1},512),vue.createVNode(p,{style:{marginTop:"85px"},ref:"messagePopup",type:"message"},{default:vue.withCtx((()=>[vue.createVNode(h,{type:"success",message:"你有一条新的消息",duration:0})])),_:1},512)])}var PagesIndexIndex=_export_sfc(_sfc_main$1a,[["render",_sfc_render$19]]);const _sfc_main$19={name:"StatusBar",data:()=>({statusBarHeight:20}),mounted(){this.statusBarHeight=uni.getSystemInfoSync().statusBarHeight+"px"}};function _sfc_render$18(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{style:vue.normalizeStyle({height:a.statusBarHeight}),class:"uni-status-bar"},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],4)}var __easycom_0$2=_export_sfc(_sfc_main$19,[["render",_sfc_render$18],["__scopeId","data-v-5b289235"]]);const _sfc_main$18={name:"UniStatusBar",data:()=>({statusBarHeight:20}),mounted(){this.statusBarHeight=uni.getSystemInfoSync().statusBarHeight+"px"}};function _sfc_render$17(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{style:vue.normalizeStyle({height:a.statusBarHeight}),class:"uni-status-bar"},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],4)}var statusBar=_export_sfc(_sfc_main$18,[["render",_sfc_render$17],["__scopeId","data-v-150fa998"]]);const _sfc_main$17={name:"UniNavBar",components:{statusBar:statusBar},emits:["clickLeft","clickRight","clickTitle"],props:{title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:"#000000"},backgroundColor:{type:String,default:"#FFFFFF"},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0}},mounted(){uni.report&&""!==this.title&&uni.report("title",this.title)},methods:{onClickLeft(){this.$emit("clickLeft")},onClickRight(){this.$emit("clickRight")},onClickTitle(){this.$emit("clickTitle")}}};function _sfc_render$16(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("status-bar"),__easycom_0$2),r=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",{class:"uni-navbar"},[vue.createElementVNode("view",{class:vue.normalizeClass([{"uni-navbar--fixed":o.fixed,"uni-navbar--shadow":o.shadow,"uni-navbar--border":o.border},"uni-navbar__content"]),style:vue.normalizeStyle({"background-color":o.backgroundColor})},[o.statusBar?(vue.openBlock(),vue.createBlock(s,{key:0})):vue.createCommentVNode("",!0),vue.createElementVNode("view",{style:vue.normalizeStyle({color:o.color,backgroundColor:o.backgroundColor}),class:"uni-navbar__header uni-navbar__content_view"},[vue.createElementVNode("view",{onClick:t[0]||(t[0]=(...e)=>n.onClickLeft&&n.onClickLeft(...e)),class:"uni-navbar__header-btns uni-navbar__header-btns-left uni-navbar__content_view"},[o.leftIcon.length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-navbar__content_view"},[vue.createVNode(r,{color:o.color,type:o.leftIcon,size:"22"},null,8,["color","type"])])):vue.createCommentVNode("",!0),o.leftText.length?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:vue.normalizeClass([{"uni-navbar-btn-icon-left":!o.leftIcon.length},"uni-navbar-btn-text uni-navbar__content_view"])},[vue.createElementVNode("text",{style:vue.normalizeStyle({color:o.color,fontSize:"12px"})},vue.toDisplayString(o.leftText),5)],2)):vue.createCommentVNode("",!0),vue.renderSlot(e.$slots,"left",{},void 0,!0)]),vue.createElementVNode("view",{class:"uni-navbar__header-container uni-navbar__content_view",onClick:t[1]||(t[1]=(...e)=>n.onClickTitle&&n.onClickTitle(...e))},[o.title.length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-navbar__header-container-inner uni-navbar__content_view"},[vue.createElementVNode("text",{class:"uni-nav-bar-text",style:vue.normalizeStyle({color:o.color})},vue.toDisplayString(o.title),5)])):vue.createCommentVNode("",!0),vue.renderSlot(e.$slots,"default",{},void 0,!0)]),vue.createElementVNode("view",{class:vue.normalizeClass([o.title.length?"uni-navbar__header-btns-right":"","uni-navbar__header-btns uni-navbar__content_view"]),onClick:t[2]||(t[2]=(...e)=>n.onClickRight&&n.onClickRight(...e))},[o.rightIcon.length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-navbar__content_view uni-navbar__header-btns-right"},[vue.createVNode(r,{color:o.color,type:o.rightIcon,size:"22"},null,8,["color","type"])])):vue.createCommentVNode("",!0),o.rightText.length&&!o.rightIcon.length?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-navbar-btn-text uni-navbar__content_view"},[vue.createElementVNode("text",{class:"uni-nav-bar-right-text"},vue.toDisplayString(o.rightText),1)])):vue.createCommentVNode("",!0),vue.renderSlot(e.$slots,"right",{},void 0,!0)],2)],4)],6),o.fixed?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-navbar__placeholder"},[o.statusBar?(vue.openBlock(),vue.createBlock(s,{key:0})):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"uni-navbar__placeholder-view"})])):vue.createCommentVNode("",!0)])}var __easycom_0$1=_export_sfc(_sfc_main$17,[["render",_sfc_render$16],["__scopeId","data-v-f83a2790"]]);const Keywords={sunny:/晴/,shower:/阵雨/,"thunder-shower":/雷阵雨/,overcast:/阴/,cloudy:/多云/,"rainy-storm":/暴雨/,"raniy-large":/大雨/,"raniy-lightning":/雷|电/,"raniy-mid":/中雨/,"raniy-small":/小雨/,"snow-small":/小雪|雪/,"snow-mid":/中雪/,sleet:/雨夹雪/,"snow-large":/大雪/,fog:/雾/,smog:/霾/},_sfc_main$16={data:()=>({nbTitle:"布咕",backgroundColor:"#fff",frontColor:TitleColor,bannerList:[],weatherResult:{forecast:[{type:"N/A"}],wendu:"N/A",ganmao:"",city:"武汉"},helloText:"",timeNow:"",weatherIcon:""}),onShow(){changeUnreadMessageSum()},methods:{onSignCardClick(){uni.navigateTo({url:"/pages/bugu-secondary-page/sign-in-lottery/sign-in-lottery"})},onBoxCardClick(){uni.navigateTo({url:"/pages/bugu-secondary-page/blind-box/blind-box"})}},async mounted(){formatAppLog("log","at pages/bugu/bugu.vue:223",this),this.bannerList=await getBannerList(),this.helloText=getHellowText(),this.timeNow=GetNowDate().MonthAndDay;let e=await getWeather();e&&(this.weatherResult=e.weatherResult,this.weatherIcon=e.weatherIcon)}};async function getWeather(){let e=await getWeatherInfo();if(formatAppLog("log","at pages/bugu/bugu.vue:241","getWeatherInfo",e.data),"OK"===e.data.desc){let t=e.data.data,o="";for(let e in Keywords)Keywords[e].test(t.forecast[0].type)&&(o=e);return{weatherResult:t,weatherIcon:o}}}async function getBannerList(){let e=await request({data:{method:"GET",group:"banner",action:"list",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});return e.data.code===REQUEST_SUCCEEDED_CODE?(formatAppLog("log","at pages/bugu/bugu.vue:271","getBannerList",e.data),e.data.data):(formatAppLog("log","at pages/bugu/bugu.vue:274","getBannerList",e.data),[])}function getHellowText(){let e=new Date;return e.getHours()>=0&&e.getHours()<12?"Good morning":e.getHours()>=12&&e.getHours()<18?"Good afternoon":"Good evening"}function _sfc_render$15(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1);return vue.openBlock(),vue.createElementBlock("view",null,[vue.createVNode(s,{statusBar:"true",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"布咕")])),_:1}),vue.createElementVNode("view",{class:"bugu-page-content"},[vue.createElementVNode("view",{class:"bugu-banner-content"},[vue.createElementVNode("swiper",{class:"bugu-banner","indicator-dots":e.indicatorDots,autoplay:e.autoplay,interval:e.interval,duration:e.duration},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.bannerList,(o=>(vue.openBlock(),vue.createElementBlock("swiper-item",{key:o.id},[vue.createElementVNode("image",{class:"bugu-banner-image",src:o.pic,model:"scaleToFill",onError:t[0]||(t[0]=(...t)=>e.imageError&&e.imageError(...t))},null,40,["src"])])))),128))],8,["indicator-dots","autoplay","interval","duration"])]),vue.createElementVNode("view",{class:"interactive-cards"},[vue.createElementVNode("view",{class:"left-cards"},[vue.createElementVNode("view",{class:"weather-card"},[vue.createElementVNode("view",{class:"hello-text"},[a.weatherResult.city?(vue.openBlock(),vue.createElementBlock("text",{key:0},vue.toDisplayString(`${a.helloText}\n                         ${a.weatherResult?`${a.weatherResult.city} ${a.weatherResult.forecast[0].type} ${a.weatherResult.wendu}℃`:""}`),1)):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"time-now"},vue.toDisplayString(a.timeNow),1),a.weatherResult.ganmao?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"weather-tips"},vue.toDisplayString(a.weatherResult.ganmao),1)):vue.createCommentVNode("",!0),a.weatherIcon?(vue.openBlock(),vue.createElementBlock("image",{key:1,src:`/static/weather/${a.weatherIcon}.png`,model:"scaleToFill",class:"weather-icon"},null,8,["src"])):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"lucky-draw-0",onClick:t[1]||(t[1]=e=>n.onSignCardClick())},[vue.createElementVNode("image",{src:"/static/svgs/Deadline.svg",mode:"aspectFill",class:"draw-icon-left"}),vue.createElementVNode("view",{class:"left-lucky-draw-title-content"},[vue.createElementVNode("view",{class:"lucky-draw-title"}," 签到抽奖 "),vue.createElementVNode("image",{class:"lucky-draw-icon",mode:"aspectFill",src:"/static/svgs/medal.svg"})])])]),vue.createElementVNode("view",{class:"right-cards"},[vue.createElementVNode("view",{class:"lucky-draw-0",onClick:t[2]||(t[2]=e=>n.onBoxCardClick())},[vue.createElementVNode("image",{src:"/static/svgs/Email.svg",mode:"aspectFill",class:"draw-icon-right"}),vue.createElementVNode("view",{class:"right-lucky-draw-title-content"},[vue.createElementVNode("view",{class:"lucky-draw-title"}," 互动盒子 "),vue.createElementVNode("image",{class:"lucky-draw-icon",mode:"aspectFill",src:"/static/svgs/box.svg"})])]),vue.createElementVNode("view",{class:"lucky-draw-1"},[vue.createElementVNode("image",{src:"/static/svgs/Hello.svg",mode:"aspectFill",class:"draw-icon-left"}),vue.createElementVNode("view",{class:"right-lucky-draw-title-content"},[vue.createElementVNode("view",{class:"lucky-draw-title"}," 邀请获奖 "),vue.createElementVNode("image",{class:"lucky-draw-icon",mode:"aspectFill",src:"/static/svgs/invitation.svg"})])])])])])])}var PagesBuguBugu=_export_sfc(_sfc_main$16,[["render",_sfc_render$15]]);const _sfc_main$15={name:"user-message-item",props:{badgeNumber:{type:Number,default:0},avatar:{type:String,required:!0},title:{type:String,required:!0}},computed:{lastTime(){return GettimeifferenceOfNow(this.time).Detailed}},data:()=>({}),methods:{onClick(){this.$emit("onClick")},onMoreClick(){this.$emit("onMoreClick")}}};function _sfc_render$14(e,t,o,i,a,n){const s=vue.resolveComponent("Text"),r=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{class:"user-message-item-content",onClick:t[0]||(t[0]=vue.withModifiers((e=>n.onClick()),["stop"]))},[vue.createElementVNode("view",{class:"avatar-content"},[vue.createElementVNode("image",{mode:"aspectFill",class:"message-avatar",src:o.avatar},null,8,["src"])]),vue.createElementVNode("view",{class:"message-info"},[vue.createElementVNode("view",{class:"message-name"},[vue.createVNode(s,null,{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.title),1)])),_:1})]),vue.createElementVNode("view",{class:"right-info"},[o.badgeNumber>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"message-badge"},[vue.createVNode(s,{class:"badge-text"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.badgeNumber>99?"···":o.badgeNumber),1)])),_:1})])):vue.createCommentVNode("",!0),vue.createVNode(r,{customPrefix:"customicons",type:"right",color:"#a3a3a3",size:"16"})])])])])}var __easycom_3$5=_export_sfc(_sfc_main$15,[["render",_sfc_render$14],["__scopeId","data-v-293d978a"]]);const _sfc_main$14={name:"user-message-item",props:{badgeNumber:{type:Number,default:0},avatar:{type:String,required:!0},title:{type:String,required:!0},note:{type:String,required:!0},time:{type:String,required:!0},needOnlineState:{type:Boolean,default:!1},onLineState:{type:Boolean,default:!1}},computed:{lastTime(){return GettimeifferenceOfNow(this.time).Detailed}},data:()=>({}),emits:["onClick","onMoreClick"],methods:{onClick(){this.$emit("onClick")},onMoreClick(){this.$emit("onMoreClick")}}};function _sfc_render$13(e,t,o,i,a,n){const s=vue.resolveComponent("Text"),r=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{class:"user-message-item-content",onClick:t[1]||(t[1]=vue.withModifiers((e=>n.onClick()),["stop"]))},[vue.createElementVNode("view",{class:"avatar-content"},[vue.createElementVNode("image",{mode:"aspectFill",class:"message-avatar",src:o.avatar},null,8,["src"]),o.needOnlineState?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"online-state-point-content"},[vue.createElementVNode("view",{class:"online-state-point",style:vue.normalizeStyle({backgroundColor:o.onLineState?"#3bd8bf":"#c4c4c4"})},null,4)])):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"message-info"},[vue.createElementVNode("view",{class:"info-upper"},[vue.createElementVNode("view",{class:"message-name"},[vue.createVNode(s,null,{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.title),1)])),_:1})]),vue.createElementVNode("view",{class:"meassage-time"},[vue.createVNode(s,null,{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(n.lastTime),1)])),_:1})]),vue.createElementVNode("view",{class:"meassage-more",onClick:t[0]||(t[0]=vue.withModifiers((e=>n.onMoreClick()),["stop"]))},[vue.createVNode(r,{customPrefix:"customicons",type:"more-filled",color:"#a1a1a1",size:"20"})])]),o.note?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"info-lower"},[vue.createElementVNode("text",{class:"meassage-text"},vue.toDisplayString(o.note.length>15?o.note.slice(0,15)+"...":o.note),1),o.badgeNumber>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"message-badge"},[vue.createVNode(s,{class:"badge-text"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.badgeNumber>99?"···":o.badgeNumber),1)])),_:1})])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)])])])}var __easycom_4$1=_export_sfc(_sfc_main$14,[["render",_sfc_render$13],["__scopeId","data-v-5405f0cc"]]);const _sfc_main$13={data:()=>({tabLabels:[{title:"动态",badge:0},{title:"消息",badge:0}],tabSelect:1,ACTIVITY:ACTIVITY,LIKE:LIKE,COMMENT:COMMENT,scrollInto:"",userMessageList:[],officialNewsList:[],likedUnreadSum:0,commentUnreadSum:0,publishUnreadSum:0,state:store.state,userInfo:{},editArticleItem:{},refresherEnabled:!1,editUserMessageItem:{},editOfficialNewsItem:{},attentionArticles:{data:[],isRefresh:!1,haveMoreData:!0,page:1},contentHeight:0,navHeight:0}),async onLoad(){this.userInfo=await getMyUserInfo(),this.userInfo&&await getOfficalList(this.userInfo.id)},onReady(){let e=this;uni.getSystemInfo({success(t){e.contentHeight=t.windowHeight}}),uni.createSelectorQuery().select("#message-swiper").boundingClientRect((t=>{e.navHeight=t.top})).exec()},async onShow(){if(changeUnreadMessageSum(),this.refreshMessages(this.userInfo),this.userInfo=await getMyUserInfo(),!this.userInfo)return this.tabLabels=[{title:"动态",badge:0},{title:"消息",badge:0}],this.userMessageList=[],void(this.interactiveMessageList={unreadSum:0,data:[]});formatAppLog("log","at pages/message/message.vue:270","this.state.socketStateStore.isConnectSocket",this.state.socketStateStore.isConnectSocket),this.state.socketStateStore.isConnectSocket||connectSocket()},computed:{newMessage(){return this.state.messageStore.newMessage},statusBarHeight:()=>uni.getSystemInfoSync().statusBarHeight+"px",scollerHeight(){return this.contentHeight-this.navHeight}},watch:{newMessage:async function(e){if(formatAppLog("log","at pages/message/message.vue:294","message:",e),e.type===USER_MESSAGE||e.type===WITHDRAW){let e=await getUserMessageList(this.userInfo.id);this.userMessageList=e.reverse()}else if(e.type===INTERACTIVE){let t=await getInteractiveMessageList(this.userInfo.id,e.data.type);e.data.type===LIKE?this.likedUnreadSum=t.unreadSum:e.data.type===COMMENT?this.commentUnreadSum=t.unreadSum:e.data.type===PUBLISH&&(this.tabLabels[0].badge=t.unreadSum)}}},methods:{async refreshMessages(e){let t=await getUserMessageList(e.id);this.userMessageList=t.reverse(),this.likedUnreadSum=(await getInteractiveMessageList(this.userInfo.id,LIKE)).unreadSum,this.commentUnreadSum=(await getInteractiveMessageList(this.userInfo.id,COMMENT)).unreadSum,this.tabLabels[0].badge=(await getInteractiveMessageList(this.userInfo.id,PUBLISH)).unreadSum;let o=await getAndHandOfficialNewsList(e.id);this.officialNewsList=o.reverse()},onTabsClick(e){this.tabSelect=e},async onSwiperChange(e){this.tabSelect=e.detail.current,0==this.tabSelect&&this.tabLabels[0].badge>0&&(changeUnreadMessageSum(-this.tabLabels[0].badge),this.tabLabels[0].badge=0,this.userInfo.id&&interactiveMessageALLRead(this.userInfo.id,PUBLISH))},onSwiperTransition(){this.attentionArticles.isRefresh||(this.refresherEnabled=!1)},onSwiperAnimationfinish(){this.refresherEnabled=!0,0==this.tabSelect&&this.attentionArticles.data.length<1&&this.attentionArticles.haveMoreData&&(this.attentionArticles.isRefresh=!0)},onAttentionIsRefresh(){this.attentionArticles.isRefresh=!0,this.attentionArticles.page=1,this.getAttentionarticles(this.attentionArticles.page)},onAttentionScrolltolower(){this.attentionArticles.haveMoreData&&(this.showBottomLoading=!0,this.attentionArticles.page=this.attentionArticles.page+1,this.getAttentionarticles(this.attentionArticles.page))},onMoreClick(e){this.$refs.articleActionPopup.open(),this.editArticleItem=e},onPopupReportClick(e){uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.id}&objectType=${reportObjectType.activity}`}),this.$refs.articleActionPopup.close()},async onCancelFollow(e){if(!e.publisher)return;let t=this;uni.showModal({title:"取消关注",content:`你确定要取消关注${e.publisher.username}`,success:async function(o){if(o.confirm){if(e.publisher&&await cancelAttention(e.publisher.id)){let o=t.attentionArticles.data;for(let t=0;t<o.length;t++)o[t].publisher&&o[t].publisher.id==e.publisher.id&&(o[t].publisher.isAttention=0);t.attentionArticles.data=o,t.$refs.articleActionPopup.close(),uni.showToast({title:"取消关注",icon:"success"})}}else o.cancel&&formatAppLog("log","at pages/message/message.vue:439","用户点击取消")}})},async onFollow(e){if(!e.publisher)return;let t=this;if(await followUser(e.publisher.id)){let o=t.attentionArticles.data;for(let t=0;t<o.length;t++)o[t].publisher&&o[t].publisher.id==e.publisher.id&&(o[t].publisher.isAttention=1);t.attentionArticles.data=o,t.$refs.articleActionPopup.close(),uni.showToast({title:"关注成功",icon:"success"})}},async onChatClick(e){e.publisher&&uni.navigateTo({url:`/pages/message-secondary-page/chat-content/chat-content?fromUserId=${e.publisher.id}`})},onSearchBarClick(){uni.navigateTo({url:"/pages/message-secondary-page/search-user/search-user"})},onInteractiveMessageClick(e){uni.navigateTo({url:"/pages/message-secondary-page/interactive-message/interactive-message?type="+e})},onUserMessageItemClick(e){uni.navigateTo({url:`/pages/message-secondary-page/chat-content/chat-content?fromUserId=${e.userId}`})},onUserMessageMoreClick(e){this.editUserMessageItem=e,this.$refs.userMessageActionPopup.open()},onUserMessageDeleteClick(e){let t=this;uni.showModal({title:"删除对话",content:`你确定要删除与${e.username}的对话吗？`,success:async function(o){if(o.confirm){if(e){let o=await deleteUserMessageItem(t.userInfo.id,e.userId);t.userMessageList=o}t.$refs.userMessageActionPopup.close()}else o.cancel&&formatAppLog("log","at pages/message/message.vue:532","用户点击取消")}})},onUserMessageReportClick(e){this.$refs.userMessageActionPopup.close(),uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.userId}&objectType=chat`})},onOfficialNewsItemMoreClick(e){this.editOfficialNewsItem=e,this.$refs.officialNewsActionPopup.open()},onOfficialNewsDeleteClick(e){let t=this;uni.showModal({title:"删除对话",content:"你确定要删除这个消息记录吗？",success:async function(o){if(o.confirm){if(e){let o=await deleteOfficalNewsItem(t.userInfo.id,e.type);t.officialNewsList=o}t.$refs.officialNewsActionPopup.close()}else o.cancel&&formatAppLog("log","at pages/message/message.vue:572","用户点击取消")}})},onOfficialNewsItemClick(e){formatAppLog("log","at pages/message/message.vue:582","onOfficialNewsItemClick"),uni.navigateTo({url:`/pages/message-secondary-page/official-news-info/official-news-info?type=${e.type}`})},async getAttentionarticles(e,t=!1){let o=await request({data:{method:"GET",group:"activity",action:"attention",data:{page:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(setTimeout((()=>{this.attentionArticles.isRefresh=!1}),700),this.showBottomLoading=!1,formatAppLog("log","at pages/message/message.vue:614",o.data),o.data.code===REQUEST_SUCCEEDED_CODE){let i=o.data.data.pageSum,a=o.data.data.list;if(1===e)uni.showToast({title:"刷新成功",icon:"none"}),t||this.playRefreshDynamicSound(),this.attentionArticles.data=a,this.scrollInto="",this.attentionArticles.haveMoreData=!(i<=1);else if(e>i)this.attentionArticles.haveMoreData=!1,this.attentionArticles.page=e-1;else{let t=this.attentionArticles.data.concat(a);this.attentionArticles.data=t,this.attentionArticles.haveMoreData=e!=i}a.length<1&&e<i&&(this.attentionArticles.page=e+1,this.getAttentionarticles(this.attentionArticles.page,!0))}},async playRefreshDynamicSound(){let e=uni.getStorageSync(REFRESH_DYNAMIC_SOUND);e||(e=RingingToneList[6]);const t=uni.createInnerAudioContext();t.autoplay=!0,t.src=e.url}}};function _sfc_render$12(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("page-tabs"),__easycom_0$3),r=resolveEasycom(vue.resolveDynamicComponent("activity-item"),__easycom_1$g),l=resolveEasycom(vue.resolveDynamicComponent("uni-load-more"),__easycom_1$f),c=resolveEasycom(vue.resolveDynamicComponent("interactive-message"),__easycom_3$5),u=resolveEasycom(vue.resolveDynamicComponent("user-message-item"),__easycom_4$1),d=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),m=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"message-head",style:vue.normalizeStyle({paddingTop:n.statusBarHeight})},[vue.createVNode(s,{labels:a.tabLabels,index:a.tabSelect,tabPadding:26,activeFontSize:18,defaultFontSize:16,flex:!0,defaultColor:"#7a7a7a",underLineType:"bubble",onChangeIndex:n.onTabsClick},null,8,["labels","index","onChangeIndex"])],4),vue.createElementVNode("swiper",{current:a.tabSelect,style:vue.normalizeStyle({height:n.scollerHeight+"px"}),class:"swiper",id:"message-swiper",onChange:t[5]||(t[5]=(...e)=>n.onSwiperChange&&n.onSwiperChange(...e)),onTransition:t[6]||(t[6]=(...e)=>n.onSwiperTransition&&n.onSwiperTransition(...e)),onAnimationfinish:t[7]||(t[7]=(...e)=>n.onSwiperAnimationfinish&&n.onSwiperAnimationfinish(...e))},[vue.createElementVNode("swiper-item",null,[vue.createElementVNode("scroll-view",{class:"scrollview","scroll-y":"true",style:vue.normalizeStyle({height:n.scollerHeight+"px"}),"refresher-enabled":a.refresherEnabled,"refresher-triggered":a.attentionArticles.isRefresh,"scroll-into-view":a.scrollInto,onRefresherrefresh:t[0]||(t[0]=e=>n.onAttentionIsRefresh()),onScrolltolower:t[1]||(t[1]=e=>n.onAttentionScrolltolower())},[vue.createElementVNode("view",{id:"attention-scrollview-top"}),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.attentionArticles.data,((t,o)=>(vue.openBlock(),vue.createBlock(r,{articleItem:t,isMe:!1,key:t.id,onOnFollowClick:e=>n.onFollow(t),onOnMoreClick:e=>n.onMoreClick(t),onOnClick:o=>e.onActivityItemClick(t)},null,8,["articleItem","onOnFollowClick","onOnMoreClick","onOnClick"])))),128)),a.attentionArticles.data.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"loading-content"},[vue.createVNode(l,{iconType:"circle",status:a.attentionArticles.haveMoreData?e.showBottomLoading?"loading":"more":"noMore",contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}},null,8,["status","contentText"])])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"no-activity"},[vue.createElementVNode("view",{class:"iconfont icon-xingqiu",style:{fontSize:"300rpx"}}),vue.createElementVNode("view",{class:"no-activity-text"},"你还没有关注任何人哦~")]))],44,["refresher-enabled","refresher-triggered","scroll-into-view"])]),vue.createElementVNode("swiper-item",null,[vue.createElementVNode("scroll-view",{class:"scrollview","scroll-y":"true",style:vue.normalizeStyle({height:n.scollerHeight+"px"})},[vue.createElementVNode("view",{class:"search-bar-content"},[vue.createElementVNode("view",{class:"search-bar",onClick:t[2]||(t[2]=e=>n.onSearchBarClick())},[vue.createElementVNode("view",{class:"search-tips"}," 搜索 ")])]),vue.createVNode(c,{avatar:"/static/svgs/message-at.svg",title:"@我的",badgeNumber:0}),vue.createVNode(c,{avatar:"/static/svgs/message-comment.svg",title:"评论",badgeNumber:a.commentUnreadSum,onOnClick:t[3]||(t[3]=e=>n.onInteractiveMessageClick(a.COMMENT))},null,8,["badgeNumber"]),vue.createVNode(c,{avatar:"/static/svgs/message-like.svg",title:"赞",badgeNumber:a.likedUnreadSum,onOnClick:t[4]||(t[4]=e=>n.onInteractiveMessageClick(a.LIKE))},null,8,["badgeNumber"]),a.officialNewsList.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.officialNewsList,(e=>(vue.openBlock(),vue.createBlock(u,{key:e.type,avatar:e.type===a.ACTIVITY?"/static/svgs/official-activities.svg":"/static/svgs/official-communication.svg",title:"布咕通知",badgeNumber:e.unreadSum,note:e.lastText,needOnlineState:!1,time:e.lastTime,onOnClick:t=>n.onOfficialNewsItemClick(e),onOnMoreClick:t=>n.onOfficialNewsItemMoreClick(e)},null,8,["avatar","badgeNumber","note","time","onOnClick","onOnMoreClick"])))),128))])):vue.createCommentVNode("",!0),a.userMessageList.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:1},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.userMessageList,(e=>(vue.openBlock(),vue.createBlock(u,{key:e.userId,avatar:e.avatar,title:e.username,note:1==e.lastMessageType?"[图片]":2==e.lastMessageType?"语音":e.lastMessage,needOnlineState:!0,time:e.lastTime,onLineState:e.online,badgeNumber:e.unreadSum,onOnClick:t=>n.onUserMessageItemClick(e),onOnMoreClick:t=>n.onUserMessageMoreClick(e)},null,8,["avatar","title","note","time","onLineState","badgeNumber","onOnClick","onOnMoreClick"])))),128))])):vue.createCommentVNode("",!0)],4)])],44,["current"]),vue.createVNode(m,{ref:"userMessageActionPopup",needHead:!0,title:"消息选择",needCancelButton:!0},{default:vue.withCtx((()=>[a.editUserMessageItem.userId?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createVNode(d,{onClick:t[8]||(t[8]=e=>n.onUserMessageDeleteClick(a.editUserMessageItem)),icon:"icon-delete",title:"删除对话"}),vue.createVNode(d,{onClick:t[9]||(t[9]=e=>n.onUserMessageReportClick(a.editUserMessageItem)),icon:"icon-alert",title:"举报用户"})],64)):vue.createCommentVNode("",!0)])),_:1},512),vue.createVNode(m,{ref:"officialNewsActionPopup",needHead:!0,title:"消息选择",needCancelButton:!0},{default:vue.withCtx((()=>[a.editOfficialNewsItem.type?(vue.openBlock(),vue.createBlock(d,{key:0,onClick:t[10]||(t[10]=e=>n.onOfficialNewsDeleteClick(a.editOfficialNewsItem)),icon:"icon-delete",title:"删除对话"})):vue.createCommentVNode("",!0)])),_:1},512),vue.createVNode(m,{ref:"articleActionPopup",needHead:!0,title:"动态选择",needCancelButton:!0},{default:vue.withCtx((()=>[a.editArticleItem.id?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[1==a.editArticleItem.publisher.isAttention?(vue.openBlock(),vue.createBlock(d,{key:0,icon:"icon-quxiaoguanzhu",title:"取消关注",onClick:t[11]||(t[11]=e=>n.onCancelFollow(a.editArticleItem))})):(vue.openBlock(),vue.createBlock(d,{key:1,icon:"icon-guanzhu",title:"关注",onClick:t[12]||(t[12]=e=>n.onFollow(a.editArticleItem))})),vue.createVNode(d,{onClick:t[13]||(t[13]=e=>n.onChatClick(a.editArticleItem)),icon:"icon-message",title:"私聊"}),vue.createVNode(d,{onClick:t[14]||(t[14]=e=>n.onPopupReportClick(a.editArticleItem)),icon:"icon-alert",title:"举报"})],64)):vue.createCommentVNode("",!0)])),_:1},512)])}var PagesMessageMessage=_export_sfc(_sfc_main$13,[["render",_sfc_render$12]]);const _sfc_main$12={name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:()=>[0,0]},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{width(){return 8*String(this.text).length+12},classNames(){const{inverted:e,type:t,size:o,absolute:i}=this;return[e?"uni-badge--"+t+"-inverted":"","uni-badge--"+t,"uni-badge--"+o,i?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let e=this.width/2,t=10;this.isDot&&(e=5,t=5);const o=`${-e+this.offset[0]}px`,i=`${-t+this.offset[1]}px`,a={rightTop:{right:o,top:i},rightBottom:{right:o,bottom:i},leftBottom:{left:o,bottom:i},leftTop:{left:o,top:i}},n=a[this.absolute];return n||a.rightTop},badgeWidth(){return{width:`${this.width}px`}},dotStyle(){return this.isDot?{width:"10px",height:"10px",borderRadius:"10px"}:{}},displayValue(){const{isDot:e,text:t,maxNum:o}=this;return e?"":Number(t)>o?`${o}+`:t}},methods:{onClick(){this.$emit("click")}}};function _sfc_render$11(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-badge--x"},[vue.renderSlot(e.$slots,"default",{},void 0,!0),o.text?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:vue.normalizeClass([n.classNames,"uni-badge"]),style:vue.normalizeStyle([n.badgeWidth,n.positionStyle,o.customStyle,n.dotStyle]),onClick:t[0]||(t[0]=e=>n.onClick())},vue.toDisplayString(n.displayValue),7)):vue.createCommentVNode("",!0)])}var __easycom_1$e=_export_sfc(_sfc_main$12,[["render",_sfc_render$11],["__scopeId","data-v-a2cf781e"]]);const _sfc_main$11={name:"user-activity-item",props:{articleItem:{type:Object,required:!0},isMe:{type:Boolean,required:!0},needShowAll:{type:Boolean,default:!1},avatar:{type:String,required:!0},username:{type:String,required:!0}},data:()=>({imageContentStyle:"",numberOfpics:0,maxLength:20,transformTextLength:0,showAll:!0,isLiked:!1,likeSum:0,privateSettingGroup:privateSettingGroup,playVideo:!1,videoContext:{}}),beforeMount(){this.isLiked=this.articleItem.isLiked,this.likeSum=this.articleItem.likeSum,this.initText(),this.initImageTypesetting()},methods:{onClick(){this.$emit("onClick")},onMoreClick(){this.$emit("onMoreClick")},onImageClick(e){uni.previewImage({urls:this.articleItem.pic,current:e})},onVideoClick(){this.playVideo=!0;let e=uni.createVideoContext(`video_${this.articleItem.id}`);e.requestFullScreen({direction:0}),e.play()},onFullscreenChange(e){this.playVideo=e.detail.fullScreen},onLabelItemClick(e){uni.navigateTo({url:`/pages/label-activity/label-activity?labelId=${e.id}&labelContent=${e.content}`})},initText(){let e=this.articleItem.text,t=0,o=e.match(/\n/gi);if(o&&(t=o.length),t<=0)this.transformTextLength=e.length;else if(this.transformTextLength=e.length+19*t,this.transformTextLength>20){let t=e.indexOf("\n"),o=t,i=t,a=e;for(;o<20&&(a=e.slice(i+1),-1!=a.indexOf("\n"));)o=o+20+a.indexOf("\n"),i=i+1+a.indexOf("\n");i<20&&(this.maxLength=i)}formatAppLog("log","at components/user-activity-item/user-activity-item.vue:276",this.maxLength)},initImageTypesetting(){let e=0;this.articleItem.pic.length&&(e=this.articleItem.pic.length),this.imageContentStyle=e<=1?"picture-typesetting-1":2==e||4==e?"picture-typesetting-4":"picture-typesetting-9",this.numberOfpics=e},async onLikeButtonClick(){let e=this.isLiked,t=this.likeSum;if(0==e){this.isLiked=1,this.likeSum=this.likeSum+1,await LikeThisArtice(this.articleItem.id)||(this.isLiked=0,this.likeSum=t)}else{this.isLiked=0,this.likeSum=this.likeSum-1,await CancleLikeArticle(this.articleItem.id)||(this.isLiked=1,this.likeSum=t)}},onShowAllTextClick(){this.showAll=!this.showAll}}};function _sfc_render$10(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{class:"acitivity-content",onClick:t[4]||(t[4]=vue.withModifiers(((...e)=>n.onClick&&n.onClick(...e)),["stop"]))},[vue.createElementVNode("view",{class:"activity-body"},[vue.createElementVNode("view",{class:"activity-body-images"},[vue.createElementVNode("view",{onClick:t[0]||(t[0]=vue.withModifiers((e=>n.onMoreClick()),["stop"])),class:"activity-header"},[vue.createElementVNode("view",{class:"iconfont icon-gengduo-c right-edit-item",style:{fontSize:"25rpx",color:"#ffffff"}}),vue.createElementVNode("view",{class:"mine-acivity-right-edit"},[o.isMe?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"right-edit-item"},vue.toDisplayString(1==o.articleItem.isAnonymity?"咕咕状态":a.privateSettingGroup[o.articleItem.visibility]),1)):vue.createCommentVNode("",!0)])]),1==o.articleItem.video?(vue.openBlock(),vue.createElementBlock("view",{key:0},[o.articleItem.pic.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,onClick:t[2]||(t[2]=vue.withModifiers(((...e)=>n.onVideoClick&&n.onVideoClick(...e)),["stop"])),class:"video-content"},[vue.withDirectives(vue.createElementVNode("video",{class:"video-item",src:o.articleItem.pic[0],id:`video_${o.articleItem.id}`,"initial-time":"0",controls:"",onFullscreenchange:t[1]||(t[1]=(...e)=>n.onFullscreenChange&&n.onFullscreenChange(...e))},null,40,["src","id"]),[[vue.vShow,a.playVideo]]),a.playVideo?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("image",{"lazy-load":!0,mode:"aspectFill",src:o.articleItem.pic[0],class:"image-item"},null,8,["src"]),vue.createElementVNode("view",{class:"play-icon-content"},[vue.createVNode(s,{customPrefix:"customicons",type:"videocam-filled",color:"#c5c5c5dc",size:"60"})])],64))])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),1!=o.articleItem.video?(vue.openBlock(),vue.createElementBlock("view",{key:1},[o.articleItem.pic.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"image-content"},[vue.createElementVNode("image",{"lazy-load":!0,mode:"aspectFill",src:o.articleItem.pic[0],class:"image-item"},null,8,["src"])])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"activity-body-text"},[vue.createElementVNode("text",null,vue.toDisplayString(o.articleItem.text.length<=a.maxLength?o.articleItem.text:o.articleItem.text.slice(0,a.maxLength)+"..."),1)])]),vue.createElementVNode("view",{class:"activity-footer"},[vue.createElementVNode("view",{class:"user-info"},[vue.createElementVNode("view",{class:"avatar-content"},[vue.createElementVNode("image",{class:"avatar",src:o.avatar,mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:"username"},vue.toDisplayString(o.username),1)]),vue.createElementVNode("view",{class:"activity-footer-item activity-footer-like",onClick:t[3]||(t[3]=vue.withModifiers((e=>n.onLikeButtonClick()),["stop"]))},[vue.createElementVNode("view",{class:"iconfont icon-heart-fill",style:{color:"#EA3F48","font-size":"13px"}}),vue.createElementVNode("view",{class:"item-value"},vue.toDisplayString(a.likeSum),1)])])])])}var __easycom_1$d=_export_sfc(_sfc_main$11,[["render",_sfc_render$10],["__scopeId","data-v-be5117fa"]]);const _sfc_main$10={props:["label"],setup(e,t){uni.$emit("getTabLabel",e.label)}};function _sfc_render$$(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:"tab-pane"},[vue.renderSlot(e.$slots,"default",{},void 0,!0)])}var __easycom_2$6=_export_sfc(_sfc_main$10,[["render",_sfc_render$$],["__scopeId","data-v-f3055178"]]);const _sfc_main$$={name:"tabs",props:{index:{type:Number,default:0},tabPadding:{type:Number,default:20},flex:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1}},emits:["changeIndex"],setup(e,t){const o=vue.reactive({tabList:[],tabIndex:e.index?+e.index:0,translateX:-100*+e.index,transition:!1===e.animation?0:.2,scrollId:"tab_0",tabPadding:e.tabPadding?e.tabPadding:20});return uni.$on("getTabLabel",(e=>{o.tabList.push(e),o.timeId&&clearTimeout(o.timeId),o.timeId=setTimeout((()=>{uni.$off("getTabLabel")}),1e3)})),setTimeout((()=>{o.scrollId="tab_"+(e.index-1)}),100),__spreadProps(__spreadValues({},vue.toRefs(o)),{tabChange:e=>{if(o.tabIndex==e)return!1;o.tabIndex=e,o.translateX=-100*o.tabIndex,o.scrollId="tab_"+(e-1),t.emit("changeIndex",e)}})}};function _sfc_render$_(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["tab","tab-scrollY-"+e.scrollY])},[vue.createElementVNode("scroll-view",{class:vue.normalizeClass(["tab-bar","tab-bar-flex-"+o.flex,"tab-bar-borde-bottom"+o.borderBottom]),"scroll-x":"true","scroll-into-view":e.scrollId,"scroll-with-animation":""},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.tabList,((t,a)=>(vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["tab-bar-item",{active:e.tabIndex===a}]),id:`tab_${a}`,style:vue.normalizeStyle({padding:`0 ${o.tabPadding}rpx`}),key:a,onClick:e=>i.tabChange(a)},[vue.createElementVNode("text",{class:"txt"},vue.toDisplayString(t),1)],14,["id","onClick"])))),128))],10,["scroll-into-view"]),vue.createElementVNode("view",{class:"tab-cont",style:vue.normalizeStyle({transform:`translateX(${e.translateX}%)`,transition:`transform ${e.transition}s ease-in-out`})},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],4)],2)}var __easycom_3$4=_export_sfc(_sfc_main$$,[["render",_sfc_render$_],["__scopeId","data-v-0f96699b"]]),cryptoJs={exports:{}},lookup=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,62,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,63,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function base64Decode(e,t){for(var o,i=e.length,a="="===e[i-2]?2:"="===e[i-1]?1:0,n=0,s=i-a&4294967292,r=0;r<s;r+=4)o=lookup[e.charCodeAt(r)]<<18|lookup[e.charCodeAt(r+1)]<<12|lookup[e.charCodeAt(r+2)]<<6|lookup[e.charCodeAt(r+3)],t[n++]=o>>16&255,t[n++]=o>>8&255,t[n++]=255&o;1===a&&(o=lookup[e.charCodeAt(r)]<<10|lookup[e.charCodeAt(r+1)]<<4|lookup[e.charCodeAt(r+2)]>>2,t[n++]=o>>8&255,t[n++]=255&o),2===a&&(o=lookup[e.charCodeAt(r)]<<2|lookup[e.charCodeAt(r+1)]>>4,t[n++]=255&o)}var $inject_window_crypto={getRandomValues(e){if(!(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8ClampedArray))throw new Error("Expected an integer array");if(e.byteLength>65536)throw new Error("Can only request a maximum of 65536 bytes");return base64Decode(uni.requireNativePlugin("DCloud-Crypto").getRandomValues(e.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e}},core={exports:{}},module2,CryptoJS;module2=core,module2.exports=(CryptoJS=CryptoJS||function(t,o){var i;if("undefined"!=typeof window&&$inject_window_crypto&&(i=$inject_window_crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==commonjsGlobal&&commonjsGlobal.crypto&&(i=commonjsGlobal.crypto),!i&&"function"==typeof commonjsRequire)try{i=require("crypto")}catch(f){}var a=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(f){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(f){}}throw new Error("Native crypto module could not be used to get secure random number.")},n=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),s={},r=s.lib={},l=r.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=r.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=o?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,o=e.words,i=this.sigBytes,a=e.sigBytes;if(this.clamp(),i%4)for(var n=0;n<a;n++){var s=o[n>>>2]>>>24-n%4*8&255;t[i+n>>>2]|=s<<24-(i+n)%4*8}else for(var r=0;r<a;r+=4)t[i+r>>>2]=o[r>>>2];return this.sigBytes+=a,this},clamp:function(){var e=this.words,o=this.sigBytes;e[o>>>2]&=4294967295<<32-o%4*8,e.length=t.ceil(o/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],o=0;o<e;o+=4)t.push(a());return new c.init(t,e)}}),u=s.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,i=[],a=0;a<o;a++){var n=t[a>>>2]>>>24-a%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i+=2)o[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new c.init(o,t/2)}},m=u.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,i=[],a=0;a<o;a++){var n=t[a>>>2]>>>24-a%4*8&255;i.push(String.fromCharCode(n))}return i.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i++)o[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new c.init(o,t)}},h=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(m.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return m.parse(unescape(encodeURIComponent(e)))}},p=r.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var o,i=this._data,a=i.words,n=i.sigBytes,s=this.blockSize,r=n/(4*s),l=(r=e?t.ceil(r):t.max((0|r)-this._minBufferSize,0))*s,u=t.min(4*l,n);if(l){for(var d=0;d<l;d+=s)this._doProcessBlock(a,d);o=a.splice(0,l),i.sigBytes-=u}return new c.init(o,u)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=p.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new v.HMAC.init(e,o).finalize(t)}}});var v=s.algo={};return s}(Math),CryptoJS);var x64Core={exports:{}};!function(e,t){e.exports=function(e){return i=(o=e).lib,a=i.Base,n=i.WordArray,(s=o.x64={}).Word=a.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=a.extend({init:function(e,o){e=this.words=e||[],this.sigBytes=o!=t?o:8*e.length},toX32:function(){for(var e=this.words,t=e.length,o=[],i=0;i<t;i++){var a=e[i];o.push(a.high),o.push(a.low)}return n.create(o,this.sigBytes)},clone:function(){for(var e=a.clone.call(this),t=e.words=this.words.slice(0),o=t.length,i=0;i<o;i++)t[i]=t[i].clone();return e}}),e;var t,o,i,a,n,s}(core.exports)}(x64Core);var libTypedarrays={exports:{}};!function(e,t){e.exports=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,o=t.init,i=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],a=0;a<t;a++)i[a>>>2]|=e[a]<<24-a%4*8;o.call(this,i,t)}else o.apply(this,arguments)};i.prototype=t}}(),e.lib.WordArray}(core.exports)}(libTypedarrays);var encUtf16={exports:{}};!function(e,t){e.exports=function(e){return function(){var t=e,o=t.lib.WordArray,i=t.enc;function a(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,o=e.sigBytes,i=[],a=0;a<o;a+=2){var n=t[a>>>2]>>>16-a%4*8&65535;i.push(String.fromCharCode(n))}return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a++)i[a>>>1]|=e.charCodeAt(a)<<16-a%2*16;return o.create(i,2*t)}},i.Utf16LE={stringify:function(e){for(var t=e.words,o=e.sigBytes,i=[],n=0;n<o;n+=2){var s=a(t[n>>>2]>>>16-n%4*8&65535);i.push(String.fromCharCode(s))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>1]|=a(e.charCodeAt(n)<<16-n%2*16);return o.create(i,2*t)}}}(),e.enc.Utf16}(core.exports)}(encUtf16);var encBase64={exports:{}};!function(e,t){e.exports=function(e){return function(){var t=e,o=t.lib.WordArray;function i(e,t,i){for(var a=[],n=0,s=0;s<t;s++)if(s%4){var r=i[e.charCodeAt(s-1)]<<s%4*2|i[e.charCodeAt(s)]>>>6-s%4*2;a[n>>>2]|=r<<24-n%4*8,n++}return o.create(a,n)}t.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,i=this._map;e.clamp();for(var a=[],n=0;n<o;n+=3)for(var s=(t[n>>>2]>>>24-n%4*8&255)<<16|(t[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|t[n+2>>>2]>>>24-(n+2)%4*8&255,r=0;r<4&&n+.75*r<o;r++)a.push(i.charAt(s>>>6*(3-r)&63));var l=i.charAt(64);if(l)for(;a.length%4;)a.push(l);return a.join("")},parse:function(e){var t=e.length,o=this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var n=0;n<o.length;n++)a[o.charCodeAt(n)]=n}var s=o.charAt(64);if(s){var r=e.indexOf(s);-1!==r&&(t=r)}return i(e,t,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64}(core.exports)}(encBase64);var encBase64url={exports:{}};!function(e,t){e.exports=function(e){return function(){var t=e,o=t.lib.WordArray;function i(e,t,i){for(var a=[],n=0,s=0;s<t;s++)if(s%4){var r=i[e.charCodeAt(s-1)]<<s%4*2|i[e.charCodeAt(s)]>>>6-s%4*2;a[n>>>2]|=r<<24-n%4*8,n++}return o.create(a,n)}t.enc.Base64url={stringify:function(e,t=!0){var o=e.words,i=e.sigBytes,a=t?this._safe_map:this._map;e.clamp();for(var n=[],s=0;s<i;s+=3)for(var r=(o[s>>>2]>>>24-s%4*8&255)<<16|(o[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|o[s+2>>>2]>>>24-(s+2)%4*8&255,l=0;l<4&&s+.75*l<i;l++)n.push(a.charAt(r>>>6*(3-l)&63));var c=a.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e,t=!0){var o=e.length,a=t?this._safe_map:this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var s=0;s<a.length;s++)n[a.charCodeAt(s)]=s}var r=a.charAt(64);if(r){var l=e.indexOf(r);-1!==l&&(o=l)}return i(e,o,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url}(core.exports)}(encBase64url);var md5={exports:{}};!function(e,t){e.exports=function(e){return function(t){var o=e,i=o.lib,a=i.WordArray,n=i.Hasher,s=o.algo,r=[];!function(){for(var e=0;e<64;e++)r[e]=4294967296*t.abs(t.sin(e+1))|0}();var l=s.MD5=n.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var i=t+o,a=e[i];e[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var n=this._hash.words,s=e[t+0],l=e[t+1],h=e[t+2],p=e[t+3],v=e[t+4],f=e[t+5],g=e[t+6],y=e[t+7],_=e[t+8],k=e[t+9],w=e[t+10],C=e[t+11],b=e[t+12],E=e[t+13],S=e[t+14],x=e[t+15],N=n[0],B=n[1],I=n[2],A=n[3];N=c(N,B,I,A,s,7,r[0]),A=c(A,N,B,I,l,12,r[1]),I=c(I,A,N,B,h,17,r[2]),B=c(B,I,A,N,p,22,r[3]),N=c(N,B,I,A,v,7,r[4]),A=c(A,N,B,I,f,12,r[5]),I=c(I,A,N,B,g,17,r[6]),B=c(B,I,A,N,y,22,r[7]),N=c(N,B,I,A,_,7,r[8]),A=c(A,N,B,I,k,12,r[9]),I=c(I,A,N,B,w,17,r[10]),B=c(B,I,A,N,C,22,r[11]),N=c(N,B,I,A,b,7,r[12]),A=c(A,N,B,I,E,12,r[13]),I=c(I,A,N,B,S,17,r[14]),N=u(N,B=c(B,I,A,N,x,22,r[15]),I,A,l,5,r[16]),A=u(A,N,B,I,g,9,r[17]),I=u(I,A,N,B,C,14,r[18]),B=u(B,I,A,N,s,20,r[19]),N=u(N,B,I,A,f,5,r[20]),A=u(A,N,B,I,w,9,r[21]),I=u(I,A,N,B,x,14,r[22]),B=u(B,I,A,N,v,20,r[23]),N=u(N,B,I,A,k,5,r[24]),A=u(A,N,B,I,S,9,r[25]),I=u(I,A,N,B,p,14,r[26]),B=u(B,I,A,N,_,20,r[27]),N=u(N,B,I,A,E,5,r[28]),A=u(A,N,B,I,h,9,r[29]),I=u(I,A,N,B,y,14,r[30]),N=d(N,B=u(B,I,A,N,b,20,r[31]),I,A,f,4,r[32]),A=d(A,N,B,I,_,11,r[33]),I=d(I,A,N,B,C,16,r[34]),B=d(B,I,A,N,S,23,r[35]),N=d(N,B,I,A,l,4,r[36]),A=d(A,N,B,I,v,11,r[37]),I=d(I,A,N,B,y,16,r[38]),B=d(B,I,A,N,w,23,r[39]),N=d(N,B,I,A,E,4,r[40]),A=d(A,N,B,I,s,11,r[41]),I=d(I,A,N,B,p,16,r[42]),B=d(B,I,A,N,g,23,r[43]),N=d(N,B,I,A,k,4,r[44]),A=d(A,N,B,I,b,11,r[45]),I=d(I,A,N,B,x,16,r[46]),N=m(N,B=d(B,I,A,N,h,23,r[47]),I,A,s,6,r[48]),A=m(A,N,B,I,y,10,r[49]),I=m(I,A,N,B,S,15,r[50]),B=m(B,I,A,N,f,21,r[51]),N=m(N,B,I,A,b,6,r[52]),A=m(A,N,B,I,p,10,r[53]),I=m(I,A,N,B,w,15,r[54]),B=m(B,I,A,N,l,21,r[55]),N=m(N,B,I,A,_,6,r[56]),A=m(A,N,B,I,x,10,r[57]),I=m(I,A,N,B,g,15,r[58]),B=m(B,I,A,N,E,21,r[59]),N=m(N,B,I,A,v,6,r[60]),A=m(A,N,B,I,C,10,r[61]),I=m(I,A,N,B,h,15,r[62]),B=m(B,I,A,N,k,21,r[63]),n[0]=n[0]+N|0,n[1]=n[1]+B|0,n[2]=n[2]+I|0,n[3]=n[3]+A|0},_doFinalize:function(){var e=this._data,o=e.words,i=8*this._nDataBytes,a=8*e.sigBytes;o[a>>>5]|=128<<24-a%32;var n=t.floor(i/4294967296),s=i;o[15+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),o[14+(a+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(o.length+1),this._process();for(var r=this._hash,l=r.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return r},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,o,i,a,n,s){var r=e+(t&o|~t&i)+a+s;return(r<<n|r>>>32-n)+t}function u(e,t,o,i,a,n,s){var r=e+(t&i|o&~i)+a+s;return(r<<n|r>>>32-n)+t}function d(e,t,o,i,a,n,s){var r=e+(t^o^i)+a+s;return(r<<n|r>>>32-n)+t}function m(e,t,o,i,a,n,s){var r=e+(o^(t|~i))+a+s;return(r<<n|r>>>32-n)+t}o.MD5=n._createHelper(l),o.HmacMD5=n._createHmacHelper(l)}(Math),e.MD5}(core.exports)}(md5);var sha1={exports:{}};!function(e,t){e.exports=function(e){return o=(t=e).lib,i=o.WordArray,a=o.Hasher,n=t.algo,s=[],r=n.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=this._hash.words,i=o[0],a=o[1],n=o[2],r=o[3],l=o[4],c=0;c<80;c++){if(c<16)s[c]=0|e[t+c];else{var u=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=u<<1|u>>>31}var d=(i<<5|i>>>27)+l+s[c];d+=c<20?1518500249+(a&n|~a&r):c<40?1859775393+(a^n^r):c<60?(a&n|a&r|n&r)-1894007588:(a^n^r)-899497514,l=r,r=n,n=a<<30|a>>>2,a=i,i=d}o[0]=o[0]+i|0,o[1]=o[1]+a|0,o[2]=o[2]+n|0,o[3]=o[3]+r|0,o[4]=o[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(o/4294967296),t[15+(i+64>>>9<<4)]=o,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=a._createHelper(r),t.HmacSHA1=a._createHmacHelper(r),e.SHA1;var t,o,i,a,n,s,r}(core.exports)}(sha1);var sha256={exports:{}};!function(e,t){e.exports=function(e){return function(t){var o=e,i=o.lib,a=i.WordArray,n=i.Hasher,s=o.algo,r=[],l=[];!function(){function e(e){for(var o=t.sqrt(e),i=2;i<=o;i++)if(!(e%i))return!1;return!0}function o(e){return 4294967296*(e-(0|e))|0}for(var i=2,a=0;a<64;)e(i)&&(a<8&&(r[a]=o(t.pow(i,.5))),l[a]=o(t.pow(i,1/3)),a++),i++}();var c=[],u=s.SHA256=n.extend({_doReset:function(){this._hash=new a.init(r.slice(0))},_doProcessBlock:function(e,t){for(var o=this._hash.words,i=o[0],a=o[1],n=o[2],s=o[3],r=o[4],u=o[5],d=o[6],m=o[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var p=c[h-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,f=c[h-2],g=(f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10;c[h]=v+c[h-7]+g+c[h-16]}var y=i&a^i&n^a&n,_=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),k=m+((r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25))+(r&u^~r&d)+l[h]+c[h];m=d,d=u,u=r,r=s+k|0,s=n,n=a,a=i,i=k+(_+y)|0}o[0]=o[0]+i|0,o[1]=o[1]+a|0,o[2]=o[2]+n|0,o[3]=o[3]+s|0,o[4]=o[4]+r|0,o[5]=o[5]+u|0,o[6]=o[6]+d|0,o[7]=o[7]+m|0},_doFinalize:function(){var e=this._data,o=e.words,i=8*this._nDataBytes,a=8*e.sigBytes;return o[a>>>5]|=128<<24-a%32,o[14+(a+64>>>9<<4)]=t.floor(i/4294967296),o[15+(a+64>>>9<<4)]=i,e.sigBytes=4*o.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});o.SHA256=n._createHelper(u),o.HmacSHA256=n._createHmacHelper(u)}(Math),e.SHA256}(core.exports)}(sha256);var sha224={exports:{}};!function(e,t){e.exports=function(e){return o=(t=e).lib.WordArray,i=t.algo,a=i.SHA256,n=i.SHA224=a.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=a._createHelper(n),t.HmacSHA224=a._createHmacHelper(n),e.SHA224;var t,o,i,a,n}(core.exports,sha256.exports)}(sha224);var sha512={exports:{}};!function(e,t){e.exports=function(e){return function(){var t=e,o=t.lib.Hasher,i=t.x64,a=i.Word,n=i.WordArray,s=t.algo;function r(){return a.create.apply(a,arguments)}var l=[r(1116352408,3609767458),r(1899447441,602891725),r(3049323471,3964484399),r(3921009573,2173295548),r(961987163,4081628472),r(1508970993,3053834265),r(2453635748,2937671579),r(2870763221,3664609560),r(3624381080,2734883394),r(310598401,1164996542),r(607225278,1323610764),r(1426881987,3590304994),r(1925078388,4068182383),r(2162078206,991336113),r(2614888103,633803317),r(3248222580,3479774868),r(3835390401,2666613458),r(4022224774,944711139),r(264347078,2341262773),r(604807628,2007800933),r(770255983,1495990901),r(1249150122,1856431235),r(1555081692,3175218132),r(1996064986,2198950837),r(2554220882,3999719339),r(2821834349,766784016),r(2952996808,2566594879),r(3210313671,3203337956),r(3336571891,1034457026),r(3584528711,2466948901),r(113926993,3758326383),r(338241895,168717936),r(666307205,1188179964),r(773529912,1546045734),r(1294757372,1522805485),r(1396182291,2643833823),r(1695183700,2343527390),r(1986661051,1014477480),r(2177026350,1206759142),r(2456956037,344077627),r(2730485921,1290863460),r(2820302411,3158454273),r(3259730800,3505952657),r(3345764771,106217008),r(3516065817,3606008344),r(3600352804,1432725776),r(4094571909,1467031594),r(275423344,851169720),r(430227734,3100823752),r(506948616,1363258195),r(659060556,3750685593),r(883997877,3785050280),r(958139571,3318307427),r(1322822218,3812723403),r(1537002063,2003034995),r(1747873779,3602036899),r(1955562222,1575990012),r(2024104815,1125592928),r(2227730452,2716904306),r(2361852424,442776044),r(2428436474,593698344),r(2756734187,3733110249),r(3204031479,2999351573),r(3329325298,3815920427),r(3391569614,3928383900),r(3515267271,566280711),r(3940187606,3454069534),r(4118630271,4000239992),r(116418474,1914138554),r(174292421,2731055270),r(289380356,3203993006),r(460393269,320620315),r(685471733,587496836),r(852142971,1086792851),r(1017036298,365543100),r(1126000580,2618297676),r(1288033470,3409855158),r(1501505948,4234509866),r(1607167915,987167468),r(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=r()}();var u=s.SHA512=o.extend({_doReset:function(){this._hash=new n.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var o=this._hash.words,i=o[0],a=o[1],n=o[2],s=o[3],r=o[4],u=o[5],d=o[6],m=o[7],h=i.high,p=i.low,v=a.high,f=a.low,g=n.high,y=n.low,_=s.high,k=s.low,w=r.high,C=r.low,b=u.high,E=u.low,S=d.high,x=d.low,N=m.high,B=m.low,I=h,A=p,T=v,V=f,D=g,L=y,P=_,M=k,$=w,R=C,F=b,O=E,U=S,H=x,z=N,j=B,q=0;q<80;q++){var G,W,K=c[q];if(q<16)W=K.high=0|e[t+2*q],G=K.low=0|e[t+2*q+1];else{var Q=c[q-15],J=Q.high,Y=Q.low,X=(J>>>1|Y<<31)^(J>>>8|Y<<24)^J>>>7,Z=(Y>>>1|J<<31)^(Y>>>8|J<<24)^(Y>>>7|J<<25),ee=c[q-2],te=ee.high,oe=ee.low,ie=(te>>>19|oe<<13)^(te<<3|oe>>>29)^te>>>6,ae=(oe>>>19|te<<13)^(oe<<3|te>>>29)^(oe>>>6|te<<26),ne=c[q-7],se=ne.high,re=ne.low,le=c[q-16],ce=le.high,ue=le.low;W=(W=(W=X+se+((G=Z+re)>>>0<Z>>>0?1:0))+ie+((G+=ae)>>>0<ae>>>0?1:0))+ce+((G+=ue)>>>0<ue>>>0?1:0),K.high=W,K.low=G}var de,me=$&F^~$&U,he=R&O^~R&H,pe=I&T^I&D^T&D,ve=A&V^A&L^V&L,fe=(I>>>28|A<<4)^(I<<30|A>>>2)^(I<<25|A>>>7),ge=(A>>>28|I<<4)^(A<<30|I>>>2)^(A<<25|I>>>7),ye=($>>>14|R<<18)^($>>>18|R<<14)^($<<23|R>>>9),_e=(R>>>14|$<<18)^(R>>>18|$<<14)^(R<<23|$>>>9),ke=l[q],we=ke.high,Ce=ke.low,be=z+ye+((de=j+_e)>>>0<j>>>0?1:0),Ee=ge+ve;z=U,j=H,U=F,H=O,F=$,O=R,$=P+(be=(be=(be=be+me+((de+=he)>>>0<he>>>0?1:0))+we+((de+=Ce)>>>0<Ce>>>0?1:0))+W+((de+=G)>>>0<G>>>0?1:0))+((R=M+de|0)>>>0<M>>>0?1:0)|0,P=D,M=L,D=T,L=V,T=I,V=A,I=be+(fe+pe+(Ee>>>0<ge>>>0?1:0))+((A=de+Ee|0)>>>0<de>>>0?1:0)|0}p=i.low=p+A,i.high=h+I+(p>>>0<A>>>0?1:0),f=a.low=f+V,a.high=v+T+(f>>>0<V>>>0?1:0),y=n.low=y+L,n.high=g+D+(y>>>0<L>>>0?1:0),k=s.low=k+M,s.high=_+P+(k>>>0<M>>>0?1:0),C=r.low=C+R,r.high=w+$+(C>>>0<R>>>0?1:0),E=u.low=E+O,u.high=b+F+(E>>>0<O>>>0?1:0),x=d.low=x+H,d.high=S+U+(x>>>0<H>>>0?1:0),B=m.low=B+j,m.high=N+z+(B>>>0<j>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(o/4294967296),t[31+(i+128>>>10<<5)]=o,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=o._createHelper(u),t.HmacSHA512=o._createHmacHelper(u)}(),e.SHA512}(core.exports,x64Core.exports)}(sha512);var sha384={exports:{}};!function(e,t){e.exports=function(e){return o=(t=e).x64,i=o.Word,a=o.WordArray,n=t.algo,s=n.SHA512,r=n.SHA384=s.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=s._createHelper(r),t.HmacSHA384=s._createHmacHelper(r),e.SHA384;var t,o,i,a,n,s,r}(core.exports,x64Core.exports,sha512.exports)}(sha384);var sha3={exports:{}};!function(e,t){e.exports=function(e){return function(t){var o=e,i=o.lib,a=i.WordArray,n=i.Hasher,s=o.x64.Word,r=o.algo,l=[],c=[],u=[];!function(){for(var e=1,t=0,o=0;o<24;o++){l[e+5*t]=(o+1)*(o+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,n=0;n<24;n++){for(var r=0,d=0,m=0;m<7;m++){if(1&a){var h=(1<<m)-1;h<32?d^=1<<h:r^=1<<h-32}128&a?a=a<<1^113:a<<=1}u[n]=s.create(r,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=s.create()}();var m=r.SHA3=n.extend({cfg:n.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var o=this._state,i=this.blockSize/2,a=0;a<i;a++){var n=e[t+2*a],s=e[t+2*a+1];n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(B=o[a]).high^=s,B.low^=n}for(var r=0;r<24;r++){for(var m=0;m<5;m++){for(var h=0,p=0,v=0;v<5;v++)h^=(B=o[m+5*v]).high,p^=B.low;var f=d[m];f.high=h,f.low=p}for(m=0;m<5;m++){var g=d[(m+4)%5],y=d[(m+1)%5],_=y.high,k=y.low;for(h=g.high^(_<<1|k>>>31),p=g.low^(k<<1|_>>>31),v=0;v<5;v++)(B=o[m+5*v]).high^=h,B.low^=p}for(var w=1;w<25;w++){var C=(B=o[w]).high,b=B.low,E=l[w];E<32?(h=C<<E|b>>>32-E,p=b<<E|C>>>32-E):(h=b<<E-32|C>>>64-E,p=C<<E-32|b>>>64-E);var S=d[c[w]];S.high=h,S.low=p}var x=d[0],N=o[0];for(x.high=N.high,x.low=N.low,m=0;m<5;m++)for(v=0;v<5;v++){var B=o[w=m+5*v],I=d[w],A=d[(m+1)%5+5*v],T=d[(m+2)%5+5*v];B.high=I.high^~A.high&T.high,B.low=I.low^~A.low&T.low}B=o[0];var V=u[r];B.high^=V.high,B.low^=V.low}},_doFinalize:function(){var e=this._data,o=e.words;this._nDataBytes;var i=8*e.sigBytes,n=32*this.blockSize;o[i>>>5]|=1<<24-i%32,o[(t.ceil((i+1)/n)*n>>>5)-1]|=128,e.sigBytes=4*o.length,this._process();for(var s=this._state,r=this.cfg.outputLength/8,l=r/8,c=[],u=0;u<l;u++){var d=s[u],m=d.high,h=d.low;m=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),c.push(h),c.push(m)}return new a.init(c,r)},clone:function(){for(var e=n.clone.call(this),t=e._state=this._state.slice(0),o=0;o<25;o++)t[o]=t[o].clone();return e}});o.SHA3=n._createHelper(m),o.HmacSHA3=n._createHmacHelper(m)}(Math),e.SHA3}(core.exports,x64Core.exports)}(sha3);var ripemd160={exports:{}};!function(e,t){e.exports=function(e){
/** @preserve
          	(c) 2012 by Cédric Mesnil. All rights reserved.
      
          	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
      
          	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
          	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
      
          	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
          	*/
return function(t){var o=e,i=o.lib,a=i.WordArray,n=i.Hasher,s=o.algo,r=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=a.create([0,1518500249,1859775393,2400959708,2840853838]),m=a.create([1352829926,1548603684,1836072691,2053994217,0]),h=s.RIPEMD160=n.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var i=t+o,a=e[i];e[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var n,s,h,k,w,C,b,E,S,x,N,B=this._hash.words,I=d.words,A=m.words,T=r.words,V=l.words,D=c.words,L=u.words;for(C=n=B[0],b=s=B[1],E=h=B[2],S=k=B[3],x=w=B[4],o=0;o<80;o+=1)N=n+e[t+T[o]]|0,N+=o<16?p(s,h,k)+I[0]:o<32?v(s,h,k)+I[1]:o<48?f(s,h,k)+I[2]:o<64?g(s,h,k)+I[3]:y(s,h,k)+I[4],N=(N=_(N|=0,D[o]))+w|0,n=w,w=k,k=_(h,10),h=s,s=N,N=C+e[t+V[o]]|0,N+=o<16?y(b,E,S)+A[0]:o<32?g(b,E,S)+A[1]:o<48?f(b,E,S)+A[2]:o<64?v(b,E,S)+A[3]:p(b,E,S)+A[4],N=(N=_(N|=0,L[o]))+x|0,C=x,x=S,S=_(E,10),E=b,b=N;N=B[1]+h+S|0,B[1]=B[2]+k+x|0,B[2]=B[3]+w+C|0,B[3]=B[4]+n+b|0,B[4]=B[0]+s+E|0,B[0]=N},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,n=a.words,s=0;s<5;s++){var r=n[s];n[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}return a},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,o){return e^t^o}function v(e,t,o){return e&t|~e&o}function f(e,t,o){return(e|~t)^o}function g(e,t,o){return e&o|t&~o}function y(e,t,o){return e^(t|~o)}function _(e,t){return e<<t|e>>>32-t}o.RIPEMD160=n._createHelper(h),o.HmacRIPEMD160=n._createHmacHelper(h)}(),e.RIPEMD160}(core.exports)}(ripemd160);var hmac={exports:{}};!function(e,t){e.exports=function(e){var t,o,i;o=(t=e).lib.Base,i=t.enc.Utf8,t.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var o=e.blockSize,a=4*o;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),s=this._iKey=t.clone(),r=n.words,l=s.words,c=0;c<o;c++)r[c]^=1549556828,l[c]^=909522486;n.sigBytes=s.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,o=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(o))}})}(core.exports)}(hmac);var pbkdf2={exports:{}};!function(e,t){e.exports=function(e){return o=(t=e).lib,i=o.Base,a=o.WordArray,n=t.algo,s=n.SHA1,r=n.HMAC,l=n.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=this.cfg,i=r.create(o.hasher,e),n=a.create(),s=a.create([1]),l=n.words,c=s.words,u=o.keySize,d=o.iterations;l.length<u;){var m=i.update(t).finalize(s);i.reset();for(var h=m.words,p=h.length,v=m,f=1;f<d;f++){v=i.finalize(v),i.reset();for(var g=v.words,y=0;y<p;y++)h[y]^=g[y]}n.concat(m),c[0]++}return n.sigBytes=4*u,n}}),t.PBKDF2=function(e,t,o){return l.create(o).compute(e,t)},e.PBKDF2;var t,o,i,a,n,s,r,l}(core.exports,sha1.exports,hmac.exports)}(pbkdf2);var evpkdf={exports:{}};!function(e,t){e.exports=function(e){return o=(t=e).lib,i=o.Base,a=o.WordArray,n=t.algo,s=n.MD5,r=n.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o,i=this.cfg,n=i.hasher.create(),s=a.create(),r=s.words,l=i.keySize,c=i.iterations;r.length<l;){o&&n.update(o),o=n.update(e).finalize(t),n.reset();for(var u=1;u<c;u++)o=n.finalize(o),n.reset();s.concat(o)}return s.sigBytes=4*l,s}}),t.EvpKDF=function(e,t,o){return r.create(o).compute(e,t)},e.EvpKDF;var t,o,i,a,n,s,r}(core.exports,sha1.exports,hmac.exports)}(evpkdf);var cipherCore={exports:{}};!function(e,t){e.exports=function(e){e.lib.Cipher||function(t){var o=e,i=o.lib,a=i.Base,n=i.WordArray,s=i.BufferedBlockAlgorithm,r=o.enc;r.Utf8;var l=r.Base64,c=o.algo.EvpKDF,u=i.Cipher=s.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:g}return function(t){return{encrypt:function(o,i,a){return e(i).encrypt(t,o,i,a)},decrypt:function(o,i,a){return e(i).decrypt(t,o,i,a)}}}}()});i.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=o.mode={},m=i.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=d.CBC=function(){var e=m.extend();function o(e,o,i){var a,n=this._iv;n?(a=n,this._iv=t):a=this._prevBlock;for(var s=0;s<i;s++)e[o+s]^=a[s]}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,a=i.blockSize;o.call(this,e,t,a),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+a)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,a=i.blockSize,n=e.slice(t,t+a);i.decryptBlock(e,t),o.call(this,e,t,a),this._prevBlock=n}}),e}(),p=(o.pad={}).Pkcs7={pad:function(e,t){for(var o=4*t,i=o-e.sigBytes%o,a=i<<24|i<<16|i<<8|i,s=[],r=0;r<i;r+=4)s.push(a);var l=n.create(s,i);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};i.BlockCipher=u.extend({cfg:u.cfg.extend({mode:h,padding:p}),reset:function(){var e;u.reset.call(this);var t=this.cfg,o=t.iv,i=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,o&&o.words):(this._mode=e.call(i,this,o&&o.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var v=i.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(o.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,o=e.salt;return(o?n.create([1398893684,1701076831]).concat(o).concat(t):t).toString(l)},parse:function(e){var t,o=l.parse(e),i=o.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=n.create(i.slice(2,4)),i.splice(0,4),o.sigBytes-=16),v.create({ciphertext:o,salt:t})}},g=i.SerializableCipher=a.extend({cfg:a.extend({format:f}),encrypt:function(e,t,o,i){i=this.cfg.extend(i);var a=e.createEncryptor(o,i),n=a.finalize(t),s=a.cfg;return v.create({ciphertext:n,key:o,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,o,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(o,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(o.kdf={}).OpenSSL={execute:function(e,t,o,i){i||(i=n.random(8));var a=c.create({keySize:t+o}).compute(e,i),s=n.create(a.words.slice(t),4*o);return a.sigBytes=4*t,v.create({key:a,iv:s,salt:i})}},_=i.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:y}),encrypt:function(e,t,o,i){var a=(i=this.cfg.extend(i)).kdf.execute(o,e.keySize,e.ivSize);i.iv=a.iv;var n=g.encrypt.call(this,e,t,a.key,i);return n.mixIn(a),n},decrypt:function(e,t,o,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var a=i.kdf.execute(o,e.keySize,e.ivSize,t.salt);return i.iv=a.iv,g.decrypt.call(this,e,t,a.key,i)}})}()}(core.exports,evpkdf.exports)}(cipherCore);var modeCfb={exports:{}};!function(e,t){e.exports=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function o(e,t,o,i){var a,n=this._iv;n?(a=n.slice(0),this._iv=void 0):a=this._prevBlock,i.encryptBlock(a,0);for(var s=0;s<o;s++)e[t+s]^=a[s]}return t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,a=i.blockSize;o.call(this,e,t,a,i),this._prevBlock=e.slice(t,t+a)}}),t.Decryptor=t.extend({processBlock:function(e,t){var i=this._cipher,a=i.blockSize,n=e.slice(t,t+a);o.call(this,e,t,a,i),this._prevBlock=n}}),t}(),e.mode.CFB}(core.exports,cipherCore.exports)}(modeCfb);var modeCtr={exports:{}};!function(e,t){e.exports=function(e){return e.mode.CTR=(t=e.lib.BlockCipherMode.extend(),o=t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,i=o.blockSize,a=this._iv,n=this._counter;a&&(n=this._counter=a.slice(0),this._iv=void 0);var s=n.slice(0);o.encryptBlock(s,0),n[i-1]=n[i-1]+1|0;for(var r=0;r<i;r++)e[t+r]^=s[r]}}),t.Decryptor=o,t),e.mode.CTR;var t,o}(core.exports,cipherCore.exports)}(modeCtr);var modeCtrGladman={exports:{}};!function(e,t){e.exports=function(e){
/** @preserve
       * Counter block mode compatible with  Dr Brian Gladman fileenc.c
       * derived from CryptoJS.mode.CTR
       * Jan Hruby jhruby.web@gmail.com
       */
return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function o(e){if(255==(e>>24&255)){var t=e>>16&255,o=e>>8&255,i=255&e;255===t?(t=0,255===o?(o=0,255===i?i=0:++i):++o):++t,e=0,e+=t<<16,e+=o<<8,e+=i}else e+=1<<24;return e}function i(e){return 0===(e[0]=o(e[0]))&&(e[1]=o(e[1])),e}var a=t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,a=o.blockSize,n=this._iv,s=this._counter;n&&(s=this._counter=n.slice(0),this._iv=void 0),i(s);var r=s.slice(0);o.encryptBlock(r,0);for(var l=0;l<a;l++)e[t+l]^=r[l]}});return t.Decryptor=a,t}(),e.mode.CTRGladman}(core.exports,cipherCore.exports)}(modeCtrGladman);var modeOfb={exports:{}};!function(e,t){e.exports=function(e){return e.mode.OFB=(t=e.lib.BlockCipherMode.extend(),o=t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,i=o.blockSize,a=this._iv,n=this._keystream;a&&(n=this._keystream=a.slice(0),this._iv=void 0),o.encryptBlock(n,0);for(var s=0;s<i;s++)e[t+s]^=n[s]}}),t.Decryptor=o,t),e.mode.OFB;var t,o}(core.exports,cipherCore.exports)}(modeOfb);var modeEcb={exports:{}};!function(e,t){e.exports=function(e){return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB;var t}(core.exports,cipherCore.exports)}(modeEcb);var padAnsix923={exports:{}};!function(e,t){e.exports=function(e){return e.pad.AnsiX923={pad:function(e,t){var o=e.sigBytes,i=4*t,a=i-o%i,n=o+a-1;e.clamp(),e.words[n>>>2]|=a<<24-n%4*8,e.sigBytes+=a},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923}(core.exports,cipherCore.exports)}(padAnsix923);var padIso10126={exports:{}};!function(e,t){e.exports=function(e){return e.pad.Iso10126={pad:function(t,o){var i=4*o,a=i-t.sigBytes%i;t.concat(e.lib.WordArray.random(a-1)).concat(e.lib.WordArray.create([a<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126}(core.exports,cipherCore.exports)}(padIso10126);var padIso97971={exports:{}};!function(e,t){e.exports=function(e){return e.pad.Iso97971={pad:function(t,o){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,o)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971}(core.exports,cipherCore.exports)}(padIso97971);var padZeropadding={exports:{}};!function(e,t){e.exports=function(e){return e.pad.ZeroPadding={pad:function(e,t){var o=4*t;e.clamp(),e.sigBytes+=o-(e.sigBytes%o||o)},unpad:function(e){var t=e.words,o=e.sigBytes-1;for(o=e.sigBytes-1;o>=0;o--)if(t[o>>>2]>>>24-o%4*8&255){e.sigBytes=o+1;break}}},e.pad.ZeroPadding}(core.exports,cipherCore.exports)}(padZeropadding);var padNopadding={exports:{}};!function(e,t){e.exports=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding}(core.exports,cipherCore.exports)}(padNopadding);var formatHex={exports:{}};!function(e,t){e.exports=function(e){return o=(t=e).lib.CipherParams,i=t.enc.Hex,t.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return o.create({ciphertext:t})}},e.format.Hex;var t,o,i}(core.exports,cipherCore.exports)}(formatHex);var aes$1={exports:{}};!function(e,t){e.exports=function(e){return function(){var t=e,o=t.lib.BlockCipher,i=t.algo,a=[],n=[],s=[],r=[],l=[],c=[],u=[],d=[],m=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var o=0,i=0;for(t=0;t<256;t++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,a[o]=p,n[p]=o;var v=e[o],f=e[v],g=e[f],y=257*e[p]^16843008*p;s[o]=y<<24|y>>>8,r[o]=y<<16|y>>>16,l[o]=y<<8|y>>>24,c[o]=y,y=16843009*g^65537*f^257*v^16843008*o,u[p]=y<<24|y>>>8,d[p]=y<<16|y>>>16,m[p]=y<<8|y>>>24,h[p]=y,o?(o=v^e[e[e[g^v]]],i^=e[e[i]]):o=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=o.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,o=e.sigBytes/4,i=4*((this._nRounds=o+6)+1),n=this._keySchedule=[],s=0;s<i;s++)s<o?n[s]=t[s]:(c=n[s-1],s%o?o>6&&s%o==4&&(c=a[c>>>24]<<24|a[c>>>16&255]<<16|a[c>>>8&255]<<8|a[255&c]):(c=a[(c=c<<8|c>>>24)>>>24]<<24|a[c>>>16&255]<<16|a[c>>>8&255]<<8|a[255&c],c^=p[s/o|0]<<24),n[s]=n[s-o]^c);for(var r=this._invKeySchedule=[],l=0;l<i;l++){if(s=i-l,l%4)var c=n[s];else c=n[s-4];r[l]=l<4||s<=4?c:u[a[c>>>24]]^d[a[c>>>16&255]]^m[a[c>>>8&255]]^h[a[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,r,l,c,a)},decryptBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,u,d,m,h,n),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,i,a,n,s,r){for(var l=this._nRounds,c=e[t]^o[0],u=e[t+1]^o[1],d=e[t+2]^o[2],m=e[t+3]^o[3],h=4,p=1;p<l;p++){var v=i[c>>>24]^a[u>>>16&255]^n[d>>>8&255]^s[255&m]^o[h++],f=i[u>>>24]^a[d>>>16&255]^n[m>>>8&255]^s[255&c]^o[h++],g=i[d>>>24]^a[m>>>16&255]^n[c>>>8&255]^s[255&u]^o[h++],y=i[m>>>24]^a[c>>>16&255]^n[u>>>8&255]^s[255&d]^o[h++];c=v,u=f,d=g,m=y}v=(r[c>>>24]<<24|r[u>>>16&255]<<16|r[d>>>8&255]<<8|r[255&m])^o[h++],f=(r[u>>>24]<<24|r[d>>>16&255]<<16|r[m>>>8&255]<<8|r[255&c])^o[h++],g=(r[d>>>24]<<24|r[m>>>16&255]<<16|r[c>>>8&255]<<8|r[255&u])^o[h++],y=(r[m>>>24]<<24|r[c>>>16&255]<<16|r[u>>>8&255]<<8|r[255&d])^o[h++],e[t]=v,e[t+1]=f,e[t+2]=g,e[t+3]=y},keySize:8});t.AES=o._createHelper(v)}(),e.AES}(core.exports,encBase64.exports,md5.exports,evpkdf.exports,cipherCore.exports)}(aes$1);var tripledes={exports:{}};!function(e,t){e.exports=function(e){return function(){var t=e,o=t.lib,i=o.WordArray,a=o.BlockCipher,n=t.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],r=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=n.DES=a.extend({_doReset:function(){for(var e=this._key.words,t=[],o=0;o<56;o++){var i=s[o]-1;t[o]=e[i>>>5]>>>31-i%32&1}for(var a=this._subKeys=[],n=0;n<16;n++){var c=a[n]=[],u=l[n];for(o=0;o<24;o++)c[o/6|0]|=t[(r[o]-1+u)%28]<<31-o%6,c[4+(o/6|0)]|=t[28+(r[o+24]-1+u)%28]<<31-o%6;for(c[0]=c[0]<<1|c[0]>>>31,o=1;o<7;o++)c[o]=c[o]>>>4*(o-1)+3;c[7]=c[7]<<5|c[7]>>>27}var d=this._invSubKeys=[];for(o=0;o<16;o++)d[o]=a[15-o]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,o){this._lBlock=e[t],this._rBlock=e[t+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var i=0;i<16;i++){for(var a=o[i],n=this._lBlock,s=this._rBlock,r=0,l=0;l<8;l++)r|=c[l][((s^a[l])&u[l])>>>0];this._lBlock=s,this._rBlock=n^r}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function m(e,t){var o=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=o,this._lBlock^=o<<e}function h(e,t){var o=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=o,this._rBlock^=o<<e}t.DES=a._createHelper(d);var p=n.TripleDES=a.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),o=e.length<4?e.slice(0,2):e.slice(2,4),a=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(i.create(t)),this._des2=d.createEncryptor(i.create(o)),this._des3=d.createEncryptor(i.create(a))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=a._createHelper(p)}(),e.TripleDES}(core.exports,encBase64.exports,md5.exports,evpkdf.exports,cipherCore.exports)}(tripledes);var rc4={exports:{}};!function(e,t){e.exports=function(e){return function(){var t=e,o=t.lib.StreamCipher,i=t.algo,a=i.RC4=o.extend({_doReset:function(){for(var e=this._key,t=e.words,o=e.sigBytes,i=this._S=[],a=0;a<256;a++)i[a]=a;a=0;for(var n=0;a<256;a++){var s=a%o,r=t[s>>>2]>>>24-s%4*8&255;n=(n+i[a]+r)%256;var l=i[a];i[a]=i[n],i[n]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=n.call(this)},keySize:8,ivSize:0});function n(){for(var e=this._S,t=this._i,o=this._j,i=0,a=0;a<4;a++){o=(o+e[t=(t+1)%256])%256;var n=e[t];e[t]=e[o],e[o]=n,i|=e[(e[t]+e[o])%256]<<24-8*a}return this._i=t,this._j=o,i}t.RC4=o._createHelper(a);var s=i.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)n.call(this)}});t.RC4Drop=o._createHelper(s)}(),e.RC4}(core.exports,encBase64.exports,md5.exports,evpkdf.exports,cipherCore.exports)}(rc4);var rabbit={exports:{}};!function(e,t){e.exports=function(e){return function(){var t=e,o=t.lib.StreamCipher,i=t.algo,a=[],n=[],s=[],r=i.Rabbit=o.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,o=0;o<4;o++)e[o]=16711935&(e[o]<<8|e[o]>>>24)|4278255360&(e[o]<<24|e[o]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,o=0;o<4;o++)l.call(this);for(o=0;o<8;o++)a[o]^=i[o+4&7];if(t){var n=t.words,s=n[0],r=n[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),d=c>>>16|4294901760&u,m=u<<16|65535&c;for(a[0]^=c,a[1]^=d,a[2]^=u,a[3]^=m,a[4]^=c,a[5]^=d,a[6]^=u,a[7]^=m,o=0;o<4;o++)l.call(this)}},_doProcessBlock:function(e,t){var o=this._X;l.call(this),a[0]=o[0]^o[5]>>>16^o[3]<<16,a[1]=o[2]^o[7]>>>16^o[5]<<16,a[2]=o[4]^o[1]>>>16^o[7]<<16,a[3]=o[6]^o[3]>>>16^o[1]<<16;for(var i=0;i<4;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),e[t+i]^=a[i]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,o=0;o<8;o++)n[o]=t[o];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<n[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<n[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<n[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<n[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<n[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<n[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<n[6]>>>0?1:0)|0,this._b=t[7]>>>0<n[7]>>>0?1:0,o=0;o<8;o++){var i=e[o]+t[o],a=65535&i,r=i>>>16,l=((a*a>>>17)+a*r>>>15)+r*r,c=((4294901760&i)*i|0)+((65535&i)*i|0);s[o]=l^c}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=o._createHelper(r)}(),e.Rabbit}(core.exports,encBase64.exports,md5.exports,evpkdf.exports,cipherCore.exports)}(rabbit);var rabbitLegacy={exports:{}};!function(e,t){e.exports=function(e){return function(){var t=e,o=t.lib.StreamCipher,i=t.algo,a=[],n=[],s=[],r=i.RabbitLegacy=o.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)l.call(this);for(a=0;a<8;a++)i[a]^=o[a+4&7];if(t){var n=t.words,s=n[0],r=n[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),d=c>>>16|4294901760&u,m=u<<16|65535&c;for(i[0]^=c,i[1]^=d,i[2]^=u,i[3]^=m,i[4]^=c,i[5]^=d,i[6]^=u,i[7]^=m,a=0;a<4;a++)l.call(this)}},_doProcessBlock:function(e,t){var o=this._X;l.call(this),a[0]=o[0]^o[5]>>>16^o[3]<<16,a[1]=o[2]^o[7]>>>16^o[5]<<16,a[2]=o[4]^o[1]>>>16^o[7]<<16,a[3]=o[6]^o[3]>>>16^o[1]<<16;for(var i=0;i<4;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),e[t+i]^=a[i]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,o=0;o<8;o++)n[o]=t[o];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<n[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<n[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<n[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<n[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<n[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<n[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<n[6]>>>0?1:0)|0,this._b=t[7]>>>0<n[7]>>>0?1:0,o=0;o<8;o++){var i=e[o]+t[o],a=65535&i,r=i>>>16,l=((a*a>>>17)+a*r>>>15)+r*r,c=((4294901760&i)*i|0)+((65535&i)*i|0);s[o]=l^c}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=o._createHelper(r)}(),e.RabbitLegacy}(core.exports,encBase64.exports,md5.exports,evpkdf.exports,cipherCore.exports)}(rabbitLegacy),function(e,t){e.exports=function(e){return e}(core.exports,x64Core.exports,libTypedarrays.exports,encUtf16.exports,encBase64.exports,encBase64url.exports,md5.exports,sha1.exports,sha256.exports,sha224.exports,sha512.exports,sha384.exports,sha3.exports,ripemd160.exports,hmac.exports,pbkdf2.exports,evpkdf.exports,cipherCore.exports,modeCfb.exports,modeCtr.exports,modeCtrGladman.exports,modeOfb.exports,modeEcb.exports,padAnsix923.exports,padIso10126.exports,padIso97971.exports,padZeropadding.exports,padNopadding.exports,formatHex.exports,aes$1.exports,tripledes.exports,rc4.exports,rabbit.exports,rabbitLegacy.exports)}(cryptoJs);let aesPrivateKey="f0HtUct3NPlDVuIW";function aesEncrypt(e){var t=cryptoJs.exports.enc.Utf8.parse(aesPrivateKey),o=cryptoJs.exports.enc.Utf8.parse(e);return cryptoJs.exports.AES.encrypt(o,t,{mode:cryptoJs.exports.mode.ECB,padding:cryptoJs.exports.pad.Iso10126}).toString()}function aesDecrypt(e){var t=cryptoJs.exports.enc.Utf8.parse(aesPrivateKey),o=cryptoJs.exports.AES.decrypt(e,t,{mode:cryptoJs.exports.mode.ECB,padding:cryptoJs.exports.pad.Iso10126});return cryptoJs.exports.enc.Utf8.stringify(o).toString()}function json_parse(e){return(e=(e=(e=e.replace(e.split("}")[e.split("}").length-1],"")).replace(/[\r\n]/g,"")).replace(/\ufeff/g,"")).replace(" ","")||(e="{}"),JSON.parse(e)}const aes={encrypt:aesEncrypt,decrypt:aesDecrypt,json_parse:json_parse},_sfc_main$_={data:()=>({privateSettingGroup:privateSettingGroup,privateSelected:privateSettingGroup[0],isRefresh:!1,userInfo:{},myArticles:[],articlesPage:1,haveMoreArtices:!0,editArticleItem:{},numberChange:{followedNumber:0,fansNumber:0,viewsNumber:0},lastClickTime:0}),async onLoad(){this.refreshUserInfo()},async onShow(){changeUnreadMessageSum();let e=this;uni.$once(REFRESH_USERINFO,(function(t){t.needRefresh&&e.refreshUserInfo()}))},methods:{onNavigateTo(e){formatAppLog("log","at pages/mine/mine.vue:259",e),uni.navigateTo({url:e})},async refreshUserInfo(){this.userInfo=await getMyUserInfo(),this.userInfo?(this.initNumberChange(this.userInfo),this.getMyArticle(this.userInfo.id,this.articlesPage)):(uni.showModal({title:"未登录",content:"未登录请先登录",success:function(e){e.confirm&&uni.navigateTo({url:"/pages/login/login"})}}),this.myArticles=[],this.articlesPage=1)},async initNumberChange(e){let t=getFollowedNumberChangedKey(e.id),o=getFansNumberChangedKey(e.id),i=getViewsNumberChangedKey(e.id),a=uni.getStorageSync(t),n=uni.getStorageSync(o),s=uni.getStorageSync(i);a||(a=0),n||(n=0),s||(s=0);let r=await getUserinfo(e.id);r&&(this.userInfo=r,a=r.attentionSum-e.attentionSum+a,n=r.beAttentionSum-e.beAttentionSum+n,s=r.visitorSum-e.visitorSum+s,uni.setStorage({key:USER_INFO,data:r}),uni.setStorage({key:t,data:a>0?a:0}),uni.setStorage({key:o,data:n>0?n:0}),uni.setStorage({key:i,data:s>0?s:0}),this.numberChange={followedNumber:a,fansNumber:n,viewsNumber:s})},onSettingButtonClick(){uni.navigateTo({url:"/pages/setting/setting"})},onBackgroundClick(){let e=Date.now();if(!(e-this.lastClickTime>1e3))return;if(this.lastClickTime=e,this.userInfo||uni.showToast({title:"请先登录",icon:"none"}),!this.userInfo.vip||this.userInfo.vip.remainDays<1)return void uni.showToast({title:"只有vip用户可以更换背景哦~",icon:"none"});let t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var o=e.tempFilePaths;t.changeBackgroud(o[0])}})},onFollowedNumberClick(){this.userInfo&&(uni.navigateTo({url:"/pages/mine-secondary-page/follow-list/follow-list"}),this.numberChange.followedNumber=0)},onFansNumberClick(){this.userInfo&&(uni.navigateTo({url:"/pages/mine-secondary-page/fan-list/fan-list"}),this.numberChange.fansNumber=0)},onVisitorNumberClick(){this.userInfo&&(uni.navigateTo({url:"/pages/mine-secondary-page/visitor-list/visitor-list"}),this.numberChange.viewsNumber=0)},async onRefresh(){this.isRefresh=!0,this.initNumberChange(this.userInfo),this.getMyArticle(this.userInfo.id,this.articlesPage)},async onPrivaterAdioChange(e){this.privateSelected=e.detail.value;let t=this.privateSettingGroup.indexOf(this.privateSelected);if(this.editArticleItem.id){uni.showLoading({title:"权限修改中"});let e=await this.ChangeVisibility(this.editArticleItem.id,t);if(uni.hideLoading(),e){let e=this.myArticles;for(let o=0;o<e.length;o++)if(e[o].id==this.editArticleItem.id){e[o].visibility=t;break}this.myArticles=e,uni.showToast({title:"可见性修改成功！"}),this.$refs.articleActionPopup.close()}else this.privateSelected=this.privateSettingGroup[this.editArticleItem.visibility]}},onActivityDeleteButtonClick(){if(this.editArticleItem.id){let e=this;uni.showModal({title:"删除动态",content:"你确定要删除这个动态吗",confirmText:"确定",cancelText:"取消",success:async function(t){if(t.confirm){uni.showLoading({title:"权限修改中"});let t=await deleteMyArticle(e.editArticleItem.id);if(uni.hideLoading(),t){let t=e.myArticles;for(let o=0;o<t.length;o++)if(t[o].id==e.editArticleItem.id){t.splice(o,1);break}e.myArticles=t,uni.showToast({title:"删除成功！"}),e.$refs.articleActionPopup.close()}}}})}},onActivityItemClick(e){uni.navigateTo({url:`/pages/activity-info/activity-info?activityId=${e.id}`})},onActivityItemMoreClick(e){this.editArticleItem=e,this.privateSelected=this.privateSettingGroup[e.visibility],this.$refs.articleActionPopup.open()},onScrolltolower(){this.haveMoreArtices&&(this.articlesPage=this.articlesPage+1,this.getMyArticle(this.userInfo.id,this.articlesPage))},async getMyArticle(e,t){let o=await request({data:{method:"GET",group:"user",action:`${e}/activity`,data:{userId:e,page:t},header:{"content-type":"application/x-www-form-urlencoded"}}});if(setTimeout((()=>{this.isRefresh=!1}),700),o.data.code===REQUEST_SUCCEEDED_CODE){let e=o.data.data,i=o.data.data.list;t<=e.pageSum?(this.myArticles=1==t?i:this.myArticles.concat(i),t==e.pageSum?this.haveMoreArtices=!1:this.haveMoreArtices=!0):(this.articlesPage=this.articlesPage-1,this.haveMoreArtices=!1)}else formatAppLog("log","at pages/mine/mine.vue:550",o)},async ChangeVisibility(e,t){let o=await request({data:{method:"POST",group:"activity",action:`${e}/visibility/change`,data:{id:e,visibility:t},header:{"content-type":"application/x-www-form-urlencoded"}}});return o.data.code===REQUEST_SUCCEEDED_CODE||(formatAppLog("log","at pages/mine/mine.vue:577",o),!1)},async changeBackgroud(e){uni.showLoading({title:"正在发布"});let t=await request({data:{method:"GET",group:"user",action:"background/token",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){let o=t.data.data.fileName,i=t.data.data.token,a=this;uni.uploadFile({url:UploadUrl,filePath:e,name:"file",formData:{key:o,token:aes.decrypt(i)},async success(e){formatAppLog("log","at pages/mine/mine.vue:617","fileRes",e),(await request({data:{method:"POST",group:"user",action:"background/update",data:{background:o},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE&&(uni.showToast({title:"更换背景成功"}),a.isRefresh=!0)}})}else uni.showToast({title:"没有权限，请先登录",icon:"none"})}}};function _sfc_render$Z(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h),r=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),l=resolveEasycom(vue.resolveDynamicComponent("uni-badge"),__easycom_1$e),c=resolveEasycom(vue.resolveDynamicComponent("user-activity-item"),__easycom_1$d),u=resolveEasycom(vue.resolveDynamicComponent("custom-tab-pane"),__easycom_2$6),d=resolveEasycom(vue.resolveDynamicComponent("custom-tabs"),__easycom_3$4),m=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(r,{class:"upper-head",fixed:"true",border:!1,backgroundColor:"#ffffff00",color:"#808080",statusBar:"true",onClickLeft:t[1]||(t[1]=t=>e.onNarLeftClick())},{default:vue.withCtx((()=>[a.userInfo.id?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"username-title"},vue.toDisplayString(a.userInfo.username),1)):vue.createCommentVNode("",!0),vue.createElementVNode("view",{onClick:t[0]||(t[0]=(...e)=>n.onSettingButtonClick&&n.onSettingButtonClick(...e)),class:"nav-left-content",slot:"left",style:{"font-size":"18px"}},[vue.createElementVNode("view",null,[vue.createVNode(s,{customPrefix:"customicons",type:"settings-filled",color:"#fdfdfd",size:"25"})])])])),_:1}),vue.createElementVNode("scroll-view",{class:"mine-scrollview","scroll-y":!0,onScrolltolower:t[9]||(t[9]=e=>n.onScrolltolower())},[vue.createElementVNode("view",{class:"mine-upper-half",onClick:t[8]||(t[8]=(...e)=>n.onBackgroundClick&&n.onBackgroundClick(...e)),style:vue.normalizeStyle({backgroundImage:a.userInfo.background?`url(${a.userInfo.background})`:"linear-gradient(to bottom, #e7d3aa, #61c5ae);"})},[a.userInfo.id?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"user-info-content",onClick:t[7]||(t[7]=vue.withModifiers((()=>{}),["stop"]))},[vue.createElementVNode("view",{class:"upper-user-info"},[vue.createElementVNode("view",{class:"user-info-left"},[vue.createElementVNode("view",{class:"upper-user-avater",onClick:t[2]||(t[2]=vue.withModifiers((e=>n.onNavigateTo("/pages/setting/personal_information/personal_information")),["stop"]))},[a.userInfo.avatar?(vue.openBlock(),vue.createElementBlock("image",{key:0,class:"user-avater-image",src:a.userInfo.avatar,mode:"aspectFill"},null,8,["src"])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"vip-logo"},[vue.createElementVNode("image",{src:a.userInfo.vip&&a.userInfo.vip.remainDays>0?"../../static/svgs/vip-logo.svg":"../../static/svgs/no-vip-logo.svg",mode:"aspectFill",style:{width:"25px",height:"25px"}},null,8,["src"])])])]),vue.createElementVNode("view",{class:"user-info-right"},[vue.createElementVNode("view",{class:"upper-tags-group"},[vue.createElementVNode("view",{class:"upper-tag",onClick:t[3]||(t[3]=vue.withModifiers(((...e)=>n.onFollowedNumberClick&&n.onFollowedNumberClick(...e)),["stop"]))},[vue.createElementVNode("view",{class:"tag-value"},[vue.createTextVNode(vue.toDisplayString(a.userInfo.attentionSum)+" ",1),a.numberChange.followedNumber>0?(vue.openBlock(),vue.createBlock(l,{key:0,text:a.numberChange.followedNumber,type:"error",size:"small","max-num":99,class:"tag-badge"},null,8,["text"])):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"tag-type"}," 关注 ")]),vue.createElementVNode("view",{class:"dividing-line"}),vue.createElementVNode("view",{class:"upper-tag",onClick:t[4]||(t[4]=vue.withModifiers(((...e)=>n.onFansNumberClick&&n.onFansNumberClick(...e)),["stop"]))},[vue.createElementVNode("view",{class:"tag-value"},[vue.createTextVNode(vue.toDisplayString(a.userInfo.beAttentionSum)+" ",1),a.numberChange.fansNumber>0?(vue.openBlock(),vue.createBlock(l,{key:0,text:a.numberChange.fansNumber,type:"error",size:"small","max-num":99,class:"tag-badge"},null,8,["text"])):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"tag-type"}," 粉丝 ")]),vue.createElementVNode("view",{class:"dividing-line"}),vue.createElementVNode("view",{class:"upper-tag",onClick:t[5]||(t[5]=vue.withModifiers(((...e)=>n.onVisitorNumberClick&&n.onVisitorNumberClick(...e)),["stop"]))},[vue.createElementVNode("view",{class:"tag-value"},[vue.createTextVNode(vue.toDisplayString(a.userInfo.visitorSum)+" ",1),a.numberChange.viewsNumber>0?(vue.openBlock(),vue.createBlock(l,{key:0,text:a.numberChange.viewsNumber,type:"error",size:"small","max-num":99,class:"tag-badge"},null,8,["text"])):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"tag-type"}," 访客 ")])]),vue.createElementVNode("view",{class:"button-content"},[vue.createElementVNode("view",{class:"edit-button",onClick:t[6]||(t[6]=vue.withModifiers((e=>n.onNavigateTo("/pages/setting/personal_information/personal_information")),["stop"]))}," 编辑信息 ")])])]),vue.createElementVNode("view",{class:"upper-user-ignature"}," BE Ur self ")])):vue.createCommentVNode("",!0)],4),vue.createElementVNode("view",{class:"mine-lower-half"},[vue.createVNode(d,{index:"0",animation:!0,tabPadding:"80",flex:!0},{default:vue.withCtx((()=>[vue.createVNode(u,{label:"动态"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"lower-my-aciticities"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.myArticles,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,class:"activity-item"},[vue.createVNode(c,{articleItem:e,isMe:!0,avatar:a.userInfo.avatar,username:a.userInfo.username,onOnClick:t=>n.onActivityItemClick(e),onOnMoreClick:t=>n.onActivityItemMoreClick(e)},null,8,["articleItem","avatar","username","onOnClick","onOnMoreClick"])])))),128))])])),_:1}),vue.createVNode(u,{label:"赞过"})])),_:1})])],32),vue.createVNode(m,{ref:"articleActionPopup",needHead:!0,title:"动态设置"},{default:vue.withCtx((()=>[a.editArticleItem.id?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("radio-group",{onChange:t[10]||(t[10]=(...e)=>n.onPrivaterAdioChange&&n.onPrivaterAdioChange(...e)),class:"private-select-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.privateSettingGroup,((e,t)=>(vue.openBlock(),vue.createElementBlock("label",{class:"private-select-item",key:e},[vue.createElementVNode("view",{class:"private-text"},vue.toDisplayString(e),1),vue.createElementVNode("view",{class:"private-radio"},[vue.createElementVNode("radio",{color:"#4eccb8",value:e,checked:e===a.privateSelected},null,8,["value","checked"])])])))),128))],32),vue.createElementVNode("view",{onClick:t[11]||(t[11]=(...e)=>n.onActivityDeleteButtonClick&&n.onActivityDeleteButtonClick(...e)),class:"article-action-delete"},"删除")],64)):vue.createCommentVNode("",!0)])),_:1},512)])}var PagesMineMine=_export_sfc(_sfc_main$_,[["render",_sfc_render$Z]]);const isArray=Array.isArray,isObject=e=>null!==e&&"object"==typeof e,defaultDelimiters=["{","}"];class BaseFormatter{constructor(){this._caches=Object.create(null)}interpolate(e,t,o=defaultDelimiters){if(!t)return[e];let i=this._caches[e];return i||(i=parse(e,o),this._caches[e]=i),compile(i,t)}}const RE_TOKEN_LIST_VALUE=/^(?:\d)+/,RE_TOKEN_NAMED_VALUE=/^(?:\w)+/;function parse(e,[t,o]){const i=[];let a=0,n="";for(;a<e.length;){let s=e[a++];if(s===t){n&&i.push({type:"text",value:n}),n="";let t="";for(s=e[a++];void 0!==s&&s!==o;)t+=s,s=e[a++];const r=s===o,l=RE_TOKEN_LIST_VALUE.test(t)?"list":r&&RE_TOKEN_NAMED_VALUE.test(t)?"named":"unknown";i.push({value:t,type:l})}else n+=s}return n&&i.push({type:"text",value:n}),i}function compile(e,t){const o=[];let i=0;const a=isArray(t)?"list":isObject(t)?"named":"unknown";if("unknown"===a)return o;for(;i<e.length;){const n=e[i];switch(n.type){case"text":o.push(n.value);break;case"list":o.push(t[parseInt(n.value,10)]);break;case"named":"named"===a&&o.push(t[n.value])}i++}return o}const LOCALE_ZH_HANS="zh-Hans",LOCALE_ZH_HANT="zh-Hant",LOCALE_EN="en",LOCALE_FR="fr",LOCALE_ES="es",hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty.call(e,t),defaultFormatter=new BaseFormatter;function include(e,t){return!!t.find((t=>-1!==e.indexOf(t)))}function startsWith(e,t){return t.find((t=>0===e.indexOf(t)))}function normalizeLocale(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return LOCALE_ZH_HANS;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?LOCALE_ZH_HANS:e.indexOf("-hant")>-1||include(e,["-tw","-hk","-mo","-cht"])?LOCALE_ZH_HANT:LOCALE_ZH_HANS;const o=startsWith(e,[LOCALE_EN,LOCALE_FR,LOCALE_ES]);return o||void 0}class I18n{constructor({locale:e,fallbackLocale:t,messages:o,watcher:i,formater:a}){this.locale=LOCALE_EN,this.fallbackLocale=LOCALE_EN,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=a||defaultFormatter,this.messages=o||{},this.setLocale(e||LOCALE_EN),i&&this.watchLocale(i)}setLocale(e){const t=this.locale;this.locale=normalizeLocale(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,o=!0){const i=this.messages[e];i?o?Object.assign(i,t):Object.keys(t).forEach((e=>{hasOwn(i,e)||(i[e]=t[e])})):this.messages[e]=t}f(e,t,o){return this.formater.interpolate(e,t,o).join("")}t(e,t,o){let i=this.message;return"string"==typeof t?(t=normalizeLocale(t,this.messages))&&(i=this.messages[t]):o=t,hasOwn(i,e)?this.formater.interpolate(i[e],o).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}function watchAppLocale(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}function getDefaultLocale(){return"undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():LOCALE_EN}function initVueI18n(e,t={},o,i){"string"!=typeof e&&([e,t]=[t,e]),"string"!=typeof e&&(e=getDefaultLocale()),"string"!=typeof o&&(o="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||LOCALE_EN);const a=new I18n({locale:e,fallbackLocale:o,messages:t,watcher:i});let n=(e,t)=>{if("function"!=typeof getApp)n=function(e,t){return a.t(e,t)};else{let e=!1;n=function(t,o){const i=getApp().$vm;return i&&(i.$locale,e||(e=!0,watchAppLocale(i,a))),a.t(t,o)}}return n(e,t)};return{i18n:a,f:(e,t,o)=>a.f(e,t,o),t:(e,t)=>n(e,t),add:(e,t,o=!0)=>a.add(e,t,o),watch:e=>a.watchLocale(e),getLocale:()=>a.getLocale(),setLocale:e=>a.setLocale(e)}}function t$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t,o){return e(o={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&o.path)}},o.exports),o.exports}var s=n((function(e,t){var o;e.exports=(o=o||function(e,t){var o=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),i={},a=i.lib={},n=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=a.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,o=e.words,i=this.sigBytes,a=e.sigBytes;if(this.clamp(),i%4)for(var n=0;n<a;n++){var s=o[n>>>2]>>>24-n%4*8&255;t[i+n>>>2]|=s<<24-(i+n)%4*8}else for(n=0;n<a;n+=4)t[i+n>>>2]=o[n>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o,i=[],a=function(t){t=t;var o=987654321,i=4294967295;return function(){var a=((o=36969*(65535&o)+(o>>16)&i)<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i;return a/=4294967296,(a+=.5)*(e.random()>.5?1:-1)}},n=0;n<t;n+=4){var r=a(4294967296*(o||e.random()));o=987654071*r(),i.push(4294967296*r()|0)}return new s.init(i,t)}}),r=i.enc={},l=r.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,i=[],a=0;a<o;a++){var n=t[a>>>2]>>>24-a%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i+=2)o[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(o,t/2)}},c=r.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,i=[],a=0;a<o;a++){var n=t[a>>>2]>>>24-a%4*8&255;i.push(String.fromCharCode(n))}return i.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i++)o[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(o,t)}},u=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,i=o.words,a=o.sigBytes,n=this.blockSize,r=a/(4*n),l=(r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0))*n,c=e.min(4*l,a);if(l){for(var u=0;u<l;u+=n)this._doProcessBlock(i,u);var d=i.splice(0,l);o.sigBytes-=c}return new s.init(d,c)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=d.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new m.HMAC.init(e,o).finalize(t)}}});var m=i.algo={};return i}(Math),o)})),r=(n((function(e,t){var o;e.exports=(o=s,function(e){var t=o,i=t.lib,a=i.WordArray,n=i.Hasher,s=t.algo,r=[];!function(){for(var t=0;t<64;t++)r[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=s.MD5=n.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var i=t+o,a=e[i];e[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var n=this._hash.words,s=e[t+0],l=e[t+1],h=e[t+2],p=e[t+3],v=e[t+4],f=e[t+5],g=e[t+6],y=e[t+7],_=e[t+8],k=e[t+9],w=e[t+10],C=e[t+11],b=e[t+12],E=e[t+13],S=e[t+14],x=e[t+15],N=n[0],B=n[1],I=n[2],A=n[3];N=c(N,B,I,A,s,7,r[0]),A=c(A,N,B,I,l,12,r[1]),I=c(I,A,N,B,h,17,r[2]),B=c(B,I,A,N,p,22,r[3]),N=c(N,B,I,A,v,7,r[4]),A=c(A,N,B,I,f,12,r[5]),I=c(I,A,N,B,g,17,r[6]),B=c(B,I,A,N,y,22,r[7]),N=c(N,B,I,A,_,7,r[8]),A=c(A,N,B,I,k,12,r[9]),I=c(I,A,N,B,w,17,r[10]),B=c(B,I,A,N,C,22,r[11]),N=c(N,B,I,A,b,7,r[12]),A=c(A,N,B,I,E,12,r[13]),I=c(I,A,N,B,S,17,r[14]),N=u(N,B=c(B,I,A,N,x,22,r[15]),I,A,l,5,r[16]),A=u(A,N,B,I,g,9,r[17]),I=u(I,A,N,B,C,14,r[18]),B=u(B,I,A,N,s,20,r[19]),N=u(N,B,I,A,f,5,r[20]),A=u(A,N,B,I,w,9,r[21]),I=u(I,A,N,B,x,14,r[22]),B=u(B,I,A,N,v,20,r[23]),N=u(N,B,I,A,k,5,r[24]),A=u(A,N,B,I,S,9,r[25]),I=u(I,A,N,B,p,14,r[26]),B=u(B,I,A,N,_,20,r[27]),N=u(N,B,I,A,E,5,r[28]),A=u(A,N,B,I,h,9,r[29]),I=u(I,A,N,B,y,14,r[30]),N=d(N,B=u(B,I,A,N,b,20,r[31]),I,A,f,4,r[32]),A=d(A,N,B,I,_,11,r[33]),I=d(I,A,N,B,C,16,r[34]),B=d(B,I,A,N,S,23,r[35]),N=d(N,B,I,A,l,4,r[36]),A=d(A,N,B,I,v,11,r[37]),I=d(I,A,N,B,y,16,r[38]),B=d(B,I,A,N,w,23,r[39]),N=d(N,B,I,A,E,4,r[40]),A=d(A,N,B,I,s,11,r[41]),I=d(I,A,N,B,p,16,r[42]),B=d(B,I,A,N,g,23,r[43]),N=d(N,B,I,A,k,4,r[44]),A=d(A,N,B,I,b,11,r[45]),I=d(I,A,N,B,x,16,r[46]),N=m(N,B=d(B,I,A,N,h,23,r[47]),I,A,s,6,r[48]),A=m(A,N,B,I,y,10,r[49]),I=m(I,A,N,B,S,15,r[50]),B=m(B,I,A,N,f,21,r[51]),N=m(N,B,I,A,b,6,r[52]),A=m(A,N,B,I,p,10,r[53]),I=m(I,A,N,B,w,15,r[54]),B=m(B,I,A,N,l,21,r[55]),N=m(N,B,I,A,_,6,r[56]),A=m(A,N,B,I,x,10,r[57]),I=m(I,A,N,B,g,15,r[58]),B=m(B,I,A,N,E,21,r[59]),N=m(N,B,I,A,v,6,r[60]),A=m(A,N,B,I,C,10,r[61]),I=m(I,A,N,B,h,15,r[62]),B=m(B,I,A,N,k,21,r[63]),n[0]=n[0]+N|0,n[1]=n[1]+B|0,n[2]=n[2]+I|0,n[3]=n[3]+A|0},_doFinalize:function(){var t=this._data,o=t.words,i=8*this._nDataBytes,a=8*t.sigBytes;o[a>>>5]|=128<<24-a%32;var n=e.floor(i/4294967296),s=i;o[15+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),o[14+(a+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(o.length+1),this._process();for(var r=this._hash,l=r.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return r},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,o,i,a,n,s){var r=e+(t&o|~t&i)+a+s;return(r<<n|r>>>32-n)+t}function u(e,t,o,i,a,n,s){var r=e+(t&i|o&~i)+a+s;return(r<<n|r>>>32-n)+t}function d(e,t,o,i,a,n,s){var r=e+(t^o^i)+a+s;return(r<<n|r>>>32-n)+t}function m(e,t,o,i,a,n,s){var r=e+(o^(t|~i))+a+s;return(r<<n|r>>>32-n)+t}t.MD5=n._createHelper(l),t.HmacMD5=n._createHmacHelper(l)}(Math),o.MD5)})),n((function(e,t){var o,i,a;e.exports=(i=(o=s).lib.Base,a=o.enc.Utf8,void(o.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var o=e.blockSize,i=4*o;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),s=this._iKey=t.clone(),r=n.words,l=s.words,c=0;c<o;c++)r[c]^=1549556828,l[c]^=909522486;n.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,o=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(o))}})))})),n((function(e,t){e.exports=s.HmacMD5})));function o(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function i(e){return"object"===o(e)}class a extends Error{constructor(e,t){super(e),this.code=t}}function c(e){return e&&"string"==typeof e?JSON.parse(e):e}const u=!1,h="app";c({}.UNICLOUD_DEBUG);const d=c("[]");let p="";try{p="__UNI__E8C0685"}catch(e){}let g={};function m(e,t={}){var o,i;return o=g,i=e,Object.prototype.hasOwnProperty.call(o,i)||(g[e]=t),g[e]}const y=["invoke","success","fail","complete"],_=m("_globalUniCloudInterceptor");function w(e,t){_[e]||(_[e]={}),i(t)&&Object.keys(t).forEach((o=>{y.indexOf(o)>-1&&function(e,t,o){let i=_[e][t];i||(i=_[e][t]=[]),-1===i.indexOf(o)&&"function"==typeof o&&i.push(o)}(e,o,t[o])}))}function k(e,t){_[e]||(_[e]={}),i(t)?Object.keys(t).forEach((o=>{y.indexOf(o)>-1&&function(e,t,o){const i=_[e][t];if(!i)return;const a=i.indexOf(o);a>-1&&i.splice(a,1)}(e,o,t[o])})):delete _[e]}function v(e,t){return e&&0!==e.length?e.reduce(((e,o)=>e.then((()=>o(t)))),Promise.resolve()):Promise.resolve()}function S(e,t){return _[e]&&_[e][t]||[]}function T(e,t){return t?function(o){const i="callFunction"===t&&"DCloud-clientDB"===(o&&o.name);let a;a=this.isReady?Promise.resolve():this.initUniCloud,o=o||{};const n=a.then((()=>i?Promise.resolve():v(S(t,"invoke"),o))).then((()=>e.call(this,o))).then((e=>i?Promise.resolve(e):v(S(t,"success"),e).then((()=>v(S(t,"complete"),e))).then((()=>Promise.resolve(e)))),(e=>i?Promise.reject(e):v(S(t,"fail"),e).then((()=>v(S(t,"complete"),e))).then((()=>Promise.reject(e)))));if(!(o.success||o.fail||o.complete))return n;n.then((e=>{o.success&&o.success(e),o.complete&&o.complete(e)}),(e=>{o.fail&&o.fail(e),o.complete&&o.complete(e)}))}:function(t){if(!((t=t||{}).success||t.fail||t.complete))return e.call(this,t);e.call(this,t).then((e=>{t.success&&t.success(e),t.complete&&t.complete(e)}),(e=>{t.fail&&t.fail(e),t.complete&&t.complete(e)}))}}class A extends Error{constructor(e){super(e.message),this.errMsg=e.message||"",Object.defineProperties(this,{code:{get:()=>e.code},requestId:{get:()=>e.requestId},message:{get(){return this.errMsg},set(e){this.errMsg=e}}})}}let P;function I(){const e=uni.getLocale&&uni.getLocale()||"en";if(P)return __spreadProps(__spreadValues({},P),{LOCALE:e});const{deviceId:t,platform:o}=uni.getSystemInfoSync();return P={PLATFORM:h,OS:o,APPID:p,DEVICEID:t,CLIENT_SDK_VERSION:"1.0.21"},__spreadProps(__spreadValues({},P),{LOCALE:e})}var b={sign:function(e,t){let o="";return Object.keys(e).sort().forEach((function(t){e[t]&&(o=o+"&"+t+"="+e[t])})),o=o.slice(1),r(o,t).toString()},wrappedRequest:function(e,t){return new Promise(((o,i)=>{t(Object.assign(e,{complete(e){e||(e={});const t=e.data&&e.data.header&&e.data.header["x-serverless-request-id"]||e.header&&e.header["request-id"];if(!e.statusCode||e.statusCode>=400)return i(new A({code:"SYS_ERR",message:e.errMsg||"request:fail",requestId:t}));const a=e.data;if(a.error)return i(new A({code:a.error.code,message:a.error.message,requestId:t}));a.result=a.data,a.requestId=t,delete a.data,o(a)}}))}))}},E={request:e=>uni.request(e),uploadFile:e=>uni.uploadFile(e),setStorageSync:(e,t)=>uni.setStorageSync(e,t),getStorageSync:e=>uni.getStorageSync(e),removeStorageSync:e=>uni.removeStorageSync(e),clearStorageSync:()=>uni.clearStorageSync()},O={"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"};const{t:C}=initVueI18n({"zh-Hans":{"uniCloud.init.paramRequired":"缺少参数：{param}","uniCloud.uploadFile.fileError":"filePath应为File对象"},"zh-Hant":{"uniCloud.init.paramRequired":"缺少参数：{param}","uniCloud.uploadFile.fileError":"filePath应为File对象"},en:O,fr:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},es:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},ja:O},"zh-Hans");var U=class{constructor(e){["spaceId","clientSecret"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(C("uniCloud.init.paramRequired",{param:t}))})),this.config=Object.assign({},{endpoint:"https://api.bspapp.com"},e),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=E,this._getAccessTokenPromise=null,this._getAccessTokenPromiseStatus=null}get hasAccessToken(){return!!this.accessToken}setAccessToken(e){this.accessToken=e}requestWrapped(e){return b.wrappedRequest(e,this.adapter.request)}requestAuth(e){return this.requestWrapped(e)}request(e,t){return Promise.resolve().then((()=>this.hasAccessToken?t?this.requestWrapped(e):this.requestWrapped(e).catch((t=>new Promise(((e,o)=>{!t||"GATEWAY_INVALID_TOKEN"!==t.code&&"InvalidParameter.InvalidToken"!==t.code?o(t):e()})).then((()=>this.getAccessToken())).then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)})))):this.getAccessToken().then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)}))))}rebuildRequest(e){const t=Object.assign({},e);return t.data.token=this.accessToken,t.header["x-basement-token"]=this.accessToken,t.header["x-serverless-sign"]=b.sign(t.data,this.config.clientSecret),t}setupRequest(e,t){const o=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};return"auth"!==t&&(o.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=b.sign(o,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:o,dataType:"json",header:i}}getAccessToken(){return"pending"===this._getAccessTokenPromiseStatus||(this._getAccessTokenPromiseStatus="pending",this._getAccessTokenPromise=this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then((e=>new Promise(((t,o)=>{e.result&&e.result.accessToken?(this.setAccessToken(e.result.accessToken),this._getAccessTokenPromiseStatus="fulfilled",t(this.accessToken)):(this._getAccessTokenPromiseStatus="rejected",o(new A({code:"AUTH_FAILED",message:"获取accessToken失败"})))}))),(e=>(this._getAccessTokenPromiseStatus="rejected",Promise.reject(e))))),this._getAccessTokenPromise}authorize(){this.getAccessToken()}callFunction(e){const t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request(this.setupRequest(t))}getOSSUploadOptionsFromPath(e){const t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}uploadFileToOSS({url:e,formData:t,name:o,filePath:i,fileType:a,onUploadProgress:n}){return new Promise(((s,r)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:o,filePath:i,fileType:a,header:{"X-OSS-server-side-encrpytion":"AES256"},success(e){e&&e.statusCode<400?s(e):r(new A({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){r(new A({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof n&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{n({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}reportOSSUpload(e){const t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}uploadFile({filePath:e,cloudPath:t,fileType:i="image",onUploadProgress:a,config:n}){if("string"!==o(t))throw new A({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new A({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new A({code:"INVALID_PARAM",message:"cloudPath不合法"});const s=n&&n.envType||this.config.envType;let r,l;return this.getOSSUploadOptionsFromPath({env:s,filename:t}).then((t=>{const o=t.result;r=o.id,l="https://"+o.cdnDomain+"/"+o.ossPath;const n={url:"https://"+o.host,formData:{"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:o.accessKeyId,Signature:o.signature,host:o.host,id:r,key:o.ossPath,policy:o.policy,success_action_status:200},fileName:"file",name:"file",filePath:e,fileType:i};return this.uploadFileToOSS(Object.assign({},n,{onUploadProgress:a}))})).then((()=>this.reportOSSUpload({id:r}))).then((t=>new Promise(((o,i)=>{t.success?o({success:!0,filePath:e,fileID:l}):i(new A({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))))}deleteFile({fileList:e}){const t={method:"serverless.file.resource.delete",params:JSON.stringify({id:e[0]})};return this.request(this.setupRequest(t))}getTempFileURL({fileList:e}={}){return new Promise(((t,o)=>{Array.isArray(e)&&0!==e.length||o(new A({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"})),t({fileList:e.map((e=>({fileID:e,tempFileURL:e})))})}))}},x={init(e){const t=new U(e),o={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return o},t.customAuth=t.auth,t}};const D="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:";var R,e;e=R||(R={}),e.local="local",e.none="none",e.session="session";var q=function(){};const L=()=>{let e;if(!Promise){e=()=>{},e.promise={};const t=()=>{throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}const t=new Promise(((t,o)=>{e=(e,i)=>e?o(e):t(i)}));return e.promise=t,e};function F(e){return void 0===e}function N(e){return"[object Null]"===Object.prototype.toString.call(e)}var $;function M(e){const t=(o=e,"[object Array]"===Object.prototype.toString.call(o)?e:[e]);var o;for(const i of t){const{isMatch:e,genAdapter:t,runtime:o}=i;if(e())return{adapter:t(),runtime:o}}}!function(e){e.WEB="web",e.WX_MP="wx_mp"}($||($={}));const j={adapter:null,runtime:void 0},B=["anonymousUuidKey"];class K extends q{constructor(){super(),j.adapter.root.tcbObject||(j.adapter.root.tcbObject={})}setItem(e,t){j.adapter.root.tcbObject[e]=t}getItem(e){return j.adapter.root.tcbObject[e]}removeItem(e){delete j.adapter.root.tcbObject[e]}clear(){delete j.adapter.root.tcbObject}}function H(e,t){switch(e){case"local":return t.localStorage||new K;case"none":return new K;default:return t.sessionStorage||new K}}class W{constructor(e){if(!this._storage){this._persistence=j.adapter.primaryStorage||e.persistence,this._storage=H(this._persistence,j.adapter);const t=`access_token_${e.env}`,o=`access_token_expire_${e.env}`,i=`refresh_token_${e.env}`,a=`anonymous_uuid_${e.env}`,n=`login_type_${e.env}`,s=`user_info_${e.env}`;this.keys={accessTokenKey:t,accessTokenExpireKey:o,refreshTokenKey:i,anonymousUuidKey:a,loginTypeKey:n,userInfoKey:s}}}updatePersistence(e){if(e===this._persistence)return;const t="local"===this._persistence;this._persistence=e;const o=H(e,j.adapter);for(const i in this.keys){const e=this.keys[i];if(t&&B.includes(i))continue;const a=this._storage.getItem(e);F(a)||N(a)||(o.setItem(e,a),this._storage.removeItem(e))}this._storage=o}setStore(e,t,o){if(!this._storage)return;const i={version:o||"localCachev1",content:t},a=JSON.stringify(i);try{this._storage.setItem(e,a)}catch(n){throw n}}getStore(e,t){try{if(!this._storage)return}catch(i){return""}t=t||"localCachev1";const o=this._storage.getItem(e);return o&&o.indexOf(t)>=0?JSON.parse(o).content:""}removeStore(e){this._storage.removeItem(e)}}const z={},J={};function V(e){return z[e]}class Y{constructor(e,t){this.data=t||null,this.name=e}}class X extends Y{constructor(e,t){super("error",{error:e,data:t}),this.error=e}}const G=new class{constructor(){this._listeners={}}on(e,t){return o=e,i=t,(a=this._listeners)[o]=a[o]||[],a[o].push(i),this;var o,i,a}off(e,t){return function(e,t,o){if(o&&o[e]){const i=o[e].indexOf(t);-1!==i&&o[e].splice(i,1)}}(e,t,this._listeners),this}fire(e,t){if(e instanceof X)return console.error(e.error),this;const o="string"==typeof e?new Y(e,t||{}):e,i=o.name;if(this._listens(i)){o.target=this;const e=this._listeners[i]?[...this._listeners[i]]:[];for(const t of e)t.call(this,o)}return this}_listens(e){return this._listeners[e]&&this._listeners[e].length>0}};function Q(e,t){G.on(e,t)}function Z(e,t={}){G.fire(e,t)}function ee(e,t){G.off(e,t)}const te="loginStateChanged",ne="loginStateExpire",se="loginTypeChanged",re="anonymousConverted",oe="refreshAccessToken";var ie;!function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.NULL="NULL"}(ie||(ie={}));const ae=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],ce={"X-SDK-Version":"1.3.5"};function ue(e,t,o){const i=e[t];e[t]=function(t){const a={},n={};o.forEach((o=>{const{data:i,headers:s}=o.call(e,t);Object.assign(a,i),Object.assign(n,s)}));const s=t.data;return s&&(()=>{var e;if(e=s,"[object FormData]"!==Object.prototype.toString.call(e))t.data=__spreadValues(__spreadValues({},s),a);else for(const t in a)s.append(t,a[t])})(),t.headers=__spreadValues(__spreadValues({},t.headers||{}),n),i.call(e,t)}}function he(){const e=Math.random().toString(16).slice(2);return{data:{seqId:e},headers:__spreadProps(__spreadValues({},ce),{"x-seqid":e})}}class le{constructor(e={}){var t;this.config=e,this._reqClass=new j.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`请求在${this.config.timeout/1e3}s内未完成，已中断`,restrictedMethods:["post"]}),this._cache=V(this.config.env),this._localCache=(t=this.config.env,J[t]),ue(this._reqClass,"post",[he]),ue(this._reqClass,"upload",[he]),ue(this._reqClass,"download",[he])}async post(e){return await this._reqClass.post(e)}async upload(e){return await this._reqClass.upload(e)}async download(e){return await this._reqClass.download(e)}async refreshAccessToken(){let e,t;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=await this._refreshAccessTokenPromise}catch(o){t=o}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,t)throw t;return e}async _refreshAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:o,loginTypeKey:i,anonymousUuidKey:a}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(t);let n=this._cache.getStore(o);if(!n)throw new Error("未登录CloudBase");const s={refresh_token:n},r=await this.request("auth.fetchAccessTokenWithRefreshToken",s);if(r.data.code){const{code:e}=r.data;if("SIGN_PARAM_INVALID"===e||"REFRESH_TOKEN_EXPIRED"===e||"INVALID_REFRESH_TOKEN"===e){if(this._cache.getStore(i)===ie.ANONYMOUS&&"INVALID_REFRESH_TOKEN"===e){const e=this._cache.getStore(a),t=this._cache.getStore(o),i=await this.send("auth.signInAnonymously",{anonymous_uuid:e,refresh_token:t});return this.setRefreshToken(i.refresh_token),this._refreshAccessToken()}Z(ne),this._cache.removeStore(o)}throw new Error(`刷新access token失败：${r.data.code}`)}if(r.data.access_token)return Z(oe),this._cache.setStore(e,r.data.access_token),this._cache.setStore(t,r.data.access_token_expire+Date.now()),{accessToken:r.data.access_token,accessTokenExpire:r.data.access_token_expire};r.data.refresh_token&&(this._cache.removeStore(o),this._cache.setStore(o,r.data.refresh_token),this._refreshAccessToken())}async getAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:o}=this._cache.keys;if(!this._cache.getStore(o))throw new Error("refresh token不存在，登录状态异常");let i=this._cache.getStore(e),a=this._cache.getStore(t),n=!0;return this._shouldRefreshAccessTokenHook&&!(await this._shouldRefreshAccessTokenHook(i,a))&&(n=!1),(!i||!a||a<Date.now())&&n?this.refreshAccessToken():{accessToken:i,accessTokenExpire:a}}async request(e,t,o){const i=`x-tcb-trace_${this.config.env}`;let a="application/x-www-form-urlencoded";const n=__spreadValues({action:e,env:this.config.env,dataVersion:"2019-08-16"},t);if(-1===ae.indexOf(e)){const{refreshTokenKey:e}=this._cache.keys;this._cache.getStore(e)&&(n.access_token=(await this.getAccessToken()).accessToken)}let s;if("storage.uploadFile"===e){s=new FormData;for(let e in s)s.hasOwnProperty(e)&&void 0!==s[e]&&s.append(e,n[e]);a="multipart/form-data"}else{a="application/json",s={};for(let e in n)void 0!==n[e]&&(s[e]=n[e])}let r={headers:{"content-type":a}};o&&o.onUploadProgress&&(r.onUploadProgress=o.onUploadProgress);const l=this._localCache.getStore(i);l&&(r.headers["X-TCB-Trace"]=l);const{parse:c,inQuery:u,search:d}=t;let m={env:this.config.env};c&&(m.parse=!0),u&&(m=__spreadValues(__spreadValues({},u),m));let h=function(e,t,o={}){const i=/\?/.test(t);let a="";for(let n in o)""===a?!i&&(t+="?"):a+="&",a+=`${n}=${encodeURIComponent(o[n])}`;return/^http(s)?\:\/\//.test(t+=a)?t:`${e}${t}`}(D,"//tcb-api.tencentcloudapi.com/web",m);d&&(h+=d);const p=await this.post(__spreadValues({url:h,data:s},r)),v=p.header&&p.header["x-tcb-trace"];if(v&&this._localCache.setStore(i,v),200!==Number(p.status)&&200!==Number(p.statusCode)||!p.data)throw new Error("network request error");return p}async send(e,t={}){const o=await this.request(e,t,{onUploadProgress:t.onUploadProgress});if("ACCESS_TOKEN_EXPIRED"===o.data.code&&-1===ae.indexOf(e)){await this.refreshAccessToken();const o=await this.request(e,t,{onUploadProgress:t.onUploadProgress});if(o.data.code)throw new Error(`[${o.data.code}] ${o.data.message}`);return o.data}if(o.data.code)throw new Error(`[${o.data.code}] ${o.data.message}`);return o.data}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:o,refreshTokenKey:i}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(o),this._cache.setStore(i,e)}}const de={};function fe(e){return de[e]}class pe{constructor(e){this.config=e,this._cache=V(e.env),this._request=fe(e.env)}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:o,refreshTokenKey:i}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(o),this._cache.setStore(i,e)}setAccessToken(e,t){const{accessTokenKey:o,accessTokenExpireKey:i}=this._cache.keys;this._cache.setStore(o,e),this._cache.setStore(i,t)}async refreshUserInfo(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e)}}class ge{constructor(e){if(!e)throw new Error("envId is not defined");this._envId=e,this._cache=V(this._envId),this._request=fe(this._envId),this.setUserInfo()}linkWithTicket(e){if("string"!=typeof e)throw new Error("ticket must be string");return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if("string"!=typeof e)throw new Error("username must be a string");return this._request.send("auth.updateUsername",{username:e})}async getLinkedUidList(){const{data:e}=await this._request.send("auth.getLinkedUidList",{});let t=!1;const{users:o}=e;return o.forEach((e=>{e.wxOpenId&&e.wxPublicId&&(t=!0)})),{users:o,hasPrimaryUid:t}}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}async update(e){const{nickName:t,gender:o,avatarUrl:i,province:a,country:n,city:s}=e,{data:r}=await this._request.send("auth.updateUserInfo",{nickName:t,gender:o,avatarUrl:i,province:a,country:n,city:s});this.setLocalUserInfo(r)}async refresh(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setUserInfo(){const{userInfoKey:e}=this._cache.keys,t=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach((e=>{this[e]=t[e]})),this.location={country:t.country,province:t.province,city:t.city}}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e),this.setUserInfo()}}class me{constructor(e){if(!e)throw new Error("envId is not defined");this._cache=V(e);const{refreshTokenKey:t,accessTokenKey:o,accessTokenExpireKey:i}=this._cache.keys,a=this._cache.getStore(t),n=this._cache.getStore(o),s=this._cache.getStore(i);this.credential={refreshToken:a,accessToken:n,accessTokenExpire:s},this.user=new ge(e)}get isAnonymousAuth(){return this.loginType===ie.ANONYMOUS}get isCustomAuth(){return this.loginType===ie.CUSTOM}get isWeixinAuth(){return this.loginType===ie.WECHAT||this.loginType===ie.WECHAT_OPEN||this.loginType===ie.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}}class ye extends pe{async signIn(){this._cache.updatePersistence("local");const{anonymousUuidKey:e,refreshTokenKey:t}=this._cache.keys,o=this._cache.getStore(e)||void 0,i=this._cache.getStore(t)||void 0,a=await this._request.send("auth.signInAnonymously",{anonymous_uuid:o,refresh_token:i});if(a.uuid&&a.refresh_token){this._setAnonymousUUID(a.uuid),this.setRefreshToken(a.refresh_token),await this._request.refreshAccessToken(),Z(te),Z(se,{env:this.config.env,loginType:ie.ANONYMOUS,persistence:"local"});const e=new me(this.config.env);return await e.user.refresh(),e}throw new Error("匿名登录失败")}async linkAndRetrieveDataWithTicket(e){const{anonymousUuidKey:t,refreshTokenKey:o}=this._cache.keys,i=this._cache.getStore(t),a=this._cache.getStore(o),n=await this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:i,refresh_token:a,ticket:e});if(n.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(n.refresh_token),await this._request.refreshAccessToken(),Z(re,{env:this.config.env}),Z(se,{loginType:ie.CUSTOM,persistence:"local"}),{credential:{refreshToken:n.refresh_token}};throw new Error("匿名转化失败")}_setAnonymousUUID(e){const{anonymousUuidKey:t,loginTypeKey:o}=this._cache.keys;this._cache.removeStore(t),this._cache.setStore(t,e),this._cache.setStore(o,ie.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}}class _e extends pe{async signIn(e){if("string"!=typeof e)throw new Error("ticket must be a string");const{refreshTokenKey:t}=this._cache.keys,o=await this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(t)||""});if(o.refresh_token)return this.setRefreshToken(o.refresh_token),await this._request.refreshAccessToken(),Z(te),Z(se,{env:this.config.env,loginType:ie.CUSTOM,persistence:this.config.persistence}),await this.refreshUserInfo(),new me(this.config.env);throw new Error("自定义登录失败")}}class we extends pe{async signIn(e,t){if("string"!=typeof e)throw new Error("email must be a string");const{refreshTokenKey:o}=this._cache.keys,i=await this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:t,refresh_token:this._cache.getStore(o)||""}),{refresh_token:a,access_token:n,access_token_expire:s}=i;if(a)return this.setRefreshToken(a),n&&s?this.setAccessToken(n,s):await this._request.refreshAccessToken(),await this.refreshUserInfo(),Z(te),Z(se,{env:this.config.env,loginType:ie.EMAIL,persistence:this.config.persistence}),new me(this.config.env);throw i.code?new Error(`邮箱登录失败: [${i.code}] ${i.message}`):new Error("邮箱登录失败")}async activate(e){return this._request.send("auth.activateEndUserMail",{token:e})}async resetPasswordWithToken(e,t){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:t})}}class ke extends pe{async signIn(e,t){if("string"!=typeof e)throw new Error("username must be a string");"string"!=typeof t&&(t="",console.warn("password is empty"));const{refreshTokenKey:o}=this._cache.keys,i=await this._request.send("auth.signIn",{loginType:ie.USERNAME,username:e,password:t,refresh_token:this._cache.getStore(o)||""}),{refresh_token:a,access_token_expire:n,access_token:s}=i;if(a)return this.setRefreshToken(a),s&&n?this.setAccessToken(s,n):await this._request.refreshAccessToken(),await this.refreshUserInfo(),Z(te),Z(se,{env:this.config.env,loginType:ie.USERNAME,persistence:this.config.persistence}),new me(this.config.env);throw i.code?new Error(`用户名密码登录失败: [${i.code}] ${i.message}`):new Error("用户名密码登录失败")}}class ve{constructor(e){this.config=e,this._cache=V(e.env),this._request=fe(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),Q(se,this._onLoginTypeChanged)}get currentUser(){const e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new ye(this.config)}customAuthProvider(){return new _e(this.config)}emailAuthProvider(){return new we(this.config)}usernameAuthProvider(){return new ke(this.config)}async signInAnonymously(){return new ye(this.config).signIn()}async signInWithEmailAndPassword(e,t){return new we(this.config).signIn(e,t)}signInWithUsernameAndPassword(e,t){return new ke(this.config).signIn(e,t)}async linkAndRetrieveDataWithTicket(e){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new ye(this.config)),Q(re,this._onAnonymousConverted),await this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)}async signOut(){if(this.loginType===ie.ANONYMOUS)throw new Error("匿名用户不支持登出操作");const{refreshTokenKey:e,accessTokenKey:t,accessTokenExpireKey:o}=this._cache.keys,i=this._cache.getStore(e);if(!i)return;const a=await this._request.send("auth.logout",{refresh_token:i});return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.removeStore(o),Z(te),Z(se,{env:this.config.env,loginType:ie.NULL,persistence:this.config.persistence}),a}async signUpWithEmailAndPassword(e,t){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:t})}async sendPasswordResetEmail(e){return this._request.send("auth.sendPasswordResetEmail",{email:e})}onLoginStateChanged(e){Q(te,(()=>{const t=this.hasLoginState();e.call(this,t)}));const t=this.hasLoginState();e.call(this,t)}onLoginStateExpired(e){Q(ne,e.bind(this))}onAccessTokenRefreshed(e){Q(oe,e.bind(this))}onAnonymousConverted(e){Q(re,e.bind(this))}onLoginTypeChanged(e){Q(se,(()=>{const t=this.hasLoginState();e.call(this,t)}))}async getAccessToken(){return{accessToken:(await this._request.getAccessToken()).accessToken,env:this.config.env}}hasLoginState(){const{refreshTokenKey:e}=this._cache.keys;return this._cache.getStore(e)?new me(this.config.env):null}async isUsernameRegistered(e){if("string"!=typeof e)throw new Error("username must be a string");const{data:t}=await this._request.send("auth.isUsernameRegistered",{username:e});return t&&t.isRegistered}getLoginState(){return Promise.resolve(this.hasLoginState())}async signInWithTicket(e){return new _e(this.config).signIn(e)}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then((e=>e.code?e:__spreadProps(__spreadValues({},e.data),{requestId:e.seqId})))}getAuthHeader(){const{refreshTokenKey:e,accessTokenKey:t}=this._cache.keys,o=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(t)+"/@@/"+o}}_onAnonymousConverted(e){const{env:t}=e.data;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){const{loginType:t,persistence:o,env:i}=e.data;i===this.config.env&&(this._cache.updatePersistence(o),this._cache.setStore(this._cache.keys.loginTypeKey,t))}}const Se=function(e,t){t=t||L();const o=fe(this.config.env),{cloudPath:i,filePath:a,onUploadProgress:n,fileType:s="image"}=e;return o.send("storage.getUploadMetadata",{path:i}).then((e=>{const{data:{url:r,authorization:l,token:c,fileId:u,cosFileId:d},requestId:m}=e,h={key:i,signature:l,"x-cos-meta-fileid":d,success_action_status:"201","x-cos-security-token":c};o.upload({url:r,data:h,file:a,name:i,fileType:s,onUploadProgress:n}).then((e=>{201===e.statusCode?t(null,{fileID:u,requestId:m}):t(new Error(`STORAGE_REQUEST_FAIL: ${e.data}`))})).catch((e=>{t(e)}))})).catch((e=>{t(e)})),t.promise},Te=function(e,t){t=t||L();const o=fe(this.config.env),{cloudPath:i}=e;return o.send("storage.getUploadMetadata",{path:i}).then((e=>{t(null,e)})).catch((e=>{t(e)})),t.promise},Ae=function({fileList:e},t){if(t=t||L(),!e||!Array.isArray(e))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};for(let i of e)if(!i||"string"!=typeof i)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"};const o={fileid_list:e};return fe(this.config.env).send("storage.batchDeleteFile",o).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.delete_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Pe=function({fileList:e},t){t=t||L(),e&&Array.isArray(e)||t(null,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});let o=[];for(let a of e)"object"==typeof a?(a.hasOwnProperty("fileID")&&a.hasOwnProperty("maxAge")||t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),o.push({fileid:a.fileID,max_age:a.maxAge})):"string"==typeof a?o.push({fileid:a}):t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"});const i={file_list:o};return fe(this.config.env).send("storage.batchGetDownloadUrl",i).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.download_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Ie=async function({fileID:e},t){const o=(await Pe.call(this,{fileList:[{fileID:e,maxAge:600}]})).fileList[0];if("SUCCESS"!==o.code)return t?t(o):new Promise((e=>{e(o)}));const i=fe(this.config.env);let a=o.download_url;if(a=encodeURI(a),!t)return i.download({url:a});t(await i.download({url:a}))},be=function({name:e,data:t,query:o,parse:i,search:a},n){const s=n||L();let r;try{r=t?JSON.stringify(t):""}catch(c){return Promise.reject(c)}if(!e)return Promise.reject(new Error("函数名不能为空"));const l={inQuery:o,parse:i,search:a,function_name:e,request_data:r};return fe(this.config.env).send("functions.invokeFunction",l).then((e=>{if(e.code)s(null,e);else{let o=e.data.response_data;if(i)s(null,{result:o,requestId:e.requestId});else try{o=JSON.parse(e.data.response_data),s(null,{result:o,requestId:e.requestId})}catch(t){s(new Error("response data must be json"))}}return s.promise})).catch((e=>{s(e)})),s.promise},Ee={timeout:15e3,persistence:"session"},Oe={};class Ce{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(j.adapter||(this.requestClient=new j.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`请求在${(e.timeout||5e3)/1e3}s内未完成，已中断`})),this.config=__spreadValues(__spreadValues({},Ee),e),!0){case this.config.timeout>6e5:console.warn("timeout大于可配置上限[10分钟]，已重置为上限数值"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout小于可配置下限[100ms]，已重置为下限数值"),this.config.timeout=100}return new Ce(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;const t=e||j.adapter.primaryStorage||Ee.persistence;var o;return t!==this.config.persistence&&(this.config.persistence=t),function(e){const{env:t}=e;z[t]=new W(e),J[t]=new W(__spreadProps(__spreadValues({},e),{persistence:"local"}))}(this.config),o=this.config,de[o.env]=new le(o),this.authObj=new ve(this.config),this.authObj}on(e,t){return Q.apply(this,[e,t])}off(e,t){return ee.apply(this,[e,t])}callFunction(e,t){return be.apply(this,[e,t])}deleteFile(e,t){return Ae.apply(this,[e,t])}getTempFileURL(e,t){return Pe.apply(this,[e,t])}downloadFile(e,t){return Ie.apply(this,[e,t])}uploadFile(e,t){return Se.apply(this,[e,t])}getUploadMetadata(e,t){return Te.apply(this,[e,t])}registerExtension(e){Oe[e.name]=e}async invokeExtension(e,t){const o=Oe[e];if(!o)throw Error(`扩展${e} 必须先注册`);return await o.invoke(t,this)}useAdapters(e){const{adapter:t,runtime:o}=M(e)||{};t&&(j.adapter=t),o&&(j.runtime=o)}}var Ue=new Ce;function xe(e,t,o){void 0===o&&(o={});var i=/\?/.test(t),a="";for(var n in o)""===a?!i&&(t+="?"):a+="&",a+=n+"="+encodeURIComponent(o[n]);return/^http(s)?:\/\//.test(t+=a)?t:""+e+t}class De{post(e){const{url:t,data:o,headers:i}=e;return new Promise(((e,a)=>{E.request({url:xe("https:",t),data:o,method:"POST",header:i,success(t){e(t)},fail(e){a(e)}})}))}upload(e){return new Promise(((t,o)=>{const{url:i,file:a,data:n,headers:s,fileType:r}=e,l=E.uploadFile({url:xe("https:",i),name:"file",formData:Object.assign({},n),filePath:a,fileType:r,header:s,success(e){const o={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&n.success_action_status&&(o.statusCode=parseInt(n.success_action_status,10)),t(o)},fail(e){o(new Error(e.errMsg||"uploadFile:fail"))}});"function"==typeof e.onUploadProgress&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((t=>{e.onUploadProgress({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}}const Re={setItem(e,t){E.setStorageSync(e,t)},getItem:e=>E.getStorageSync(e),removeItem(e){E.removeStorageSync(e)},clear(){E.clearStorageSync()}};var qe={genAdapter:function(){return{root:{},reqClass:De,localStorage:Re,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};Ue.useAdapters(qe);const Le=Ue,Fe=Le.init;Le.init=function(e){e.env=e.spaceId;const t=Fe.call(this,e);t.config.provider="tencent",t.config.spaceId=e.spaceId;const o=t.auth;return t.auth=function(e){const t=o.call(this,e);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach((e=>{t[e]=T(t[e]).bind(t)})),t},t.customAuth=t.auth,t};var Ne=Le;function $e(e){return e&&$e(e.__v_raw)||e}function Me(){return{token:E.getStorageSync("uni_id_token")||E.getStorageSync("uniIdToken"),tokenExpired:E.getStorageSync("uni_id_token_expired")}}var Be=class extends U{getAccessToken(){return new Promise(((e,t)=>{const o="Anonymous_Access_token";this.setAccessToken(o),e(o)}))}setupRequest(e,t){const o=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};"auth"!==t&&(o.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=b.sign(o,this.config.clientSecret);const a=I();i["x-client-info"]=JSON.stringify(a);const{token:n}=Me();return i["x-client-token"]=n,{url:this.config.requestUrl,method:"POST",data:o,dataType:"json",header:JSON.parse(JSON.stringify(i))}}uploadFileToOSS({url:e,formData:t,name:o,filePath:i,fileType:a,onUploadProgress:n}){return new Promise(((s,r)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:o,filePath:i,fileType:a,success(e){e&&e.statusCode<400?s(e):r(new A({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){r(new A({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof n&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{n({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}uploadFile({filePath:e,cloudPath:t,fileType:o="image",onUploadProgress:i}){if(!t)throw new A({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});let a;return this.getOSSUploadOptionsFromPath({cloudPath:t}).then((t=>{const{url:n,formData:s,name:r}=t.result;a=t.result.fileUrl;const l={url:n,formData:s,name:r,filePath:e,fileType:o};return this.uploadFileToOSS(Object.assign({},l,{onUploadProgress:i}))})).then((()=>this.reportOSSUpload({cloudPath:t}))).then((t=>new Promise(((o,i)=>{t.success?o({success:!0,filePath:e,fileID:a}):i(new A({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))))}deleteFile({fileList:e}){const t={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:e})};return this.request(this.setupRequest(t))}getTempFileURL({fileList:e}={}){const t={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:e})};return this.request(this.setupRequest(t))}},Ke={init(e){const t=new Be(e),o={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return o},t.customAuth=t.auth,t}};function He({data:e}){let t;t=I();const o=JSON.parse(JSON.stringify(e||{}));if(Object.assign(o,{clientInfo:t}),!o.uniIdToken){const{token:e}=Me();e&&(o.uniIdToken=e)}return o}const ze=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"，云函数[{functionName}]在云端不存在，请检查此云函数名称是否正确以及该云函数是否已上传到服务空间",mode:"append"}];var Je=/[\\^$.*+?()[\]{}|]/g,Ve=RegExp(Je.source);function Ye(e,t,o){return e.replace(new RegExp((i=t)&&Ve.test(i)?i.replace(Je,"\\$&"):i,"g"),o);var i}function Xe({functionName:e,result:t,logPvd:o}){if(this.config.useDebugFunction&&t&&t.requestId){const i=JSON.stringify({spaceId:this.config.spaceId,functionName:e,requestId:t.requestId});console.log(`[${o}-request]${i}[/${o}-request]`)}}function Ge(e){const t=e.callFunction,o=function(o){const i=o.name;o.data=He.call(e,{data:o.data});const a={aliyun:"aliyun",tencent:"tcb"}[this.config.provider];return t.call(this,o).then((e=>(Xe.call(this,{functionName:i,result:e,logPvd:a}),Promise.resolve(e))),(e=>(Xe.call(this,{functionName:i,result:e,logPvd:a}),e&&e.message&&(e.message=function({message:e="",extraInfo:t={},formatter:o=[]}={}){for(let i=0;i<o.length;i++){const{rule:a,content:n,mode:s}=o[i],r=e.match(a);if(!r)continue;let l=n;for(let e=1;e<r.length;e++)l=Ye(l,`{$${e}}`,r[e]);for(const e in t)l=Ye(l,`{${e}}`,t[e]);return"replace"===s?l:e+l}return e}({message:`[${o.name}]: ${e.message}`,formatter:ze,extraInfo:{functionName:i}})),Promise.reject(e))))};e.callFunction=function(e){let t;return t=o.call(this,e),Object.defineProperty(t,"result",{get:()=>(console.warn("当前返回结果为Promise类型，不可直接访问其result属性，详情请参考：https://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),t}}const Qe=Symbol("CLIENT_DB_INTERNAL");function Ze(e,t){return e.then="DoNotReturnProxyWithAFunctionNamedThen",e._internalType=Qe,e.__v_raw=void 0,new Proxy(e,{get(e,o,i){if("_uniClient"===o)return null;if(o in e||"string"!=typeof o){const t=e[o];return"function"==typeof t?t.bind(e):t}return t.get(e,o,i)}})}function et(e){return{on:(t,o)=>{e[t]=e[t]||[],e[t].indexOf(o)>-1||e[t].push(o)},off:(t,o)=>{e[t]=e[t]||[];const i=e[t].indexOf(o);-1!==i&&e[t].splice(i,1)}}}const tt=["db.Geo","db.command","command.aggregate"];function nt(e,t){return tt.indexOf(`${e}.${t}`)>-1}function st(e){switch(o(e=$e(e))){case"array":return e.map((e=>st(e)));case"object":return e._internalType===Qe||Object.keys(e).forEach((t=>{e[t]=st(e[t])})),e;case"regexp":return{$regexp:{source:e.source,flags:e.flags}};case"date":return{$date:e.toISOString()};default:return e}}class rt{constructor(e,t,o){this.content=e,this.prevStage=t||null,this.udb=null,this._database=o}toJSON(){let e=this;const t=[e.content];for(;e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map((e=>({$method:e.$method,$param:st(e.$param)})))}}getAction(){const e=this.toJSON().$db.find((e=>"action"===e.$method));return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter((e=>"action"!==e.$method))}}get useAggregate(){let e=this,t=!1;for(;e.prevStage;){e=e.prevStage;const o=e.content.$method;if("aggregate"===o||"pipeline"===o){t=!0;break}}return t}get count(){if(!this.useAggregate)return function(){return this._send("count",Array.from(arguments))};const e=this;return function(){return ot({$method:"count",$param:st(Array.from(arguments))},e,this._database)}}get(){return this._send("get",Array.from(arguments))}add(){return this._send("add",Array.from(arguments))}remove(){return this._send("remove",Array.from(arguments))}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}set(){throw new Error("clientDB禁止使用set方法")}_send(e,t){const o=this.getAction(),i=this.getCommand();return i.$db.push({$method:e,$param:st(t)}),this._database._callCloudFunction({action:o,command:i})}}function ot(e,t,o){return Ze(new rt(e,t,o),{get(e,t){let i="db";return e&&e.content&&(i=e.content.$method),nt(i,t)?ot({$method:t},e,o):function(){return ot({$method:t,$param:st(Array.from(arguments))},e,o)}}})}function it({path:e,method:t}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...e.map((e=>({$method:e}))),{$method:t,$param:this.param}]}}}}class at extends class{constructor({uniClient:e={}}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e.isDefault&&(this._dbCallBacks=m("_globalUniCloudDatabaseCallback")),this.auth=et(this._authCallBacks),Object.assign(this,et(this._dbCallBacks)),this.env=Ze({},{get:(e,t)=>({$env:t})}),this.Geo=Ze({},{get:(e,t)=>it({path:["Geo"],method:t})}),this.serverDate=it({path:[],method:"serverDate"}),this.RegExp=it({path:[],method:"RegExp"})}getCloudEnv(e){if("string"!=typeof e||!e.trim())throw new Error("getCloudEnv参数错误");return{$env:e.replace("$cloudEnv_","")}}_callback(e,t){const o=this._dbCallBacks;o[e]&&o[e].forEach((e=>{e(...t)}))}_callbackAuth(e,t){const o=this._authCallBacks;o[e]&&o[e].forEach((e=>{e(...t)}))}multiSend(){const e=Array.from(arguments),t=e.map((e=>{const t=e.getAction(),o=e.getCommand();if("getTemp"!==o.$db[o.$db.length-1].$method)throw new Error("multiSend只支持子命令内使用getTemp");return{action:t,command:o}}));return this._callCloudFunction({multiCommand:t,queryList:e})}}{_callCloudFunction({action:e,command:t,multiCommand:o,queryList:i}){function n(e,t){if(o&&i)for(let o=0;o<i.length;o++){const a=i[o];a.udb&&"function"==typeof a.udb.setResult&&(t?a.udb.setResult(t):a.udb.setResult(e.result.dataList[o]))}}const s=v(S("database","invoke")),r=this._uniClient;return s.then((()=>r.callFunction({name:"DCloud-clientDB",data:{action:e,command:t,multiCommand:o}}))).then((e=>{const{code:t,message:o,token:i,tokenExpired:s,systemInfo:r=[]}=e.result;if(r)for(let a=0;a<r.length;a++){const{level:e,message:t,detail:o}=r[a],i=console[e]||console.log;let n="[System Info]"+t;o&&(n=`${n}\n详细信息：${o}`),i(n)}if(t){const e=new a(o,t);return this._callback("error",[e]),Promise.reject(e)}i&&s&&(function({token:e,tokenExpired:t}={}){e&&E.setStorageSync("uni_id_token",e),t&&E.setStorageSync("uni_id_token_expired",t)}({token:i,tokenExpired:s}),this._callbackAuth("refreshToken",[{token:i,tokenExpired:s}]),this._callback("refreshToken",[{token:i,tokenExpired:s}]));const l=e.result.affectedDocs;return"number"==typeof l&&Object.defineProperty(e.result,"affectedDocs",{get:()=>(console.warn("affectedDocs不再推荐使用，请使用inserted/deleted/updated/data.length替代"),l)}),v(S("database","success"),e).then((()=>v(S("database","complete"),e))).then((()=>(n(e,null),Promise.resolve(e))))}),(e=>{const t=new a(e.message,e.code||"SYSTEM_ERROR");return this._callback("error",[t]),/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(e.message)&&console.warn("clientDB未初始化，请在web控制台保存一次schema以开启clientDB"),v(S("database","fail"),e).then((()=>v(S("database","complete"),e))).then((()=>(n(null,e),Promise.reject(e))))}))}}function ct(e){e.database=function(t){if(t&&Object.keys(t).length>0)return e.init(t).database();if(this._database)return this._database;const o=function(e,t={}){return Ze(new e(t),{get:(e,t)=>nt("db",t)?ot({$method:t},null,e):function(){return ot({$method:t,$param:st(Array.from(arguments))},null,e)}})}(at,{uniClient:e});return this._database=o,o}}let ut;const ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",lt=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function dt(){const e=Me().token||"",t=e.split(".");if(!e||3!==t.length)return{uid:null,role:[],permission:[],tokenExpired:0};let o;try{o=JSON.parse((i=t[1],decodeURIComponent(ut(i).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(a){throw new Error("获取当前用户信息出错，详细错误信息为："+a.message)}var i;return o.tokenExpired=1e3*o.exp,delete o.exp,delete o.iat,o}ut="function"!=typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!lt.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var o,i,a="",n=0;n<e.length;)t=ht.indexOf(e.charAt(n++))<<18|ht.indexOf(e.charAt(n++))<<12|(o=ht.indexOf(e.charAt(n++)))<<6|(i=ht.indexOf(e.charAt(n++))),a+=64===o?String.fromCharCode(t>>16&255):64===i?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return a}:atob;var ft=t$1(n((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const o="chooseAndUploadFile:ok",i="chooseAndUploadFile:fail";function a(e,t){return e.tempFiles.forEach(((e,o)=>{e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+o+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((e=>e.path))),e}function n(e,t,{onChooseFile:i,onUploadProgress:a}){return t.then((e=>{if(i){const t=i(e);if(void 0!==t)return Promise.resolve(t).then((t=>void 0===t?e:t))}return e})).then((t=>!1===t?{errMsg:o,tempFilePaths:[],tempFiles:[]}:function(e,t,i=5,a){(t=Object.assign({},t)).errMsg=o;const n=t.tempFiles,s=n.length;let r=0;return new Promise((o=>{for(;r<i;)l();function l(){const i=r++;if(i>=s)return void(!n.find((e=>!e.url&&!e.errMsg))&&o(t));const c=n[i];e.uploadFile({filePath:c.path,cloudPath:c.cloudPath,fileType:c.fileType,onUploadProgress(e){e.index=i,e.tempFile=c,e.tempFilePath=c.path,a&&a(e)}}).then((e=>{c.url=e.fileID,i<s&&l()})).catch((e=>{c.errMsg=e.errMsg||e.message,i<s&&l()}))}}))}(e,t,5,a)))}t.initChooseAndUploadFile=function(e){return function(t={type:"all"}){return"image"===t.type?n(e,function(e){const{count:t,sizeType:o,sourceType:n=["album","camera"],extension:s}=e;return new Promise(((e,r)=>{uni.chooseImage({count:t,sizeType:o,sourceType:n,extension:s,success(t){e(a(t,"image"))},fail(e){r({errMsg:e.errMsg.replace("chooseImage:fail",i)})}})}))}(t),t):"video"===t.type?n(e,function(e){const{camera:t,compressed:o,maxDuration:n,sourceType:s=["album","camera"],extension:r}=e;return new Promise(((e,l)=>{uni.chooseVideo({camera:t,compressed:o,maxDuration:n,sourceType:s,extension:r,success(t){const{tempFilePath:o,duration:i,size:n,height:s,width:r}=t;e(a({errMsg:"chooseVideo:ok",tempFilePaths:[o],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:o,size:n,type:t.tempFile&&t.tempFile.type||"",width:r,height:s,duration:i,fileType:"video",cloudPath:""}]},"video"))},fail(e){l({errMsg:e.errMsg.replace("chooseVideo:fail",i)})}})}))}(t),t):n(e,function(e){const{count:t,extension:o}=e;return new Promise(((e,n)=>{let s=uni.chooseFile;if("undefined"!=typeof wx&&"function"==typeof wx.chooseMessageFile&&(s=wx.chooseMessageFile),"function"!=typeof s)return n({errMsg:i+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});s({type:"all",count:t,extension:o,success(t){e(a(t))},fail(e){n({errMsg:e.errMsg.replace("chooseFile:fail",i)})}})}))}(t),t)}}})));const pt="manual";function gt(e){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{}}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach((t=>{e.push(this[t])})),e}),((e,t)=>{if(this.loadtime===pt)return;let o=!1;const i=[];for(let a=2;a<e.length;a++)e[a]!==t[a]&&(i.push(e[a]),o=!0);e[0]!==t[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(o,i)}))},methods:{onMixinDatacomPropsChange(e,t){},mixinDatacomEasyGet({getone:e=!1,success:t,fail:o}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomGet().then((o=>{this.mixinDatacomLoading=!1;const{data:i,count:a}=o.result;this.getcount&&(this.mixinDatacomPage.count=a),this.mixinDatacomHasMore=i.length<this.pageSize;const n=e?i.length?i[0]:void 0:i;this.mixinDatacomResData=n,t&&t(n)})).catch((e=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=e,o&&o(e)})))},mixinDatacomGet(t={}){let o=e.database(this.spaceInfo);const i=t.action||this.action;i&&(o=o.action(i));const a=t.collection||this.collection;o=Array.isArray(a)?o.collection(...a):o.collection(a);const n=t.where||this.where;n&&Object.keys(n).length&&(o=o.where(n));const s=t.field||this.field;s&&(o=o.field(s));const r=t.foreignKey||this.foreignKey;r&&(o=o.foreignKey(r));const l=t.groupby||this.groupby;l&&(o=o.groupBy(l));const c=t.groupField||this.groupField;c&&(o=o.groupField(c)),!0===(void 0!==t.distinct?t.distinct:this.distinct)&&(o=o.distinct());const u=t.orderby||this.orderby;u&&(o=o.orderBy(u));const d=void 0!==t.pageCurrent?t.pageCurrent:this.mixinDatacomPage.current,m=void 0!==t.pageSize?t.pageSize:this.mixinDatacomPage.size,h=void 0!==t.getcount?t.getcount:this.getcount,p=void 0!==t.gettree?t.gettree:this.gettree,v=void 0!==t.gettreepath?t.gettreepath:this.gettreepath,f={getCount:h},g={limitLevel:void 0!==t.limitlevel?t.limitlevel:this.limitlevel,startWith:void 0!==t.startwith?t.startwith:this.startwith};return p&&(f.getTree=g),v&&(f.getTreePath=g),o=o.skip(m*(d-1)).limit(m).get(f),o}}}}function yt(e){if(e.initUniCloudStatus&&"rejected"!==e.initUniCloudStatus)return;let t=Promise.resolve();t=new Promise(((e,t)=>{setTimeout((()=>{e()}),1)})),e.isReady=!1,e.isDefault=!1;const o=e.auth();e.initUniCloudStatus="pending",e.initUniCloud=t.then((()=>o.getLoginState())).then((e=>e?Promise.resolve():o.signInAnonymously())).then((()=>Promise.resolve())).then((({address:e,port:t}={})=>Promise.resolve())).then((()=>{e.isReady=!0,e.initUniCloudStatus="fulfilled"})).catch((t=>{console.error(t),e.initUniCloudStatus="rejected"}))}let _t=new class{init(e){let t={};const o=!1!==e.debugFunction&&u&&"app-plus"===h;switch(e.provider){case"tencent":t=Ne.init(Object.assign(e,{useDebugFunction:o}));break;case"aliyun":t=x.init(Object.assign(e,{useDebugFunction:o}));break;case"private":t=Ke.init(Object.assign(e,{useDebugFunction:o}));break;default:throw new Error("未提供正确的provider参数")}var i;return yt(t),t.reInit=function(){yt(this)},Ge(t),function(e){const t=e.uploadFile;e.uploadFile=function(e){return t.call(this,e)}}(t),ct(t),(i=t).getCurrentUserInfo=dt,i.chooseAndUploadFile=ft.initChooseAndUploadFile(i),Object.assign(i,{get mixinDatacom(){return gt(i)}}),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach((e=>{if(!t[e])return;const o=t[e];t[e]=function(){return t.reInit(),o.apply(t,Array.from(arguments))},t[e]=T(t[e],e).bind(t)})),t.init=this.init,t}};(()=>{{const e=d;let t={};if(1===e.length)t=e[0],_t=_t.init(t),_t.isDefault=!0;else{const t=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo"];let o;o=e&&e.length>0?"应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间":"应用未关联服务空间，请在uniCloud目录右键关联服务空间",t.forEach((e=>{_t[e]=function(){return console.error(o),Promise.reject(new A({code:"SYS_ERR",message:o}))}}))}Object.assign(_t,{get mixinDatacom(){return gt(_t)}}),_t.addInterceptor=w,_t.removeInterceptor=k}})();var wt=_t;const ERR_MSG_OK="chooseAndUploadFile:ok",ERR_MSG_FAIL="chooseAndUploadFile:fail";function chooseImage(e){const{count:t,sizeType:o=["original","compressed"],sourceType:i=["album","camera"],extension:a}=e;return new Promise(((e,n)=>{uni.chooseImage({count:t,sizeType:o,sourceType:i,extension:a,success(t){e(normalizeChooseAndUploadFileRes(t,"image"))},fail(e){n({errMsg:e.errMsg.replace("chooseImage:fail",ERR_MSG_FAIL)})}})}))}function chooseVideo(e){const{camera:t,compressed:o,maxDuration:i,sourceType:a=["album","camera"],extension:n}=e;return new Promise(((e,s)=>{uni.chooseVideo({camera:t,compressed:o,maxDuration:i,sourceType:a,extension:n,success(t){const{tempFilePath:o,duration:i,size:a,height:n,width:s}=t;e(normalizeChooseAndUploadFileRes({errMsg:"chooseVideo:ok",tempFilePaths:[o],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:o,size:a,type:t.tempFile&&t.tempFile.type||"",width:s,height:n,duration:i,fileType:"video",cloudPath:""}]},"video"))},fail(e){s({errMsg:e.errMsg.replace("chooseVideo:fail",ERR_MSG_FAIL)})}})}))}function chooseAll(e){const{count:t,extension:o}=e;return new Promise(((e,i)=>{let a=uni.chooseFile;if("undefined"!=typeof wx&&"function"==typeof wx.chooseMessageFile&&(a=wx.chooseMessageFile),"function"!=typeof a)return i({errMsg:ERR_MSG_FAIL+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});a({type:"all",count:t,extension:o,success(t){e(normalizeChooseAndUploadFileRes(t))},fail(e){i({errMsg:e.errMsg.replace("chooseFile:fail",ERR_MSG_FAIL)})}})}))}function normalizeChooseAndUploadFileRes(e,t){return e.tempFiles.forEach(((e,o)=>{e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+o+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((e=>e.path))),e}function uploadCloudFiles(e,t=5,o){const i=(e=JSON.parse(JSON.stringify(e))).length;let a=0,n=this;return new Promise((s=>{for(;a<t;)r();function r(){let t=a++;if(t>=i)return void(!e.find((e=>!e.url&&!e.errMsg))&&s(e));const l=e[t],c=n.files.findIndex((e=>e.uuid===l.uuid));l.url="",delete l.errMsg,wt.uploadFile({filePath:l.path,cloudPath:l.cloudPath,fileType:l.fileType,onUploadProgress:e=>{e.index=c,o&&o(e)}}).then((e=>{l.url=e.fileID,l.index=c,t<i&&r()})).catch((e=>{l.errMsg=e.errMsg||e.message,l.index=c,t<i&&r()}))}}))}function uploadFiles(e,{onChooseFile:t,onUploadProgress:o}){return e.then((e=>{if(t){const o=t(e);if(void 0!==o)return Promise.resolve(o).then((t=>void 0===t?e:t))}return e})).then((e=>!1===e?{errMsg:ERR_MSG_OK,tempFilePaths:[],tempFiles:[]}:e))}function chooseAndUploadFile(e={type:"all"}){return"image"===e.type?uploadFiles(chooseImage(e),e):"video"===e.type?uploadFiles(chooseVideo(e),e):uploadFiles(chooseAll(e),e)}const get_file_ext=e=>{const t=e.lastIndexOf("."),o=e.length;return{name:e.substring(0,t),ext:e.substring(t+1,o)}},get_extname=e=>{if(Array.isArray(e))return e;return e.replace(/(\[|\])/g,"").split(",")},get_files_and_is_max=(e,t)=>{let o=[],i=[];return t&&0!==t.length?(e.tempFiles.forEach((e=>{const a=get_file_ext(e.name).ext.toLowerCase();-1!==t.indexOf(a)&&(i.push(e),o.push(e.path))})),i.length!==e.tempFiles.length&&uni.showToast({title:`当前选择了${e.tempFiles.length}个文件 ，${e.tempFiles.length-i.length} 个文件格式不正确`,icon:"none",duration:5e3}),{filePaths:o,files:i}):{filePaths:o,files:i}},get_file_info=e=>new Promise(((t,o)=>{uni.getImageInfo({src:e,success(e){t(e)},fail(e){o(e)}})})),get_file_data=async(e,t="image")=>{const o=get_file_ext(e.name).ext.toLowerCase();let i={name:e.name,uuid:e.uuid,extname:o||"",cloudPath:e.cloudPath,fileType:e.fileType,url:e.path||e.path,size:e.size,image:{},path:e.path,video:{}};if("image"===t){const t=await get_file_info(e.path);delete i.video,i.image.width=t.width,i.image.height=t.height,i.image.location=t.path}else delete i.image;return i},_sfc_main$Z={name:"uploadImage",emits:["uploadFiles","choose","delFile"],props:{filesList:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},disablePreview:{type:Boolean,default:!1},limit:{type:[Number,String],default:9},imageStyles:{type:Object,default:()=>({width:"auto",height:"auto",border:{}})},delIcon:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1}},computed:{styles(){return Object.assign({width:"auto",height:"auto",border:{}},this.imageStyles)},boxStyle(){const{width:e="auto",height:t="auto"}=this.styles;let o={};"auto"===t?"auto"!==e?(o.height=this.value2px(e),o["padding-top"]=0):o.height=0:(o.height=this.value2px(t),o["padding-top"]=0),o.width="auto"===e?"auto"!==t?this.value2px(t):"33.3%":this.value2px(e);let i="";for(let a in o)i+=`${a}:${o[a]};`;return i},borderStyle(){let{border:e}=this.styles,t={};if("boolean"==typeof e)t.border=e?"1px #eee solid":"none";else{let o=e&&e.width||1;o=this.value2px(o);let i=e&&e.radius||3;i=this.value2px(i),t={"border-width":o,"border-style":e&&e.style||"solid","border-color":e&&e.color||"#eee","border-radius":i}}let o="";for(let i in t)o+=`${i}:${t[i]};`;return o}},methods:{uploadFiles(e,t){this.$emit("uploadFiles",e)},choose(){this.$emit("choose")},delFile(e){this.$emit("delFile",e)},prviewImage(e,t){let o=[];1===Number(this.limit)&&this.disablePreview&&!this.disabled&&this.$emit("choose"),this.disablePreview||(this.filesList.forEach((e=>{o.push(e.url)})),uni.previewImage({urls:o,current:t}))},value2px:e=>("number"==typeof e?e+="px":-1===e.indexOf("%")&&(e=-1!==e.indexOf("px")?e:e+"px"),e)}};function _sfc_render$Y(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-file-picker__container"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.filesList,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"file-picker__box",key:t,style:vue.normalizeStyle(n.boxStyle)},[vue.createElementVNode("view",{class:"file-picker__box-content",style:vue.normalizeStyle(n.borderStyle)},[vue.createElementVNode("image",{class:"file-image",src:e.url,mode:"aspectFill",onClick:vue.withModifiers((o=>n.prviewImage(e,t)),["stop"])},null,8,["src","onClick"]),o.delIcon&&!o.readonly?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"icon-del-box",onClick:vue.withModifiers((e=>n.delFile(t)),["stop"])},[vue.createElementVNode("view",{class:"icon-del"}),vue.createElementVNode("view",{class:"icon-del rotate"})],8,["onClick"])):vue.createCommentVNode("",!0),e.progress&&100!==e.progress||0===e.progress?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"file-picker__progress"},[vue.createElementVNode("progress",{class:"file-picker__progress-item",percent:-1===e.progress?0:e.progress,"stroke-width":"4",backgroundColor:e.errMsg?"#ff5a5f":"#EBEBEB"},null,8,["percent","backgroundColor"])])):vue.createCommentVNode("",!0),e.errMsg?(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"file-picker__mask",onClick:vue.withModifiers((o=>n.uploadFiles(e,t)),["stop"])}," 点击重试 ",8,["onClick"])):vue.createCommentVNode("",!0)],4)],4)))),128)),o.filesList.length<o.limit&&!o.readonly?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"file-picker__box",style:vue.normalizeStyle(n.boxStyle)},[vue.createElementVNode("view",{class:"file-picker__box-content is-add",style:vue.normalizeStyle(n.borderStyle),onClick:t[0]||(t[0]=(...e)=>n.choose&&n.choose(...e))},[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createElementVNode("view",{class:"icon-add"}),vue.createElementVNode("view",{class:"icon-add rotate"})]),!0)],4)],4)):vue.createCommentVNode("",!0)])}var uploadImage=_export_sfc(_sfc_main$Z,[["render",_sfc_render$Y],["__scopeId","data-v-6073ce03"]]);const _sfc_main$Y={name:"uploadFile",emits:["uploadFiles","choose","delFile"],props:{filesList:{type:Array,default:()=>[]},delIcon:{type:Boolean,default:!0},limit:{type:[Number,String],default:9},showType:{type:String,default:""},listStyles:{type:Object,default:()=>({border:!0,dividline:!0,borderStyle:{}})},readonly:{type:Boolean,default:!1}},computed:{list(){let e=[];return this.filesList.forEach((t=>{e.push(t)})),e},styles(){return Object.assign({border:!0,dividline:!0,"border-style":{}},this.listStyles)},borderStyle(){let{borderStyle:e,border:t}=this.styles,o={};if(t){let t=e&&e.width||1;t=this.value2px(t);let i=e&&e.radius||5;i=this.value2px(i),o={"border-width":t,"border-style":e&&e.style||"solid","border-color":e&&e.color||"#eee","border-radius":i}}else o.border="none";let i="";for(let a in o)i+=`${a}:${o[a]};`;return i},borderLineStyle(){let e={},{borderStyle:t}=this.styles;if(t&&t.color&&(e["border-color"]=t.color),t&&t.width){let o=t&&t.width||1,i=t&&t.style||0;"number"==typeof o?o+="px":o=o.indexOf("px")?o:o+"px",e["border-width"]=o,"number"==typeof i?i+="px":i=i.indexOf("px")?i:i+"px",e["border-top-style"]=i}let o="";for(let i in e)o+=`${i}:${e[i]};`;return o}},methods:{uploadFiles(e,t){this.$emit("uploadFiles",{item:e,index:t})},choose(){this.$emit("choose")},delFile(e){this.$emit("delFile",e)},value2px:e=>("number"==typeof e?e+="px":e=-1!==e.indexOf("px")?e:e+"px",e)}};function _sfc_render$X(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-file-picker__files"},[o.readonly?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"files-button",onClick:t[0]||(t[0]=(...e)=>n.choose&&n.choose(...e))},[vue.renderSlot(e.$slots,"default",{},void 0,!0)])),n.list.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-file-picker__lists is-text-box",style:vue.normalizeStyle(n.borderStyle)},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.list,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["uni-file-picker__lists-box",{"files-border":0!==t&&n.styles.dividline}]),key:t,style:vue.normalizeStyle(0!==t&&n.styles.dividline&&n.borderLineStyle)},[vue.createElementVNode("view",{class:"uni-file-picker__item"},[vue.createElementVNode("view",{class:"files__name"},vue.toDisplayString(e.name),1),o.delIcon&&!o.readonly?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"icon-del-box icon-files",onClick:e=>n.delFile(t)},[vue.createElementVNode("view",{class:"icon-del icon-files"}),vue.createElementVNode("view",{class:"icon-del rotate"})],8,["onClick"])):vue.createCommentVNode("",!0)]),e.progress&&100!==e.progress||0===e.progress?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"file-picker__progress"},[vue.createElementVNode("progress",{class:"file-picker__progress-item",percent:-1===e.progress?0:e.progress,"stroke-width":"4",backgroundColor:e.errMsg?"#ff5a5f":"#EBEBEB"},null,8,["percent","backgroundColor"])])):vue.createCommentVNode("",!0),"error"===e.status?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"file-picker__mask",onClick:vue.withModifiers((o=>n.uploadFiles(e,t)),["stop"])}," 点击重试 ",8,["onClick"])):vue.createCommentVNode("",!0)],6)))),128))],4)):vue.createCommentVNode("",!0)])}var uploadFile=_export_sfc(_sfc_main$Y,[["render",_sfc_render$X],["__scopeId","data-v-d9bb6ec6"]]);const _sfc_main$X={name:"uniFilePicker",components:{uploadImage:uploadImage,uploadFile:uploadFile},emits:["select","success","fail","progress","delete","update:modelValue","input"],props:{modelValue:{type:[Array,Object],default:()=>[]},disabled:{type:Boolean,default:!1},disablePreview:{type:Boolean,default:!1},delIcon:{type:Boolean,default:!0},autoUpload:{type:Boolean,default:!0},limit:{type:[Number,String],default:9},mode:{type:String,default:"grid"},fileMediatype:{type:String,default:"image"},fileExtname:{type:[Array,String],default:()=>[]},title:{type:String,default:""},listStyles:{type:Object,default:()=>({border:!0,dividline:!0,borderStyle:{}})},imageStyles:{type:Object,default:()=>({width:"auto",height:"auto"})},readonly:{type:Boolean,default:!1},returnType:{type:String,default:"array"},sizeType:{type:Array,default:()=>["original","compressed"]}},data:()=>({files:[],localValue:[]}),watch:{modelValue:{handler(e,t){this.setValue(e,t)},immediate:!0}},computed:{filesList(){let e=[];return this.files.forEach((t=>{e.push(t)})),e},showType(){return"image"===this.fileMediatype?this.mode:"list"},limitLength(){return"object"===this.returnType?1:this.limit?this.limit>=9?9:this.limit:1}},created(){wt.config&&wt.config.provider||(this.noSpace=!0,wt.chooseAndUploadFile=chooseAndUploadFile),this.form=this.getForm("uniForms"),this.formItem=this.getForm("uniFormsItem"),this.form&&this.formItem&&this.formItem.name&&(this.rename=this.formItem.name,this.form.inputChildrens.push(this))},methods:{clearFiles(e){0===e||e?this.files.splice(e,1):(this.files=[],this.$nextTick((()=>{this.setEmit()}))),this.$nextTick((()=>{this.setEmit()}))},upload(){let e=[];this.files.forEach(((t,o)=>{"ready"!==t.status&&"error"!==t.status||e.push(Object.assign({},t))})),this.uploadFiles(e)},async setValue(e,t){const o=async e=>{let t="";return t=e.fileID?e.fileID:e.url,/cloud:\/\/([\w.]+\/?)\S*/.test(t)&&(e.fileID=t,e.url=await this.getTempFileURL(t)),e.url&&(e.path=e.url),e};if("object"===this.returnType)e?await o(e):e={};else{e||(e=[]);for(let t=0;t<e.length;t++){let i=e[t];await o(i)}}this.localValue=e,this.form&&this.formItem&&!this.is_reset&&(this.is_reset=!1,this.formItem.setValue(this.localValue));let i=Object.keys(e).length>0?e:[];this.files=[].concat(i)},choose(){this.disabled||(this.files.length>=Number(this.limitLength)&&"grid"!==this.showType&&"array"===this.returnType?uni.showToast({title:`您最多选择 ${this.limitLength} 个文件`,icon:"none"}):this.chooseFiles())},chooseFiles(){const e=get_extname(this.fileExtname);wt.chooseAndUploadFile({type:this.fileMediatype,compressed:!1,sizeType:this.sizeType,extension:e.length>0?e:void 0,count:this.limitLength-this.files.length,onChooseFile:this.chooseFileCallback,onUploadProgress:e=>{this.setProgress(e,e.index)}}).then((e=>{this.setSuccessAndError(e.tempFiles)})).catch((e=>{formatAppLog("log","at uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.vue:361","选择失败",e)}))},async chooseFileCallback(e){const t=get_extname(this.fileExtname);(1===Number(this.limitLength)&&this.disablePreview&&!this.disabled||"object"===this.returnType)&&(this.files=[]);let{filePaths:o,files:i}=get_files_and_is_max(e,t);t&&t.length>0||(o=e.tempFilePaths,i=e.tempFiles);let a=[];for(let n=0;n<i.length&&!(this.limitLength-this.files.length<=0);n++){i[n].uuid=Date.now();let e=await get_file_data(i[n],this.fileMediatype);e.progress=0,e.status="ready",this.files.push(e),a.push(__spreadProps(__spreadValues({},e),{file:i[n]}))}this.$emit("select",{tempFiles:a,tempFilePaths:o}),e.tempFiles=i,this.autoUpload&&!this.noSpace||(e.tempFiles=[])},uploadFiles(e){e=[].concat(e),uploadCloudFiles.call(this,e,5,(e=>{this.setProgress(e,e.index,!0)})).then((e=>{this.setSuccessAndError(e)})).catch((e=>{formatAppLog("log","at uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.vue:426",e)}))},async setSuccessAndError(e,t){let o=[],i=[],a=[],n=[];for(let s=0;s<e.length;s++){const t=e[s],r=t.uuid?this.files.findIndex((e=>e.uuid===t.uuid)):t.index;if(-1===r||!this.files)break;if("request:fail"===t.errMsg)this.files[r].url=t.path,this.files[r].status="error",this.files[r].errMsg=t.errMsg,i.push(this.files[r]),n.push(this.files[r].url);else{this.files[r].errMsg="",this.files[r].fileID=t.url;/cloud:\/\/([\w.]+\/?)\S*/.test(t.url)?this.files[r].url=await this.getTempFileURL(t.url):this.files[r].url=t.url,this.files[r].status="success",this.files[r].progress+=1,o.push(this.files[r]),a.push(this.files[r].fileID)}}o.length>0&&(this.setEmit(),this.$emit("success",{tempFiles:this.backObject(o),tempFilePaths:a})),i.length>0&&this.$emit("fail",{tempFiles:this.backObject(i),tempFilePaths:n})},setProgress(e,t,o){this.files.length;const i=Math.round(100*e.loaded/e.total);let a=t;o||(a=this.files.findIndex((t=>t.uuid===e.tempFile.uuid))),-1!==a&&this.files[a]&&(this.files[a].progress=i-1,this.$emit("progress",{index:a,progress:parseInt(i),tempFile:this.files[a]}))},delFile(e){this.$emit("delete",{tempFile:this.files[e],tempFilePath:this.files[e].url}),this.files.splice(e,1),this.$nextTick((()=>{this.setEmit()}))},getFileExt(e){const t=e.lastIndexOf("."),o=e.length;return{name:e.substring(0,t),ext:e.substring(t+1,o)}},setEmit(){let e=[];"object"===this.returnType?(e=this.backObject(this.files)[0],this.localValue=e||null):(e=this.backObject(this.files),this.localValue||(this.localValue=[]),this.localValue=[...e]),this.$emit("update:modelValue",this.localValue)},backObject(e){let t=[];return e.forEach((e=>{t.push({extname:e.extname,fileType:e.fileType,image:e.image,name:e.name,path:e.path,size:e.size,fileID:e.fileID,url:e.url})})),t},async getTempFileURL(e){e={fileList:[].concat(e)};return(await wt.getTempFileURL(e)).fileList[0].tempFileURL||""},getForm(e="uniForms"){let t=this.$parent,o=t.$options.name;for(;o!==e;){if(t=t.$parent,!t)return!1;o=t.$options.name}return t}}};function _sfc_render$W(e,t,o,i,a,n){const s=vue.resolveComponent("upload-image"),r=vue.resolveComponent("upload-file");return vue.openBlock(),vue.createElementBlock("view",{class:"uni-file-picker"},[o.title?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-file-picker__header"},[vue.createElementVNode("text",{class:"file-title"},vue.toDisplayString(o.title),1),vue.createElementVNode("text",{class:"file-count"},vue.toDisplayString(n.filesList.length)+"/"+vue.toDisplayString(n.limitLength),1)])):vue.createCommentVNode("",!0),"image"===o.fileMediatype&&"grid"===n.showType?(vue.openBlock(),vue.createBlock(s,{key:1,readonly:o.readonly,"image-styles":o.imageStyles,"files-list":n.filesList,limit:n.limitLength,disablePreview:o.disablePreview,delIcon:o.delIcon,onUploadFiles:n.uploadFiles,onChoose:n.choose,onDelFile:n.delFile},{default:vue.withCtx((()=>[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createElementVNode("view",{class:"is-add"},[vue.createElementVNode("view",{class:"icon-add"}),vue.createElementVNode("view",{class:"icon-add rotate"})])]),!0)])),_:3},8,["readonly","image-styles","files-list","limit","disablePreview","delIcon","onUploadFiles","onChoose","onDelFile"])):vue.createCommentVNode("",!0),"image"!==o.fileMediatype||"grid"!==n.showType?(vue.openBlock(),vue.createBlock(r,{key:2,readonly:o.readonly,"list-styles":o.listStyles,"files-list":n.filesList,showType:n.showType,delIcon:o.delIcon,onUploadFiles:n.uploadFiles,onChoose:n.choose,onDelFile:n.delFile},{default:vue.withCtx((()=>[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createElementVNode("button",{type:"primary",size:"mini"},"选择文件")]),!0)])),_:3},8,["readonly","list-styles","files-list","showType","delIcon","onUploadFiles","onChoose","onDelFile"])):vue.createCommentVNode("",!0)])}var __easycom_1$c=_export_sfc(_sfc_main$X,[["render",_sfc_render$W],["__scopeId","data-v-8b1cf150"]]);const _sfc_main$W={name:"UniTag",emits:["click"],props:{type:{type:String,default:"default"},size:{type:String,default:"normal"},text:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},inverted:{type:[Boolean,String],default:!1},circle:{type:[Boolean,String],default:!1},mark:{type:[Boolean,String],default:!1},customStyle:{type:String,default:""}},computed:{classes(){const{type:e,disabled:t,inverted:o,circle:i,mark:a,size:n,isTrue:s}=this;return["uni-tag--"+e,"uni-tag--"+n,s(t)?"uni-tag--disabled":"",s(o)?"uni-tag--"+e+"--inverted":"",s(i)?"uni-tag--circle":"",s(a)?"uni-tag--mark":"",s(o)?"uni-tag--inverted uni-tag-text--"+e:"","small"===n?"uni-tag-text--small":""].join(" ")}},methods:{isTrue:e=>!0===e||"true"===e,onClick(){this.isTrue(this.disabled)||this.$emit("click")}}};function _sfc_render$V(e,t,o,i,a,n){return o.text?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:vue.normalizeClass(["uni-tag",n.classes]),style:vue.normalizeStyle(o.customStyle),onClick:t[0]||(t[0]=(...e)=>n.onClick&&n.onClick(...e))},vue.toDisplayString(o.text),7)):vue.createCommentVNode("",!0)}var __easycom_2$5=_export_sfc(_sfc_main$W,[["render",_sfc_render$V],["__scopeId","data-v-a8865bf8"]]);const _sfc_main$V={props:{contentHeight:{type:Number,default:300}},data:()=>({emojiList:emojiList}),methods:{setEmoj(e,t){this.$nextTick((()=>{this.$emit("setEmoj",e,t)}))}}};function _sfc_render$U(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("scroll-view",{style:vue.normalizeStyle({height:o.contentHeight+"px"}),"scroll-y":"true",class:"scroller"},[vue.createElementVNode("div",{class:"emoji-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.emojiList,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t,class:"emoji-item"},[vue.createElementVNode("text",{onClick:o=>n.setEmoj(e,t),class:"emoj_box_img"},vue.toDisplayString(e),9,["onClick"])])))),128))])],4)])}var __easycom_3$3=_export_sfc(_sfc_main$V,[["render",_sfc_render$U],["__scopeId","data-v-7ea64ba8"]]);const _sfc_main$U={name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:"取消"},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||t("uni-search-bar.cancel")},placeholderText(){return this.placeholder||t("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){e&&(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))}},searchVal(e,t){this.$emit("update:modelValue",e)}},methods:{searchClick(){this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.$emit("clear",{value:this.searchVal}),this.searchVal=""},cancel(){this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,plus.key.hideSoftKeybord()},confirm(){plus.key.hideSoftKeybord(),this.$emit("confirm",{value:this.searchVal})},blur(){plus.key.hideSoftKeybord(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}};function _sfc_render$T(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",{class:"uni-searchbar"},[vue.createElementVNode("view",{style:vue.normalizeStyle({borderRadius:o.radius+"px",backgroundColor:o.bgColor}),class:"uni-searchbar__box",onClick:t[5]||(t[5]=(...e)=>n.searchClick&&n.searchClick(...e))},[vue.createElementVNode("view",{class:"uni-searchbar__box-icon-search"},[vue.renderSlot(e.$slots,"searchIcon",{},(()=>[vue.createVNode(s,{color:"#c0c4cc",size:"18",type:"search"})]),!0)]),a.show||a.searchVal?vue.withDirectives((vue.openBlock(),vue.createElementBlock("input",{key:0,focus:a.showSync,placeholder:n.placeholderText,maxlength:o.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.searchVal=e),onConfirm:t[1]||(t[1]=(...e)=>n.confirm&&n.confirm(...e)),onBlur:t[2]||(t[2]=(...e)=>n.blur&&n.blur(...e)),onFocus:t[3]||(t[3]=(...e)=>n.emitFocus&&n.emitFocus(...e))},null,40,["focus","placeholder","maxlength"])),[[vue.vModelText,a.searchVal]]):(vue.openBlock(),vue.createElementBlock("text",{key:1,class:"uni-searchbar__text-placeholder"},vue.toDisplayString(o.placeholder),1)),a.show&&("always"===o.clearButton||"auto"===o.clearButton&&""!==a.searchVal)?(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"uni-searchbar__box-icon-clear",onClick:t[4]||(t[4]=(...e)=>n.clear&&n.clear(...e))},[vue.renderSlot(e.$slots,"clearIcon",{},(()=>[vue.createVNode(s,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])):vue.createCommentVNode("",!0)],4),"always"===o.cancelButton||a.show&&"auto"===o.cancelButton?(vue.openBlock(),vue.createElementBlock("text",{key:0,onClick:t[6]||(t[6]=(...e)=>n.cancel&&n.cancel(...e)),class:"uni-searchbar__cancel"},vue.toDisplayString(n.cancelTextI18n),1)):vue.createCommentVNode("",!0)])}var __easycom_1$b=_export_sfc(_sfc_main$U,[["render",_sfc_render$T],["__scopeId","data-v-1e592232"]]);const _sfc_main$T={data:()=>({articleText:"",imageFiles:[],videoFiles:[],labels:[],labelSelect:[],labelSelectIds:[],isAnonymity:0,privateSelect:0,privateSettingGroup:privateSettingGroup,showEmojiPicker:!1,labelPage:1,isShowAnonymity:!1,buttonIsLoading:!1,labelSearchText:""}),async beforeMount(){this.isShowAnonymity=await this.getAnonymityState(),this.getLabels(this.labelPage)},methods:{onNarLeftClick(){formatAppLog("log","at pages/publish/publish.vue:216","onNarLeftClick()"),uni.navigateBack({delta:1})},onTextareaInput(e){this.articleText=e.detail.value},onImageFilesSelect(e){let t=this.imageFiles;e.tempFilePaths.forEach(((o,i)=>{t.push({url:o,file:e.tempFiles[i]})})),this.imageFiles=t},setEmoj(e){this.articleText=this.articleText+e},onSwitchClick(){this.isAnonymity=1==this.isAnonymity?0:1},onPrivaterChooseClick(){this.$refs.privateSelectPopup.open()},onPrivaterAdioChange(e){for(let t=0;t<this.privateSettingGroup.length;t++)if(this.privateSettingGroup[t]===e.detail.value){this.privateSelect=t;break}},onAddLabelClick(){this.$refs.labelPopup.open()},onChooseLabelClick(e){let t=this.labelSelect,o=this.labelSelectIds;if(-1==o.indexOf(e.id)){if(this.labelSelect.length>=5)return void uni.showToast({title:"最多只能选择五个哦~",icon:"none"});o.push(e.id),t.push(e)}else{for(let t=0;t<o.length;t++)if(o[t]==e.id){o.splice(t,1);break}for(let o=0;o<t.length;o++)if(t[o].id==e.id){t.splice(o,1);break}}this.labelSelect=t,this.labelSelectIds=o},onSearchInput(e){formatAppLog("log","at pages/publish/publish.vue:314",e),this.labelSearchText=e},onSearchConfirm(){this.labelSearchText.length<1?uni.showToast({title:"请先输入内容",icon:"none"}):this.searchLabels(this.labelSearchText)},onRefreshLabelClick(){this.getLabels(this.labelPage)},onImageIconClick(){if(this.videoFiles.length>0)return void uni.showModal({title:"无法选择图片",content:"一个动态不支持同时发布视频和图片哦~"});let e=this,t=9-this.imageFiles.length;t<=0?uni.showToast({title:"最多选择9张哦~",icon:"none"}):uni.chooseImage({count:t,sizeType:["original","compressed"],sourceType:["album"],success:function(t){let o=e.imageFiles;Array.isArray(t.tempFilePaths)&&t.tempFilePaths.forEach(((e,i)=>{o.push({url:e,file:t.tempFiles[i]})})),e.imageFiles=o}})},onCameraIconClick(){if(this.videoFiles.length>0)return void uni.showModal({title:"无法选择图片",content:"一个动态不支持同时发布视频和图片哦~"});let e=this;9-this.imageFiles.length<=0?uni.showToast({title:"最多选择9张哦~",icon:"none"}):uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(t){var o=e.imageFiles;Array.isArray(t.tempFilePaths)&&(t.tempFilePaths.forEach(((e,i)=>{o.push({url:e,file:t.tempFiles[i]})})),e.imageFiles=o)}})},async onVideoIconClick(){let e=await getMyUserInfo();e?1==e.isVerify&&e.vip&&e.vip.remainDays>0?this.imageFiles.length>0?uni.showModal({title:"无法选择视频",content:"一个动态不支持同时发布视频和图片哦~"}):this.videoFiles.length>=1?uni.showModal({title:"无法选择视频",content:"一个动态只能选择一个视频"}):uni.chooseVideo({sourceType:["camera","album"],maxDuration:60,camera:"back",success:e=>{formatAppLog("log","at pages/publish/publish.vue:470",e),e.duration>210?uni.showModal({title:"选择失败",content:"只能选择3分30秒以下的视屏哦~"}):(this.videoFiles=[{url:e.tempFilePath}],formatAppLog("log","at pages/publish/publish.vue:481",this.videoFiles))}}):uni.showModal({title:"选择失败",content:"只有实名认证并且为vip用户才能发布视频哦~"}):uni.showModal({title:"无法选择",content:"您还未登录，请先登录",success:function(e){e.confirm?uni.navigateTo({url:"../login/login"}):e.cancel&&formatAppLog("log","at pages/publish/publish.vue:437","用户点击取消")}})},onEmojiIconClick(){this.showEmojiPicker=!this.showEmojiPicker},onEmojiPickerCloseClick(){this.showEmojiPicker=!1},async searchLabels(e){let t=await request({data:{method:"GET",group:"activity",action:"label/query",data:{content:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(formatAppLog("log","at pages/publish/publish.vue:512","res.data",t.data),t.data.code===REQUEST_SUCCEEDED_CODE){let o=t.data.data;if(o.length<=0){let t=await this.addLabel(e);0!=t&&(this.labels=[{id:t,content:this.labelSearchText,hot:0}],this.labelSearchText="")}else this.labels=o,this.labelSearchText=""}else uni.showToast({title:t.data.userMSg,icon:"none"})},async addLabel(e){let t=await request({data:{method:"PUT",group:"activity",action:"label/add",data:{content:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return t.data.code===REQUEST_SUCCEEDED_CODE?t.data.data:0},async getLabels(e){let t=await request({data:{method:"GET",group:"activity",action:"label/list",data:{page:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){let o=t.data.data,i=t.data.data.list;e<o.pageSum?this.labelPage=this.labelPage+1:this.labelPage=1;for(let e=0;e<this.labelSelect.length;e++){let t=!1;for(let o=0;o<i.length;o++)if(i[o].id==this.labelSelect[e].id){t=!0;break}t||i.push(this.labelSelect[e])}this.labels=i,formatAppLog("log","at pages/publish/publish.vue:601",t.data)}else formatAppLog("log","at pages/publish/publish.vue:603",t.data)},async getAnonymityState(){let e=await request({data:{method:"GET",group:"activity",action:"anonymity/state",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});return e.data.code===REQUEST_SUCCEEDED_CODE&&e.data.data},async prepareBeforePublic(){let e=await getMyUserInfo();if(!e)return void uni.showModal({title:"发布失败",content:"您还未登录，请先登录",success:function(e){e.confirm?uni.navigateTo({url:"../login/login"}):e.cancel&&formatAppLog("log","at pages/publish/publish.vue:645","用户点击取消")}});if(this.articleText.length<=0&&this.imageFiles.length<=0&&this.videoFiles.length<=0)return void uni.showToast({title:"请先输入内容",icon:"none"});uni.showLoading({title:"正在发布"}),this.buttonIsLoading=!0;let t=0,o=[],i=[];var a=this;let n,s=0;if(this.imageFiles.length>0){if(s=this.imageFiles.length,i=this.imageFiles,this.videoFiles.length>0)return void uni.showModal({title:"发布失败",content:"一个动态不能同时发布视频和图片哦~"})}else if(this.videoFiles.length>0){if(!(1==e.isVerify&&e.vip&&e.vip.remainDays>0))return void uni.showModal({title:"发布失败",content:"只有实名认证并且为vip用户才能发布视频哦~"});t=1,s=this.videoFiles.length,i=this.videoFiles}if(s<1)return void this.publishArticle(this.articleText,o,this.privateSelect,this.isAnonymity,this.labelSelectIds);let r=await request({data:{method:"GET",group:"activity",action:"publish/getToken",data:{sum:s},header:{"content-type":"application/x-www-form-urlencoded"}}});r.data.code===REQUEST_SUCCEEDED_CODE?(n=r.data.data,formatAppLog("log","at pages/publish/publish.vue:721",n),n.forEach((e=>{o.push(e.fileName)})),i.forEach((async(e,s)=>{uni.uploadFile({url:UploadUrl,filePath:e.url,name:"file",formData:{key:n[s].fileName,token:aes.decrypt(n[s].token)},success(e){formatAppLog("log","at pages/publish/publish.vue:744",e),s===i.length-1&&a.publishArticle(a.articleText,o,a.privateSelect,a.isAnonymity,a.labelSelectIds,t)}})}))):uni.showToast({title:"没有权限，请先登录",icon:"none"})},async publishArticle(e,t,o,i,a,n=0){let s=await request({data:{method:"POST",group:"activity",action:"publish",data:{text:e,pic:JSON.stringify(t),visibility:o,isAnonymity:i,labelIds:a.length>0?JSON.stringify(a):"",video:n},header:{"content-type":"application/x-www-form-urlencoded"}}});uni.hideLoading(),this.buttonIsLoading=!1,s.data.code===REQUEST_SUCCEEDED_CODE&&(uni.showToast({title:"发布成功",icon:"success"}),this.articleText="",this.imageFiles=[],this.labelSelect=[],this.labelSelectIds=[],this.videoFiles=[],uni.switchTab({url:"/pages/index/index"}))}}};function _sfc_render$S(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-file-picker"),__easycom_1$c),l=resolveEasycom(vue.resolveDynamicComponent("uni-tag"),__easycom_2$5),c=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h),u=resolveEasycom(vue.resolveDynamicComponent("emoji"),__easycom_3$3),d=resolveEasycom(vue.resolveDynamicComponent("uni-transition"),__easycom_3$6),m=resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"),__easycom_1$b),h=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_2$7),p=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"publish-updates-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"发布动态")])),_:1}),vue.createElementVNode("textarea",{class:"article-text-input",maxlength:"500",placeholder:"平凡的瞬间也值得被放大",value:a.articleText,onInput:t[1]||(t[1]=(...e)=>n.onTextareaInput&&n.onTextareaInput(...e))},null,40,["value"]),a.imageFiles.length>0?(vue.openBlock(),vue.createBlock(r,{key:0,onSelect:n.onImageFilesSelect,modelValue:a.imageFiles,"onUpdate:modelValue":t[2]||(t[2]=e=>a.imageFiles=e),fileMediatype:"image",mode:"grid",limit:"9"},null,8,["onSelect","modelValue"])):vue.createCommentVNode("",!0),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.videoFiles,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t,class:"video_content"},[vue.createElementVNode("view",{class:"delete_video_icon"},[vue.createElementVNode("view",{style:{fontSize:"30rpx",color:"#fff"},class:"iconfont icon-bg-close"})]),vue.createElementVNode("video",{id:`video_${t}`,src:e.url,style:{width:"90vw",height:"50vw"},"initial-time":"0",controls:""},null,8,["id","src"])])))),128)),vue.createElementVNode("view",{class:"labels-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.labelSelect,((e,t)=>(vue.openBlock(),vue.createBlock(l,{class:"activity-label",size:"small",key:e.id,text:`#${e.content}`,circle:!0},null,8,["text"])))),128))]),vue.createElementVNode("view",{class:"publish-footer"},[a.isShowAnonymity?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"is-anonymity"},[vue.createElementVNode("view",{class:"anonymity-text"},"咕咕"),vue.createElementVNode("switch",{checked:1==a.isAnonymity,onClick:t[3]||(t[3]=e=>n.onSwitchClick()),color:"#49faeb",class:"anonymity-switch"},null,8,["checked"])])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"footer-add-label-content"},[vue.createElementVNode("view",{class:"footer-add-label",onClick:t[4]||(t[4]=e=>n.onAddLabelClick())},[vue.createElementVNode("view",{class:"iconfont icon-huati",style:{"font-size":"30rpx",color:"#808080"}}),vue.createElementVNode("view",null,"添加标签")])]),vue.createElementVNode("view",{class:"footer-privacy-settings",onClick:t[5]||(t[5]=e=>n.onPrivaterChooseClick())},[vue.createTextVNode(vue.toDisplayString(a.privateSettingGroup[a.privateSelect])+" ",1),vue.createVNode(c,{color:"#b4b4b4",type:"right",size:"20"})]),vue.createElementVNode("view",{class:"other-send-option"},[vue.createElementVNode("view",{class:"option-image-content"},[vue.createElementVNode("image",{onClick:t[6]||(t[6]=e=>n.onImageIconClick()),class:"send-option-image",mode:"aspectFill",src:"/static/svgs/chat-photo.svg"})]),vue.createElementVNode("view",{class:"option-image-content"},[vue.createElementVNode("image",{onClick:t[7]||(t[7]=e=>n.onCameraIconClick()),class:"send-option-image",mode:"aspectFill",src:"/static/svgs/chat-camera.svg"})]),vue.createElementVNode("view",{class:"option-image-content"},[vue.createElementVNode("image",{onClick:t[8]||(t[8]=e=>n.onVideoIconClick()),class:"send-option-image",mode:"aspectFill",src:"/static/svgs/video.svg"})]),vue.createElementVNode("view",{class:"option-image-content"},[vue.createElementVNode("image",{onClick:t[9]||(t[9]=e=>n.onEmojiIconClick()),class:"send-option-image",mode:"aspectFill",src:"/static/svgs/smile.svg"})]),vue.createElementVNode("view",{class:"text-lenth-count"},[vue.createElementVNode("text",null,vue.toDisplayString(a.articleText.length)+"/500",1)])]),vue.createElementVNode("button",{onClick:t[10]||(t[10]=e=>n.prepareBeforePublic()),loading:a.buttonIsLoading,class:"publish-button"},"发布动态",8,["loading"])])]),vue.createVNode(d,{class:"emoji-picker-content","mode-class":"slide-bottom",show:a.showEmojiPicker},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"emoji-picker"},[vue.createElementVNode("view",{class:"emoji-picker-head"},[vue.createElementVNode("view",{class:"emoji-picker-head-text"},"选择表情"),vue.createVNode(c,{onClick:t[11]||(t[11]=e=>n.onEmojiPickerCloseClick()),customPrefix:"customicons",type:"closeempty",color:"#808080",size:"25"})]),vue.createVNode(u,{onSetEmoj:n.setEmoj},null,8,["onSetEmoj"])])])),_:1},8,["show"]),vue.createVNode(h,{backgroundColor:"#ffffff",ref:"labelPopup",type:"bottom"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"choose-labels-content"},[vue.createElementVNode("view",{class:"search-content"},[vue.createVNode(m,{value:a.labelSearchText,class:"search-input",placeholder:"搜索标签",cancelButton:"none",onInput:n.onSearchInput,onConfirm:t[12]||(t[12]=e=>n.onSearchConfirm())},null,8,["value","onInput"]),vue.createElementVNode("view",{class:"search-button"},[vue.createElementVNode("button",{style:{"background-color":"#4eccb8",color:"#fff"},onClick:t[13]||(t[13]=e=>n.onSearchConfirm()),size:"mini"},"搜索")])]),vue.createElementVNode("view",{class:"activity-labels-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.labels,(e=>(vue.openBlock(),vue.createBlock(l,{class:"activity-label",type:-1!=a.labelSelectIds.indexOf(e.id)?"primary":"default",text:e.content,size:"default",circle:!0,key:e.id,onClick:t=>n.onChooseLabelClick(e)},null,8,["type","text","onClick"])))),128)),vue.createElementVNode("view",{class:"activity-label",style:{display:"flex",color:"#808080"},onClick:t[14]||(t[14]=e=>n.onRefreshLabelClick())},[vue.createElementVNode("view",{style:{fontSize:"25px"},class:"iconfont icon-sync"}),vue.createElementVNode("text",null,"换一批")])])])])),_:1},512),vue.createVNode(p,{ref:"privateSelectPopup",needHead:!0,title:"权限设置"},{default:vue.withCtx((()=>[vue.createElementVNode("radio-group",{onChange:t[15]||(t[15]=(...e)=>n.onPrivaterAdioChange&&n.onPrivaterAdioChange(...e)),class:"private-select-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.privateSettingGroup,((e,t)=>(vue.openBlock(),vue.createElementBlock("label",{class:"private-select-item",key:e},[vue.createElementVNode("view",{class:"private-text"},vue.toDisplayString(e),1),vue.createElementVNode("view",{class:"private-radio"},[vue.createElementVNode("radio",{color:"#4eccb8",value:e,checked:t===a.privateSelect},null,8,["value","checked"])])])))),128))],32),vue.createElementVNode("view",{style:{width:"100%",textAlign:"center",color:"#a1a1a1"}},"咕咕状态下只能所有人可见哦~")])),_:1},512)])}var PagesPublishPublish=_export_sfc(_sfc_main$T,[["render",_sfc_render$S]]);const _sfc_main$S={data:()=>({signInfo:{signInDays:0,signInToday:!1,getGiftToday:!1}}),methods:{onNarLeftClick(){uni.navigateBack({delta:1})},async onSignButtonClick(){if(this.signInfo.signInDays>=7)this.signInfo.getGiftToday?uni.showToast({title:"奖品已领取",icon:"none"}):getSignGift();else if(!this.signInfo.signInToday){await signIn()&&(this.signInfo=await getSignInfo())}}},async mounted(){this.signInfo=await getSignInfo(),formatAppLog("log","at pages/bugu-secondary-page/sign-in-lottery/sign-in-lottery.vue:163","this.signInfo",this.signInfo)}};async function signIn(){let e=await request({data:{method:"PUT",group:"signIn",action:"signIn",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});return e.data.code===REQUEST_SUCCEEDED_CODE?(uni.showToast({title:"签到成功",icon:"success"}),!0):(formatAppLog("log","at pages/bugu-secondary-page/sign-in-lottery/sign-in-lottery.vue:190","signInfail",e.data),!1)}async function getSignInfo(){let e=await request({data:{method:"GET",group:"signIn",action:"info",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});if(e.data.code===REQUEST_SUCCEEDED_CODE){return e.data.data}return formatAppLog("log","at pages/bugu-secondary-page/sign-in-lottery/sign-in-lottery.vue:214","signInfoFail",e.data),{signInDays:0,signInToday:!1,getGiftToday:!1}}async function getSignGift(){let e=await request({data:{method:"POST",group:"signIn",action:"getGift",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});e.data.code===REQUEST_SUCCEEDED_CODE?(uni.showToast({title:"奖品领取成功"}),formatAppLog("log","at pages/bugu-secondary-page/sign-in-lottery/sign-in-lottery.vue:241","getGiftSuccess",e.data)):formatAppLog("log","at pages/bugu-secondary-page/sign-in-lottery/sign-in-lottery.vue:243","getGiftFail",e.data)}function _sfc_render$R(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"签到抽奖")])),_:1}),vue.createElementVNode("view",{class:"sign-in-lottery-content"},[vue.createElementVNode("view",{class:"lottery-title"}," daily attendance "),vue.createElementVNode("view",{class:"lottery-tips"}," 每天签到领取vip! "),vue.createElementVNode("view",{class:"sign-process"},[vue.createElementVNode("view",{class:"sign-process-compelete",style:vue.normalizeStyle({width:a.signInfo.signInDays/7*100+"%"})},null,4),vue.createElementVNode("view",{class:"sign-process-text"}," 已连续签到"+vue.toDisplayString(a.signInfo.signInDays)+"天 ",1)]),vue.createElementVNode("view",{class:"sign-blocks-content"},[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList([1,2,3,4,5,6],((e,t)=>vue.createElementVNode("view",{class:"sign-block-conetnt",key:t,style:vue.normalizeStyle({alignItems:(t+1)%3==2?"center":(t+1)%3==0?"flex-end":"flex-start",justifyContent:(t+1)%3==2?"center":(t+1)%3==0?"flex-end":"left"})},[vue.createElementVNode("view",{class:"sign-block",style:vue.normalizeStyle({backgroundImage:t<a.signInfo.signInDays?"linear-gradient(to bottom, #42e1e3, #40e399);":"#ffe6cb"})},[vue.createElementVNode("view",{class:"sign-block-number-bg"},vue.toDisplayString(t+1),1),vue.createElementVNode("view",{class:"sign-block-text"}," 第"+vue.toDisplayString(t+1)+"天 ",1)],4)],4))),64)),vue.createElementVNode("view",{class:"sign-block-conetnt",style:{width:"100%"}},[vue.createElementVNode("view",{class:"sign-block",style:vue.normalizeStyle({backgroundImage:a.signInfo.signInDays>=7?"linear-gradient(to bottom, #42e1e3, #40e399);":"#ffe6cb",width:"100%"})},[vue.createElementVNode("view",{class:"sign-block-number-bg"},[vue.createElementVNode("image",{class:"lucky-draw-icon",mode:"aspectFill",src:"../../../static/svgs/medal.svg"},null,8,["src"])]),vue.createElementVNode("view",{class:"sign-block-text"}," 第7天 ")],4)])]),vue.createElementVNode("view",{class:"sign-rules"},[vue.createElementVNode("view",{class:"rule-item"},[vue.createElementVNode("view",{class:"emphasis-esymbol"}),vue.createElementVNode("view",{class:"rule-item-text"},"签到每天从凌晨开始")]),vue.createElementVNode("view",{class:"rule-item"},[vue.createElementVNode("view",{class:"emphasis-esymbol"}),vue.createElementVNode("view",{class:"rule-item-text"},"漏签需要重新开始哦")]),vue.createElementVNode("view",{class:"rule-item"},[vue.createElementVNode("view",{class:"emphasis-esymbol"}),vue.createElementVNode("view",{class:"rule-item-text"},"连续签到7天获取一个月VIP服务")])]),vue.createElementVNode("view",{class:"sign-button",onClick:t[1]||(t[1]=e=>n.onSignButtonClick())},vue.toDisplayString(a.signInfo.signInDays>=7?a.signInfo.getGiftToday?"奖品已经领取":"领取奖品":a.signInfo.signInToday?"今日已签到":"签到"),1)])])}var PagesBuguSecondaryPageSignInLotterySignInLottery=_export_sfc(_sfc_main$S,[["render",_sfc_render$R]]);const _sfc_main$R={data:()=>({isLoading:!1,agreest:!1,MainColor:MainColor}),methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onOtherLoginTextClick(){uni.navigateTo({url:"./account-login"})},onCheckBoxClick(){this.agreest=!this.agreest,formatAppLog("log","at pages/login/login.vue:100","this.agreest",this.agreest)},onUserProtocolClick(){uni.navigateTo({url:"/pages/login/bugu-use-protocol/bugu-use-protocol"})},onPrivacyPolicyClick(){uni.navigateTo({url:"/pages/login/bugu-privacy-policy/bugu-privacy-policy"})},onLoginButtonClidk(){if(!this.isLoading)if(this.agreest){let e=this;uni.login({provider:"weixin",success:function(t){if(t.code){e.code=t.code,formatAppLog("log","at pages/login/login.vue:132",t.code);try{let o=uni.getStorageSync("BeInvitedcode");e.tryToLogin(t.code,o),uni.setStorage({key:"BeInvitedcode",data:null})}catch{e.tryToLogin(t.code)}}else formatAppLog("log","at pages/login/login.vue:145","登录失败！"+t.errMsg)}})}else uni.showToast({title:"请先同意《用户协议》和《隐私政策》",icon:"none"})},async tryToLogin(e,t){uni.showLoading({title:"正在登陆"}),this.isLoading=!0;try{let o=await request({data:{method:"GET",group:"user",action:"login",data:t?{inviteCode:t,code:e}:{code:e},header:{"content-type":"application/x-www-form-urlencoded"}}});this.isLoading=!1,o.data.code===REQUEST_SUCCEEDED_CODE?(formatAppLog("log","at pages/login/login.vue:188","登录成功"),await uni.setStorage({key:"token",data:o.data.data.token}),await uni.setStorage({key:"userInfo",data:o.data.data.userInfo}),formatAppLog("log","at pages/login/login.vue:197",o.data.data),uni.showToast({title:"登录成功",icon:"success"}),uni.$emit(REFRESH_USERINFO,{needRefresh:!0}),uni.navigateBack({})):formatAppLog("log","at pages/login/login.vue:205",o)}catch{uni.showToast({title:"登录失败，请稍后再试",icon:"none"})}}}};function _sfc_render$Q(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1);return vue.openBlock(),vue.createElementBlock("view",{class:"body-box"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"登录")])),_:1}),vue.createElementVNode("view",{class:"logo-content"},[vue.createElementVNode("view",{class:"login-logo-icon"},[vue.createElementVNode("image",{class:"login-logo-image",style:{height:"180rpx",width:"180rpx",borderRadius:"60rpx"},src:"../../static/imgs/logo.png",mode:"aspectFit"},null,8,["src"])]),vue.createElementVNode("view",{class:"login-logo-image-content"},[vue.createElementVNode("image",{class:"login-logo-image",style:{height:"50rpx",width:"220rpx"},src:"../../static/imgs/logo-text.png"},null,8,["src"])])]),vue.createElementVNode("view",{class:"login-form-button-content"},[vue.createElementVNode("view",{class:"login-form-button",onClick:t[1]||(t[1]=e=>n.onLoginButtonClidk())},[vue.createElementVNode("view",{class:"login-form-button-text"},vue.toDisplayString(a.isLoading?"正在登陆":"微信一键登录"),1)])]),vue.createElementVNode("view",{class:"login-otherlogin",onClick:t[2]||(t[2]=e=>n.onOtherLoginTextClick())},"其他登录方式"),vue.createElementVNode("view",{class:"login-useragreement-content"},[vue.createElementVNode("checkbox",{color:a.MainColor,class:"login-useragreement",onClick:t[3]||(t[3]=e=>n.onCheckBoxClick()),checked:a.agreest},null,8,["color","checked"]),vue.createTextVNode("已阅读并同意"),vue.createElementVNode("text",{onClick:t[4]||(t[4]=vue.withModifiers(((...e)=>n.onUserProtocolClick&&n.onUserProtocolClick(...e)),["stop"])),class:"login-agreement1"},"《用户协议》"),vue.createTextVNode("和"),vue.createElementVNode("text",{onClick:t[5]||(t[5]=vue.withModifiers(((...e)=>n.onPrivacyPolicyClick&&n.onPrivacyPolicyClick(...e)),["stop"])),class:"login-agreement2"},"《隐私政策》")]),vue.createElementVNode("view",{class:"hbutliving-content"},[vue.createElementVNode("view",{class:"hbutliving-logo"},[vue.createElementVNode("image",{class:"login-logo-image",style:{height:"60rpx",width:"60rpx"},src:"../../static/imgs/hbutliving-logo.png"},null,8,["src"])]),vue.createElementVNode("view",{class:"hbutliving-text"}," 湖工Living 出品 ")])])}var PagesLoginLogin=_export_sfc(_sfc_main$R,[["render",_sfc_render$Q]]);const _sfc_main$Q={name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm"],model:{prop:"modelValue",event:"update:modelValue"},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:String,placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:15},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!0},passwordIcon:{type:Boolean,default:!0},styles:{type:Object,default:()=>({color:"#333",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,errMsg:"",val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1}),computed:{msg(){return this.errorMessage||this.errMsg},inputMaxlength(){return Number(this.maxlength)}},watch:{value(e){this.errMsg&&(this.errMsg=""),this.val=e,this.form&&this.formItem&&!this.is_reset&&(this.is_reset=!1,this.formItem.setValue(e))},modelValue(e){this.errMsg&&(this.errMsg=""),this.val=e,this.form&&this.formItem&&!this.is_reset&&(this.is_reset=!1,this.formItem.setValue(e))},focus(e){this.$nextTick((()=>{this.focused=this.focus}))}},created(){this.value||(this.val=this.modelValue),this.modelValue||(this.val=this.value),this.form=this.getForm("uniForms"),this.formItem=this.getForm("uniFormsItem"),this.form&&this.formItem&&this.formItem.name&&(this.is_reset||(this.is_reset=!1,this.formItem.setValue(this.val)),this.rename=this.formItem.name,this.form.inputChildrens.push(this))},mounted(){this.$nextTick((()=>{this.focused=this.focus}))},methods:{init(){},onClickIcon(e){this.$emit("iconClick",e)},getForm(e="uniForms"){let t=this.$parent,o=t.$options.name;for(;o!==e;){if(t=t.$parent,!t)return!1;o=t.$options.name}return t},onEyes(){this.showPassword=!this.showPassword},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(e){this.$emit("focus",e)},onBlur(e){e.detail.value,this.$emit("blur",e)},onConfirm(e){this.$emit("confirm",e.detail.value)},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue","")},fieldClick(){this.$emit("click")},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}};function _sfc_render$P(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["uni-easyinput",{"uni-easyinput-error":n.msg}]),style:vue.normalizeStyle({color:o.inputBorder&&n.msg?"#e43d33":o.styles.color})},[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-easyinput__content",{"is-input-border":o.inputBorder,"is-input-error-border":o.inputBorder&&n.msg,"is-textarea":"textarea"===o.type,"is-disabled":o.disabled}]),style:vue.normalizeStyle({"border-color":o.inputBorder&&n.msg?"#dd524d":o.styles.borderColor,"background-color":o.disabled?o.styles.disableColor:""})},[o.prefixIcon?(vue.openBlock(),vue.createBlock(s,{key:0,class:"content-clear-icon",type:o.prefixIcon,color:"#c0c4cc",onClick:t[0]||(t[0]=e=>n.onClickIcon("prefix"))},null,8,["type"])):vue.createCommentVNode("",!0),"textarea"===o.type?(vue.openBlock(),vue.createElementBlock("textarea",{key:1,class:vue.normalizeClass(["uni-easyinput__content-textarea",{"input-padding":o.inputBorder}]),name:o.name,value:a.val,placeholder:o.placeholder,placeholderStyle:o.placeholderStyle,disabled:o.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:n.inputMaxlength,focus:a.focused,autoHeight:o.autoHeight,onInput:t[1]||(t[1]=(...e)=>n.onInput&&n.onInput(...e)),onBlur:t[2]||(t[2]=(...e)=>n.onBlur&&n.onBlur(...e)),onFocus:t[3]||(t[3]=(...e)=>n.onFocus&&n.onFocus(...e)),onConfirm:t[4]||(t[4]=(...e)=>n.onConfirm&&n.onConfirm(...e))},null,42,["name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight"])):(vue.openBlock(),vue.createElementBlock("input",{key:2,type:"password"===o.type?"text":o.type,class:"uni-easyinput__content-input",style:vue.normalizeStyle({"padding-right":"password"===o.type||o.clearable||o.prefixIcon?"":"10px","padding-left":o.prefixIcon?"":"10px"}),name:o.name,value:a.val,password:!a.showPassword&&"password"===o.type,placeholder:o.placeholder,placeholderStyle:o.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:o.disabled,maxlength:n.inputMaxlength,focus:a.focused,confirmType:o.confirmType,onFocus:t[5]||(t[5]=(...e)=>n.onFocus&&n.onFocus(...e)),onBlur:t[6]||(t[6]=(...e)=>n.onBlur&&n.onBlur(...e)),onInput:t[7]||(t[7]=(...e)=>n.onInput&&n.onInput(...e)),onConfirm:t[8]||(t[8]=(...e)=>n.onConfirm&&n.onConfirm(...e))},null,44,["type","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType"])),"password"===o.type&&o.passwordIcon?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:3},[""!=a.val?(vue.openBlock(),vue.createBlock(s,{key:0,class:vue.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===o.type}]),type:a.showPassword?"eye-slash-filled":"eye-filled",size:18,color:"#c0c4cc",onClick:n.onEyes},null,8,["class","type","onClick"])):vue.createCommentVNode("",!0)],64)):o.suffixIcon?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:4},[o.suffixIcon?(vue.openBlock(),vue.createBlock(s,{key:0,class:"content-clear-icon",type:o.suffixIcon,color:"#c0c4cc",onClick:t[9]||(t[9]=e=>n.onClickIcon("suffix"))},null,8,["type"])):vue.createCommentVNode("",!0)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:5},[o.clearable&&a.val&&!o.disabled?(vue.openBlock(),vue.createBlock(s,{key:0,class:vue.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===o.type}]),type:"clear",size:o.clearSize,color:"#c0c4cc",onClick:n.onClear},null,8,["class","size","onClick"])):vue.createCommentVNode("",!0)],64)),vue.renderSlot(e.$slots,"right",{},void 0,!0)],6)],6)}var __easycom_1$a=_export_sfc(_sfc_main$Q,[["render",_sfc_render$P],["__scopeId","data-v-704c13ee"]]);const _sfc_main$P={name:"uniFormsItem",props:{custom:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},name:String,required:Boolean,validateTrigger:{type:String,default:""},leftIcon:String,iconColor:{type:String,default:"#606266"},label:String,labelWidth:{type:[Number,String],default:""},labelAlign:{type:String,default:""},labelPosition:{type:String,default:""},errorMessage:{type:[String,Boolean],default:""},rules:{type:Array,default:()=>[]}},data:()=>({errorTop:!1,errorBottom:!1,labelMarginBottom:"",errorWidth:"",errMsg:"",val:"",labelPos:"",labelWid:"",labelAli:"",showMsg:"undertext",border:!1,isFirstBorder:!1,isArray:!1,arrayField:""}),computed:{msg(){return this.errorMessage||this.errMsg},fieldStyle(){let e={};return"top"==this.labelPos&&(e.padding="0 0",this.labelMarginBottom="6px"),"left"==this.labelPos&&!1!==this.msg&&""!=this.msg?(e.paddingBottom="0px",this.errorBottom=!0,this.errorTop=!1):"top"==this.labelPos&&!1!==this.msg&&""!=this.msg?(this.errorBottom=!1,this.errorTop=!0):(this.errorTop=!1,this.errorBottom=!1),e},justifyContent(){return"left"===this.labelAli?"flex-start":"center"===this.labelAli?"center":"right"===this.labelAli?"flex-end":void 0},labelLeft(){return("left"===this.labelPos?parseInt(this.labelWid):0)+"px"}},watch:{validateTrigger(e){this.formTrigger=e}},created(){this.form=this.getForm(),this.group=this.getForm("uniGroup"),this.formRules=[],this.formTrigger=this.validateTrigger,this.name&&-1!==this.name.indexOf("[")&&-1!==this.name.indexOf("]")&&(this.isArray=!0,this.arrayField=this.name,this.form.formData[this.name]=this.form._getValue(this.name,""))},mounted(){this.form&&this.form.childrens.push(this),this.init()},unmounted(){this.__isUnmounted=!0,this.unInit()},methods:{init(){if(this.form){let{formRules:e,validator:t,formData:o,value:i,labelPosition:a,labelWidth:n,labelAlign:s,errShowType:r}=this.form;this.labelPos=this.labelPosition?this.labelPosition:a,this.label?this.labelWid=this.labelWidth?this.labelWidth:n||70:this.labelWid=this.labelWidth?this.labelWidth:n||"auto",this.labelWid&&"auto"!==this.labelWid&&(this.labelWid+="px"),this.labelAli=this.labelAlign?this.labelAlign:s,this.form.isFirstBorder||(this.form.isFirstBorder=!0,this.isFirstBorder=!0),this.group&&(this.group.isFirstBorder||(this.group.isFirstBorder=!0,this.isFirstBorder=!0)),this.border=this.form.border,this.showMsg=r;let l=this.isArray?this.arrayField:this.name;if(!l)return;e&&this.rules.length>0&&(e[l]||(e[l]={rules:this.rules}),t.updateSchema(e)),this.formRules=e[l]||{},this.validator=t}else this.labelPos=this.labelPosition||"left",this.labelWid=this.labelWidth||65,this.labelAli=this.labelAlign||"left"},unInit(){this.form&&this.form.childrens.forEach(((e,t)=>{e===this&&(this.form.childrens.splice(t,1),delete this.form.formData[e.name])}))},getForm(e="uniForms"){let t=this.$parent,o=t.$options.name;for(;o!==e;){if(t=t.$parent,!t)return!1;o=t.$options.name}return t},clearValidate(){this.errMsg=""},setValue(e){let t=this.isArray?this.arrayField:this.name;if(t){if(this.errMsg&&(this.errMsg=""),this.form.formData[t]=this.form._getValue(t,e),!this.formRules||(this.formRules,"{}"===JSON.stringify(this.formRules)))return;this.triggerCheck(this.form._getValue(this.name,e))}},async triggerCheck(e,t){if(this.errMsg="",!this.validator||0===Object.keys(this.formRules).length)return;const o=this.isRequired(this.formRules.rules||[]);let i=this.isTrigger(this.formRules.validateTrigger,this.validateTrigger,this.form.validateTrigger),a=null;if(i||t){let t=this.isArray?this.arrayField:this.name;a=await this.validator.validateUpdate({[t]:e},this.form.formData)}o||void 0!==e&&""!==e||(a=null);const n=this.form.inputChildrens.find((e=>e.rename===this.name));return(i||t)&&a&&a.errorMessage?(n&&(n.errMsg=a.errorMessage),"toast"===this.form.errShowType&&uni.showToast({title:a.errorMessage||"校验错误",icon:"none"}),"modal"===this.form.errShowType&&uni.showModal({title:"提示",content:a.errorMessage||"校验错误"})):n&&(n.errMsg=""),this.errMsg=a?a.errorMessage:"",this.form.validateCheck(a||null),a||null},isTrigger:(e,t,o)=>!("submit"===e||!e)||void 0===e&&("bind"===t||!t&&"bind"===o),isRequired(e){let t=!1;for(let o=0;o<e.length;o++){if(e[o].required){t=!0;break}}return t}}};function _sfc_render$O(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["uni-forms-item",{"uni-forms-item--border":a.border,"is-first-border":a.border&&a.isFirstBorder,"uni-forms-item-error":n.msg}])},[vue.createElementVNode("view",{class:"uni-forms-item__box"},[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-forms-item__inner",["is-direction-"+a.labelPos]])},[vue.createElementVNode("view",{class:"uni-forms-item__label",style:vue.normalizeStyle({width:a.labelWid,justifyContent:n.justifyContent})},[vue.renderSlot(e.$slots,"label",{},(()=>[o.required?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"is-required"},"*")):vue.createCommentVNode("",!0),o.leftIcon?(vue.openBlock(),vue.createBlock(s,{key:1,class:"label-icon",size:"16",type:o.leftIcon,color:o.iconColor},null,8,["type","color"])):vue.createCommentVNode("",!0),vue.createElementVNode("text",{class:"label-text"},vue.toDisplayString(o.label),1),o.label?(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"label-seat"})):vue.createCommentVNode("",!0)]),!0)],4),vue.createElementVNode("view",{class:vue.normalizeClass(["uni-forms-item__content",{"is-input-error-border":n.msg}])},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],2)],2),n.msg?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass(["uni-error-message",{"uni-error-msg--boeder":a.border}]),style:vue.normalizeStyle({paddingLeft:n.labelLeft})},[vue.createElementVNode("text",{class:"uni-error-message-text"},vue.toDisplayString("undertext"===a.showMsg?n.msg:""),1)],6)):vue.createCommentVNode("",!0)])],2)}var __easycom_2$4=_export_sfc(_sfc_main$P,[["render",_sfc_render$O],["__scopeId","data-v-30762ac2"]]),pattern={email:/^\S+?@\S+?\.\S+?$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")};const FORMAT_MAPPING={int:"integer",bool:"boolean",double:"number",long:"number",password:"string"};function formatMessage(e,t=""){["label"].forEach((t=>{void 0===e[t]&&(e[t]="")}));let o=t;for(let i in e){let t=new RegExp("{"+i+"}");o=o.replace(t,e[i])}return o}function isEmptyValue(e,t){return null==e||("string"==typeof e&&!e||(!(!Array.isArray(e)||e.length)||"object"===t&&!Object.keys(e).length))}const types={integer:e=>types.number(e)&&parseInt(e,10)===e,string:e=>"string"==typeof e,number:e=>!isNaN(e)&&"number"==typeof e,boolean:function(e){return"boolean"==typeof e},float:function(e){return types.number(e)&&!types.integer(e)},array:e=>Array.isArray(e),object:e=>"object"==typeof e&&!types.array(e),date:e=>e instanceof Date,timestamp(e){return!(!this.integer(e)||Math.abs(e).toString().length>16)},file:e=>"string"==typeof e.url,email:e=>"string"==typeof e&&!!e.match(pattern.email)&&e.length<255,url:e=>"string"==typeof e&&!!e.match(pattern.url),pattern(t,o){try{return new RegExp(t).test(o)}catch(e){return!1}},method:e=>"function"==typeof e,idcard:e=>"string"==typeof e&&!!e.match(pattern.idcard),"url-https"(e){return this.url(e)&&e.startsWith("https://")},"url-scheme":e=>e.startsWith("://"),"url-web":e=>!1};class RuleValidator{constructor(e){this._message=e}async validateRule(e,t,o,i,a){var n=null;let s=t.rules;if(s.findIndex((e=>e.required))<0){if(null==o)return n;if("string"==typeof o&&!o.length)return n}var r=this._message;if(void 0===s)return r.default;for(var l=0;l<s.length;l++){let c=s[l],u=this._getValidateType(c);if(Object.assign(c,{label:t.label||`["${e}"]`}),RuleValidatorHelper[u]&&null!=(n=RuleValidatorHelper[u](c,o,r)))break;if(c.validateExpr){let e=Date.now();if(!1===c.validateExpr(o,a,e)){n=this._getMessage(c,c.errorMessage||this._message.default);break}}if(c.validateFunction&&null!==(n=await this.validateFunction(c,o,i,a,u)))break}return null!==n&&(n=r.TAG+n),n}async validateFunction(t,o,i,a,n){let s=null;try{let e=null;const r=await t.validateFunction(t,o,a||i,(t=>{e=t}));(e||"string"==typeof r&&r||!1===r)&&(s=this._getMessage(t,e||r,n))}catch(e){s=this._getMessage(t,e.message,n)}return s}_getMessage(e,t,o){return formatMessage(e,t||e.errorMessage||this._message[o]||t.default)}_getValidateType(e){var t="";return e.required?t="required":e.format?t="format":e.arrayType?t="arrayTypeFormat":e.range?t="range":void 0!==e.maximum||void 0!==e.minimum?t="rangeNumber":void 0!==e.maxLength||void 0!==e.minLength?t="rangeLength":e.pattern?t="pattern":e.validateFunction&&(t="validateFunction"),t}}const RuleValidatorHelper={required:(e,t,o)=>e.required&&isEmptyValue(t,e.format||typeof t)?formatMessage(e,e.errorMessage||o.required):null,range(e,t,o){const{range:i,errorMessage:a}=e;let n=new Array(i.length);for(let r=0;r<i.length;r++){const e=i[r];types.object(e)&&void 0!==e.value?n[r]=e.value:n[r]=e}let s=!1;return Array.isArray(t)?s=new Set(t.concat(n)).size===n.length:n.indexOf(t)>-1&&(s=!0),s?null:formatMessage(e,a||o.enum)},rangeNumber(e,t,o){if(!types.number(t))return formatMessage(e,e.errorMessage||o.pattern.mismatch);let{minimum:i,maximum:a,exclusiveMinimum:n,exclusiveMaximum:s}=e,r=n?t<=i:t<i,l=s?t>=a:t>a;return void 0!==i&&r?formatMessage(e,e.errorMessage||o.number[n?"exclusiveMinimum":"minimum"]):void 0!==a&&l?formatMessage(e,e.errorMessage||o.number[s?"exclusiveMaximum":"maximum"]):void 0!==i&&void 0!==a&&(r||l)?formatMessage(e,e.errorMessage||o.number.range):null},rangeLength(e,t,o){if(!types.string(t)&&!types.array(t))return formatMessage(e,e.errorMessage||o.pattern.mismatch);let i=e.minLength,a=e.maxLength,n=t.length;return void 0!==i&&n<i?formatMessage(e,e.errorMessage||o.length.minLength):void 0!==a&&n>a?formatMessage(e,e.errorMessage||o.length.maxLength):void 0!==i&&void 0!==a&&(n<i||n>a)?formatMessage(e,e.errorMessage||o.length.range):null},pattern:(e,t,o)=>types.pattern(e.pattern,t)?null:formatMessage(e,e.errorMessage||o.pattern.mismatch),format(e,t,o){var i=Object.keys(types),a=FORMAT_MAPPING[e.format]?FORMAT_MAPPING[e.format]:e.format||e.arrayType;return i.indexOf(a)>-1&&!types[a](t)?formatMessage(e,e.errorMessage||o.typeError):null},arrayTypeFormat(e,t,o){if(!Array.isArray(t))return formatMessage(e,e.errorMessage||o.typeError);for(let i=0;i<t.length;i++){const a=t[i];let n=this.format(e,a,o);if(null!==n)return n}return null}};class SchemaValidator extends RuleValidator{constructor(e,t){super(SchemaValidator.message),this._schema=e,this._options=t||null}updateSchema(e){this._schema=e}async validate(e,t){let o=this._checkFieldInSchema(e);return o||(o=await this.invokeValidate(e,!1,t)),o.length?o[0]:null}async validateAll(e,t){let o=this._checkFieldInSchema(e);return o||(o=await this.invokeValidate(e,!0,t)),o}async validateUpdate(e,t){let o=this._checkFieldInSchema(e);return o||(o=await this.invokeValidateUpdate(e,!1,t)),o.length?o[0]:null}async invokeValidate(e,t,o){let i=[],a=this._schema;for(let n in a){let s=a[n],r=await this.validateRule(n,s,e[n],e,o);if(null!=r&&(i.push({key:n,errorMessage:r}),!t))break}return i}async invokeValidateUpdate(e,t,o){let i=[];for(let a in e){let n=await this.validateRule(a,this._schema[a],e[a],e,o);if(null!=n&&(i.push({key:a,errorMessage:n}),!t))break}return i}_checkFieldInSchema(e){var t=Object.keys(e),o=Object.keys(this._schema);if(new Set(t.concat(o)).size===o.length)return"";var i=t.filter((e=>o.indexOf(e)<0));return[{key:"invalid",errorMessage:formatMessage({field:JSON.stringify(i)},SchemaValidator.message.TAG+SchemaValidator.message.defaultInvalid)}]}}function Message(){return{TAG:"",default:"验证错误",defaultInvalid:"提交的字段{field}在数据库中并不存在",validateFunction:"验证无效",required:"{label}必填",enum:"{label}超出范围",timestamp:"{label}格式无效",whitespace:"{label}不能为空",typeError:"{label}类型无效",date:{format:"{label}日期{value}格式无效",parse:"{label}日期无法解析,{value}无效",invalid:"{label}日期{value}无效"},length:{minLength:"{label}长度不能少于{minLength}",maxLength:"{label}长度不能超过{maxLength}",range:"{label}必须介于{minLength}和{maxLength}之间"},number:{minimum:"{label}不能小于{minimum}",maximum:"{label}不能大于{maximum}",exclusiveMinimum:"{label}不能小于等于{minimum}",exclusiveMaximum:"{label}不能大于等于{maximum}",range:"{label}必须介于{minimum}and{maximum}之间"},pattern:{mismatch:"{label}格式不匹配"}}}SchemaValidator.message=new Message;const _sfc_main$O={name:"uniForms",components:{},emits:["input","reset","validate","submit"],props:{value:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})},rules:{type:Object,default:()=>({})},validateTrigger:{type:String,default:""},labelPosition:{type:String,default:"left"},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:"left"},errShowType:{type:String,default:"undertext"},border:{type:Boolean,default:!1}},data:()=>({formData:{}}),computed:{dataValue(){return"{}"===JSON.stringify(this.modelValue)?this.value:this.modelValue}},watch:{rules(e){this.init(e)},labelPosition(){this.childrens.forEach((e=>{e.init()}))}},created(){getApp().$vm.$.appContext.config.globalProperties.binddata||(getApp().$vm.$.appContext.config.globalProperties.binddata=function(e,t,o){if(o)this.$refs[o].setValue(e,t);else{let o;for(let e in this.$refs){const t=this.$refs[e];if(t&&t.$options&&"uniForms"===t.$options.name){o=t;break}}if(!o)return formatAppLog("error","at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:152","当前 uni-froms 组件缺少 ref 属性");o.setValue(e,t)}}),this.unwatchs=[],this.childrens=[],this.inputChildrens=[],this.checkboxChildrens=[],this.formRules=[],this.init(this.rules)},methods:{init(e){0!==Object.keys(e).length?(this.formRules=e,this.validator=new SchemaValidator(e),this.registerWatch()):this.formData=this.dataValue},registerWatch(){this.unwatchs.forEach((e=>e())),this.childrens.forEach((e=>{e.init()})),Object.keys(this.dataValue).forEach((e=>{let t=this.$watch("dataValue."+e,(t=>{if(t)if("[object Object]"===t.toString())for(let o in t){let i=`${e}[${o}]`;this.formData[i]=this._getValue(i,t[o])}else this.formData[e]=this._getValue(e,t)}),{deep:!0,immediate:!0});this.unwatchs.push(t)}))},setRules(e){this.init(e)},setValue(e,t,o){let i=this.childrens.find((t=>t.name===e));return i?(t=this._getValue(i.name,t),this.formData[e]=t,i.val=t,i.triggerCheck(t,o)):null},resetForm(e){this.childrens.forEach((e=>{e.errMsg="";const t=this.inputChildrens.find((t=>t.rename===e.name));t&&(t.errMsg="",t.is_reset=!0,t.$emit("input",t.multiple?[]:""),t.$emit("update:modelValue",t.multiple?[]:""))})),this.childrens.forEach((e=>{e.name&&(this.formData[e.name]=this._getValue(e.name,""))})),this.$emit("reset",e)},validateCheck(e){null===e&&(e=null),this.$emit("validate",e)},async validateAll(e,t,o,i){let a,n=[];for(let l in e){const e=this.childrens.find((e=>e.name===l));e&&n.push(e)}i||"function"!=typeof o||(i=o),!i&&"function"!=typeof i&&Promise&&(a=new Promise(((e,t)=>{i=function(o,i){o?t(o):e(i)}})));let s=[],r={};if(this.validator)for(let l in n){const t=n[l];let o=t.isArray?t.arrayField:t.name;if(t.isArray){if(-1!==t.name.indexOf("[")&&-1!==t.name.indexOf("]")){const i=t.name.split("["),a=i[0],n=i[1].replace("]","");r[a]||(r[a]={}),r[a][n]=this._getValue(o,e[o])}}else r[o]=this._getValue(o,e[o]);const i=await t.triggerCheck(e[o],!0);if(i&&(s.push(i),"toast"===this.errShowType||"modal"===this.errShowType))break}else r=e;return Array.isArray(s)&&0===s.length&&(s=null),Array.isArray(o)&&o.forEach((e=>{r[e]=this.dataValue[e]})),"submit"===t?this.$emit("submit",{detail:{value:r,errors:s}}):this.$emit("validate",s),i&&"function"==typeof i&&i(s,r),a&&i?a:null},submitForm(){},submit(e,t,o){for(let i in this.dataValue){this.childrens.find((e=>e.name===i))&&void 0===this.formData[i]&&(this.formData[i]=this._getValue(i,this.dataValue[i]))}return o||formatAppLog("warn","at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:371","submit 方法即将废弃，请使用validate方法代替！"),this.validateAll(this.formData,"submit",e,t)},validate(e,t){return this.submit(e,t,!0)},validateField(e,t){e=[].concat(e);let o={};return this.childrens.forEach((t=>{-1!==e.indexOf(t.name)&&(o=Object.assign({},o,{[t.name]:this.formData[t.name]}))})),this.validateAll(o,"submit",[],t)},resetFields(){this.resetForm()},clearValidate(e){e=[].concat(e),this.childrens.forEach((t=>{const o=this.inputChildrens.find((e=>e.rename===t.name));(0===e.length||-1!==e.indexOf(t.name))&&(t.errMsg="",o&&(o.errMsg=""))}))},_getValue(e,t){const o=this.formRules[e]&&this.formRules[e].rules||[],i=o.find((e=>e.format&&this.type_filter(e.format))),a=o.find((e=>e.format&&"boolean"===e.format||"bool"===e.format));return i&&(t=isNaN(t)?t:""===t||null===t?null:Number(t)),a&&(t=!!t),t},type_filter:e=>"int"===e||"double"===e||"number"===e||"timestamp"===e}};function _sfc_render$N(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["uni-forms",{"uni-forms--top":!o.border}])},[vue.createElementVNode("form",{onSubmit:t[0]||(t[0]=vue.withModifiers(((...e)=>n.submitForm&&n.submitForm(...e)),["stop"])),onReset:t[1]||(t[1]=(...e)=>n.resetForm&&n.resetForm(...e))},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],32)],2)}var __easycom_3$2=_export_sfc(_sfc_main$O,[["render",_sfc_render$N],["__scopeId","data-v-248644e8"]]);const _sfc_main$N={data:()=>({username:"",password:"",agreest:!1,MainColor:MainColor}),methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onCheckBoxClick(){this.agreest=!this.agreest},onPasswordInput(e){this.password=e},onUsernameInput(e){this.username=e},onUserProtocolClick(){uni.navigateTo({url:"/pages/login/bugu-use-protocol/bugu-use-protocol"})},onPrivacyPolicyClick(){uni.navigateTo({url:"/pages/login/bugu-privacy-policy/bugu-privacy-policy"})},onLoginButtonClick(){this.username&&this.password?this.agreest?this.tryToLogin(this.username,this.password):uni.showToast({title:"请先同意用户协议和隐私政策",icon:"none"}):uni.showToast({title:"请先输入用户名或密码",icon:"none"})},async tryToLogin(e,t){uni.showLoading({title:"正在登陆"});try{let o=await request({data:{method:"POST",group:"user",action:"login/byPassword",data:{username:e,password:t},header:{"content-type":"application/x-www-form-urlencoded"}}});uni.hideLoading(),o.data.code===REQUEST_SUCCEEDED_CODE&&(formatAppLog("log","at pages/login/account-login.vue:166","登录成功"),await uni.setStorage({key:"token",data:o.data.data.token}),await uni.setStorage({key:"userInfo",data:o.data.data.userInfo}),formatAppLog("log","at pages/login/account-login.vue:175",o.data.data),uni.showToast({title:"登录成功",icon:"success"}),uni.$emit(REFRESH_USERINFO,{needRefresh:!0}),uni.navigateBack({delta:2}))}catch{uni.showToast({title:"登录失败，请稍后再试",icon:"none"})}}}};function _sfc_render$M(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"),__easycom_1$a),l=resolveEasycom(vue.resolveDynamicComponent("uni-forms-item"),__easycom_2$4),c=resolveEasycom(vue.resolveDynamicComponent("uni-forms"),__easycom_3$2);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"account-login-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"账号登录")])),_:1}),vue.createElementVNode("view",{class:"identify-title"},[vue.createTextVNode(" 密码登录 "),vue.createElementVNode("view",{style:{fontSize:"15px",marginTop:"20px",color:"red"}}," 暂未开放-请使用微信一键登录 ")]),vue.createElementVNode("view",{class:"input-content"},[vue.createVNode(c,{class:"login-form-atform"},{default:vue.withCtx((()=>[vue.createVNode(l,{required:"true",label:"用户名",name:"username"},{default:vue.withCtx((()=>[vue.createVNode(r,{value:a.username,onInput:n.onUsernameInput,class:"login-form-input",type:"text",placeholder:"请输入用户名"},null,8,["value","onInput"])])),_:1}),vue.createVNode(l,{required:"true",label:"密码",name:"password"},{default:vue.withCtx((()=>[vue.createVNode(r,{value:a.password,onInput:n.onPasswordInput,class:"login-form-input",type:"password",placeholder:"请输入密码"},null,8,["value","onInput"])])),_:1})])),_:1})]),vue.createElementVNode("view",{class:"login-bottom"},[vue.createElementVNode("view",{class:"login-useragreement-content"},[vue.createElementVNode("checkbox",{color:a.MainColor,class:"login-useragreement",onClick:t[1]||(t[1]=e=>n.onCheckBoxClick()),checked:a.agreest},null,8,["color","checked"]),vue.createTextVNode("已阅读并同意"),vue.createElementVNode("text",{onClick:t[2]||(t[2]=vue.withModifiers(((...e)=>n.onUserProtocolClick&&n.onUserProtocolClick(...e)),["stop"])),class:"login-agreement1"},"《用户协议》"),vue.createTextVNode("和"),vue.createElementVNode("text",{onClick:t[3]||(t[3]=vue.withModifiers(((...e)=>n.onPrivacyPolicyClick&&n.onPrivacyPolicyClick(...e)),["stop"])),class:"login-agreement2"},"《隐私政策》")]),vue.createElementVNode("button",{class:"login-form-button",onClick:t[4]||(t[4]=e=>n.onLoginButtonClick())},"登录")])])])}var PagesLoginAccountLogin=_export_sfc(_sfc_main$N,[["render",_sfc_render$M]]);const _sfc_main$M={data:()=>({isRefresh:!1,haveMoreData:!1,labelId:"",labelContent:"",articles:[],myId:0,editArticleItem:{},page:1}),async onLoad(e){this.labelId=e.labelId,this.labelContent=e.labelContent;let t=await getMyUserInfo();t&&(this.myId=t.id),this.getLabelArticles(this.labelId,this.page)},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onIsRefresh(){this.isRefresh=!0,this.page=1,this.getLabelArticles(this.labelId,this.page)},onScrolltolower(){this.haveMoreData&&(this.page=this.page+1,this.getLabelArticles(this.labelId,this.page))},onMoreClick(e){this.$refs.articleActionPopup.open(),this.editArticleItem=e},onPopupReportClick(e){uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.id}&objectType=${reportObjectType.activity}`}),this.$refs.articleActionPopup.close()},onPopupDeleteClick(e){let t=this;uni.showModal({title:"删除动态",content:"你确定要删除这个动态吗",success:async function(o){if(o.confirm){if(await deleteMyArticle(e.id)){let o=t.articles;for(let t=0;t<o.length;t++)if(o[t].id==e.id){o.splice(t,1);break}t.articles=o,t.$refs.articleActionPopup.close(),uni.showToast({title:"删除成功",icon:"success"})}}else formatAppLog("log","at pages/label-activity/label-activity.vue:186","用户点击取消")}})},async onCancelFollow(e){if(!e.publisher)return;let t=this;uni.showModal({title:"取消关注",content:`你确定要取消关注${e.publisher.username}`,success:async function(o){if(o.confirm){if(e.publisher&&await cancelAttention(e.publisher.id)){let o=t.articles;for(let t=0;t<o.length;t++)o[t].publisher&&o[t].publisher.id==e.publisher.id&&(o[t].publisher.isAttention=0);t.articles=o,t.$refs.articleActionPopup.close(),uni.showToast({title:"取消关注",icon:"success"})}}else o.cancel&&formatAppLog("log","at pages/label-activity/label-activity.vue:222","用户点击取消")}})},async onFollow(e){if(!e.publisher)return;let t=this;if(await followUser(e.publisher.id)){let o=t.articles;for(let t=0;t<o.length;t++)o[t].publisher&&o[t].publisher.id==e.publisher.id&&(o[t].publisher.isAttention=1);t.articles=o,t.$refs.articleActionPopup.close(),uni.showToast({title:"关注成功",icon:"success"})}},async getLabelArticles(e,t){let o=await request({data:{method:"GET",group:"activity",action:"groupByLabel",data:{page:t,labelId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(setTimeout((()=>{this.isRefresh=!1}),700),o.data.code===REQUEST_SUCCEEDED_CODE){let i=o.data.data.pageSum,a=o.data.data.list;if(formatAppLog("log","at pages/label-activity/label-activity.vue:281",a),this.haveMoreData=t<i,1===t)uni.showToast({title:"刷新成功",icon:"none"}),this.articles=a,this.scrollInto="";else{let e=this.articles.concat(a);this.articles=e}a.length<1&&t<i&&(this.page=t+1,this.getLabelArticles(e,this.page))}}}};function _sfc_render$L(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("activity-item"),__easycom_1$g),l=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),c=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},vue.toDisplayString(a.labelContent),1)])),_:1}),vue.createElementVNode("scroll-view",{class:"scrollview","scroll-y":"true","refresher-enabled":"","refresher-triggered":a.isRefresh,"scroll-into-view":e.scrollInto,onRefresherrefresh:t[1]||(t[1]=e=>n.onIsRefresh()),onScrolltolower:t[2]||(t[2]=(...e)=>n.onScrolltolower&&n.onScrolltolower(...e))},[vue.createElementVNode("view",{id:"activity-head"}),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.articles,((e,t)=>(vue.openBlock(),vue.createBlock(r,{articleItem:e,isMe:e.publisher&&a.myId==e.publisher.id,key:e.id,onOnFollowClick:t=>n.onFollow(e),onOnMoreClick:t=>n.onMoreClick(e)},null,8,["articleItem","isMe","onOnFollowClick","onOnMoreClick"])))),128)),a.articles.length<0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"no-activity"},[vue.createElementVNode("view",{class:"iconfont icon-xingqiu",style:{fontSize:"150px"}}),vue.createElementVNode("view",{class:"no-activity-text"},"暂时没有动态哦，刷新试试吧")])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"loading-content"},[e.showBottomLoading?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"iconfont icon-sync loading-icon",style:{fontSize:"30px",color:"#adadad"}})):(vue.openBlock(),vue.createElementBlock("view",{key:1},vue.toDisplayString(a.haveMoreData?"上拉或点击加载更多":"没有更多内容了"),1))]))],40,["refresher-triggered","scroll-into-view"]),vue.createVNode(c,{ref:"articleActionPopup",needHead:!0,title:"动态选择",needCancelButton:!0},{default:vue.withCtx((()=>[a.editArticleItem.id?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[a.editArticleItem.isAnonymity?(vue.openBlock(),vue.createBlock(l,{key:0,onClick:t[3]||(t[3]=e=>n.onPopupReportClick(a.editArticleItem)),icon:"icon-alert",title:"举报"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[a.editArticleItem.publisher.id==a.myId?(vue.openBlock(),vue.createBlock(l,{key:0,icon:"icon-delete",title:"删除",onClick:n.onPopupDeleteClick},null,8,["onClick"])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[1==a.editArticleItem.publisher.isAttention?(vue.openBlock(),vue.createBlock(l,{key:0,icon:"icon-quxiaoguanzhu",title:"取消关注",onClick:t[4]||(t[4]=e=>n.onCancelFollow(a.editArticleItem))})):(vue.openBlock(),vue.createBlock(l,{key:1,icon:"icon-guanzhu",title:"关注",onClick:t[5]||(t[5]=e=>n.onFollow(a.editArticleItem))})),vue.createVNode(l,{icon:"icon-message",title:"私聊"}),vue.createVNode(l,{onClick:t[6]||(t[6]=e=>n.onPopupReportClick(a.editArticleItem)),icon:"icon-alert",title:"举报"})],64))],64))],64)):vue.createCommentVNode("",!0)])),_:1},512)])}var PagesLabelActivityLabelActivity=_export_sfc(_sfc_main$M,[["render",_sfc_render$L]]);const _sfc_main$L={data:()=>({searchText:"",searchTextBefore:"",haveMoreData:!1,articles:[],showBottomLoading:!1,page:1,editArticleItem:{},scrollInto:"",hotLabels:[],showHotLabels:!0,searchHistory:[],myId:-1}),async onLoad(){this.hotLabels=await getHotLabels();let e=await getMyUserInfo();e&&(this.myId=e.id);let t=uni.getStorageSync(SEARCH_ACTIVITY_HISTORY);t&&(this.searchHistory=t)},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onLabelTextClick(e){this.page=1,this.searchTextBefore=this.searchText=e,this.searchActivities(this.searchText,this.page)},onScrolltolower(){formatAppLog("log","at pages/label-activity/search-activity.vue:191","onScrolltolower"),this.haveMoreData&&(this.page=this.page+1,this.searchText!==this.searchTextBefore?this.searchActivities(this.searchTextBefore,this.page):this.searchActivities(this.searchText,this.page))},onSearchInput(e){this.searchText=e},onSearchConfirm(){this.searchText.length<1?uni.showToast({title:"请先输入关键词"}):(this.page=1,uni.showLoading({title:"搜索中"}),this.searchTextBefore=this.searchText,this.searchActivities(this.searchText,this.page))},onMoreClick(e){this.$refs.articleActionPopup.open(),this.editArticleItem=e},onPopupReportClick(e){uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.id}&objectType=${reportObjectType.activity}`}),this.$refs.articleActionPopup.close()},onPopupDeleteClick(e){let t=this;uni.showModal({title:"删除动态",content:"你确定要删除这个动态吗",success:async function(o){if(o.confirm){if(await deleteMyArticle(e.id)){let o=t.articles;for(let t=0;t<o.length;t++)if(o[t].id==e.id){o.splice(t,1);break}t.articles=o,t.$refs.articleActionPopup.close(),uni.showToast({title:"删除成功",icon:"success"})}}else formatAppLog("log","at pages/label-activity/search-activity.vue:270","用户点击取消")}})},async onCancelFollow(e){if(!e.publisher)return;let t=this;uni.showModal({title:"取消关注",content:`你确定要取消关注${e.publisher.username}`,success:async function(o){if(o.confirm){if(e.publisher&&await cancelAttention(e.publisher.id)){let o=t.articles;for(let t=0;t<o.length;t++)o[t].publisher&&o[t].publisher.id==e.publisher.id&&(o[t].publisher.isAttention=0);t.articles=o,t.$refs.articleActionPopup.close(),uni.showToast({title:"取消关注",icon:"success"})}}else o.cancel&&formatAppLog("log","at pages/label-activity/search-activity.vue:306","用户点击取消")}})},async onFollow(e){if(!e.publisher)return;let t=this;if(await followUser(e.publisher.id)){let o=t.articles;for(let t=0;t<o.length;t++)o[t].publisher&&o[t].publisher.id==e.publisher.id&&(o[t].publisher.isAttention=1);t.articles=o,t.$refs.articleActionPopup.close(),uni.showToast({title:"关注成功",icon:"success"})}},async searchActivities(e,t){let o=await request({data:{method:"GET",group:"activity",action:"fullTextQuery",data:{page:t,subText:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(o.data.code===REQUEST_SUCCEEDED_CODE){let i=o.data.data.pageSum,a=o.data.data.list;if(formatAppLog("log","at pages/label-activity/search-activity.vue:362",a),this.haveMoreData=t<i,1===t)this.articles=a,this.scrollInto="";else{let e=this.articles.concat(a);this.articles=e}a.length<1&&t<i&&(this.page=t+1,this.searchActivities(e,this.page))}else formatAppLog("log","at pages/label-activity/search-activity.vue:382","searchActivities",o.data);if(uni.hideLoading(),this.showHotLabels=!1,1==t){let t=[],o=uni.getStorageSync(SEARCH_ACTIVITY_HISTORY);o&&(t=o),-1==t.indexOf(e)?(t.push(e),t.length>10&&t.splice(0,1)):(t.splice(t.indexOf(e),1),t.push(e)),uni.setStorage({key:SEARCH_ACTIVITY_HISTORY,data:t}),this.searchHistory=t.reverse()}}}};function _sfc_render$K(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"),__easycom_1$b),l=resolveEasycom(vue.resolveDynamicComponent("activity-item"),__easycom_1$g),c=resolveEasycom(vue.resolveDynamicComponent("uni-load-more"),__easycom_1$f),u=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),d=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"搜索")])),_:1}),vue.createElementVNode("view",{class:"search-content"},[vue.createVNode(r,{value:a.searchText,class:"search-input",placeholder:"搜索标签",cancelButton:"none",onInput:n.onSearchInput,onConfirm:t[1]||(t[1]=e=>n.onSearchConfirm())},null,8,["value","onInput"]),vue.createElementVNode("view",{class:"search-button"},[vue.createElementVNode("button",{style:{"background-color":"#4eccb8",color:"#fff"},onClick:t[2]||(t[2]=e=>n.onSearchConfirm()),size:"mini"},"搜索")])]),a.showHotLabels?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"labels-cotent"},[a.searchHistory.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"search-history-content"},[vue.createElementVNode("view",{class:"hot-labels-title"},[vue.createElementVNode("text",null,"搜索历史")]),vue.createElementVNode("view",{class:"search-history-items"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.searchHistory,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:e,class:"history-item",onClick:t=>n.onLabelTextClick(e)},vue.toDisplayString(e),9,["onClick"])))),128))])])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"hot-labels-title"},[vue.createElementVNode("text",null,"热门搜索"),vue.createElementVNode("view",{class:"iconfont icon-remen",style:{fontSize:"20px",color:"#FE5F64"}})]),vue.createElementVNode("view",{class:"hot-labels-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.hotLabels,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,class:"label-item",onClick:t=>n.onLabelTextClick(e.content)},[vue.createElementVNode("view",{class:vue.normalizeClass(t<3?"label-index-hot":"label-index")},vue.toDisplayString(t+1),3),vue.createElementVNode("view",{class:"label-text"},vue.toDisplayString(e.content),1),vue.createElementVNode("view",{class:"label-hot"},vue.toDisplayString(e.hot)+"热度 ",1)],8,["onClick"])))),128))])])):(vue.openBlock(),vue.createElementBlock("view",{key:1},[vue.createElementVNode("scroll-view",{class:"scrollview","scroll-y":"true","scroll-into-view":a.scrollInto,onScrolltolower:t[3]||(t[3]=(...e)=>n.onScrolltolower&&n.onScrolltolower(...e))},[vue.createElementVNode("view",{id:"activity-head"}),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.articles,((e,t)=>(vue.openBlock(),vue.createBlock(l,{articleItem:e,isMe:e.publisher&&a.myId==e.publisher.id,key:e.id,onOnFollowClick:t=>n.onFollow(e),onOnMoreClick:t=>n.onMoreClick(e)},null,8,["articleItem","isMe","onOnFollowClick","onOnMoreClick"])))),128)),a.articles.length<0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"no-activity"},[vue.createElementVNode("view",{class:"iconfont icon-xingqiu",style:{fontSize:"150px"}}),vue.createElementVNode("view",{class:"no-activity-text"},"没有结果哦换个关键词试试~")])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"loading-content"},[vue.createVNode(c,{status:a.haveMoreData?a.showBottomLoading?"loading":"more":"noMore",contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},iconType:"circle"},null,8,["status","contentText"])]))],40,["scroll-into-view"])])),vue.createVNode(d,{ref:"articleActionPopup",needHead:!0,title:"动态选择",needCancelButton:!0},{default:vue.withCtx((()=>[a.editArticleItem.id?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[a.editArticleItem.isAnonymity?(vue.openBlock(),vue.createBlock(u,{key:0,onClick:t[4]||(t[4]=e=>n.onPopupReportClick(a.editArticleItem)),icon:"icon-alert",title:"举报"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[a.editArticleItem.publisher.id==a.myId?(vue.openBlock(),vue.createBlock(u,{key:0,icon:"icon-delete",title:"删除",onClick:n.onPopupDeleteClick},null,8,["onClick"])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[1==a.editArticleItem.publisher.isAttention?(vue.openBlock(),vue.createBlock(u,{key:0,icon:"icon-quxiaoguanzhu",title:"取消关注",onClick:t[5]||(t[5]=e=>n.onCancelFollow(a.editArticleItem))})):(vue.openBlock(),vue.createBlock(u,{key:1,icon:"icon-guanzhu",title:"关注",onClick:t[6]||(t[6]=e=>n.onFollow(a.editArticleItem))})),vue.createVNode(u,{icon:"icon-message",title:"私聊"}),vue.createVNode(u,{onClick:t[7]||(t[7]=e=>n.onPopupReportClick(a.editArticleItem)),icon:"icon-alert",title:"举报"})],64))],64))],64)):vue.createCommentVNode("",!0)])),_:1},512)])}var PagesLabelActivitySearchActivity=_export_sfc(_sfc_main$L,[["render",_sfc_render$K]]);const _sfc_main$K={data:()=>({title:"用户主页",isRefresh:!1,userInfo:{},myArticles:[],articlesPage:1,haveMoreData:!0,isAttention:0,isMe:!1,editArticleItem:{}}),async onLoad(e){let t=e.userId,o=await getUserinfo(t),i=await getMyUserInfo();o&&(this.userInfo=o,this.isAttention=o.isAttention,o.id==i.id&&(this.isMe=!0),this.getUserArticles(o.id,this.articlesPage))},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onScrolltolower(){this.haveMoreData&&(this.articlesPage=this.articlesPage+1,this.getUserArticles(this.userInfo.id,this.articlesPage))},onActivityItemClick(e){uni.navigateTo({url:`/pages/activity-info/activity-info?activityId=${e.id}`})},onMoreClick(e){this.isMe?uni.showToast({title:"请到我的页面进行操作",icon:"none"}):(this.$refs.articleActionPopup.open(),this.editArticleItem=e)},onPopupReportClick(e){uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.id}&objectType=${reportObjectType.activity}`}),this.$refs.articleActionPopup.close()},onChatButtonClick(){uni.navigateTo({url:`/pages/message-secondary-page/chat-content/chat-content?fromUserId=${this.userInfo.id}`})},async onFollowButtonClick(){await followUser(this.userInfo.id)&&(this.isAttention=1)},async getUserArticles(e,t){uni.showLoading({title:"加载中"});let o=await request({data:{method:"GET",group:"user",action:`${e}/activity`,data:{userId:e,page:t},header:{"content-type":"application/x-www-form-urlencoded"}}});if(uni.hideLoading(),o.data.code===REQUEST_SUCCEEDED_CODE){let i=o.data.data.pageSum,a=o.data.data.list;if(this.haveMoreData=t<i,1===t)this.myArticles=a;else{let e=this.myArticles.concat(a);this.myArticles=e}a.length<1&&t<i&&(this.articlesPage=t+1,this.getUserArticles(e,this.articlesPage))}}}};function _sfc_render$J(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=vue.resolveComponent("View"),l=resolveEasycom(vue.resolveDynamicComponent("user-activity-item"),__easycom_1$d),c=resolveEasycom(vue.resolveDynamicComponent("custom-tab-pane"),__easycom_2$6),u=resolveEasycom(vue.resolveDynamicComponent("custom-tabs"),__easycom_3$4),d=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),m=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(r,{className:"upper-head",style:{position:"absolute",top:"0px"}},{default:vue.withCtx((()=>[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",border:!1,backgroundColor:"#ffffff00",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},vue.toDisplayString(a.title),1)])),_:1})])),_:1}),vue.createElementVNode("scroll-view",{class:"scrollview",style:{height:"100vh",width:"100vw"},"scroll-y":"true",onScrolltolower:t[9]||(t[9]=(...e)=>n.onScrolltolower&&n.onScrolltolower(...e))},[vue.createElementVNode("view",{class:"user-upper-half",onClick:t[8]||(t[8]=(...t)=>e.onBackgroundClick&&e.onBackgroundClick(...t)),style:vue.normalizeStyle({backgroundImage:a.userInfo.background?`url(${a.userInfo.background})`:"linear-gradient(to bottom, #e7d3aa, #61c5ae);"})},[a.userInfo.id?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"user-info-content",onClick:t[7]||(t[7]=vue.withModifiers((()=>{}),["stop"]))},[vue.createElementVNode("view",{class:"upper-user-info"},[vue.createElementVNode("view",{class:"user-info-left"},[vue.createElementVNode("view",{class:"upper-user-avater",onClick:t[1]||(t[1]=vue.withModifiers((t=>e.onNavigateTo("/pages/setting/personal_information/personal_information")),["stop"]))},[a.userInfo.avatar?(vue.openBlock(),vue.createElementBlock("image",{key:0,class:"user-avater-image",src:a.userInfo.avatar,mode:"aspectFill"},null,8,["src"])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"vip-logo"},[vue.createElementVNode("image",{src:a.userInfo.vip&&a.userInfo.vip.remainDays>0?"../../static/svgs/vip-logo.svg":"../../static/svgs/no-vip-logo.svg",mode:"aspectFill",style:{width:"25px",height:"25px"}},null,8,["src"])])])]),vue.createElementVNode("view",{class:"user-info-right"},[vue.createElementVNode("view",{class:"upper-tags-group"},[vue.createElementVNode("view",{class:"upper-tag",onClick:t[2]||(t[2]=vue.withModifiers(((...t)=>e.onFollowedNumberClick&&e.onFollowedNumberClick(...t)),["stop"]))},[vue.createElementVNode("view",{class:"tag-value"},vue.toDisplayString(a.userInfo.attentionSum),1),vue.createElementVNode("view",{class:"tag-type"}," 关注 ")]),vue.createElementVNode("view",{class:"dividing-line"}),vue.createElementVNode("view",{class:"upper-tag",onClick:t[3]||(t[3]=vue.withModifiers(((...t)=>e.onFansNumberClick&&e.onFansNumberClick(...t)),["stop"]))},[vue.createElementVNode("view",{class:"tag-value"},vue.toDisplayString(a.userInfo.beAttentionSum),1),vue.createElementVNode("view",{class:"tag-type"}," 粉丝 ")]),vue.createElementVNode("view",{class:"dividing-line"}),vue.createElementVNode("view",{class:"upper-tag",onClick:t[4]||(t[4]=vue.withModifiers(((...t)=>e.onVisitorNumberClick&&e.onVisitorNumberClick(...t)),["stop"]))},[vue.createElementVNode("view",{class:"tag-value"},vue.toDisplayString(a.userInfo.visitorSum),1),vue.createElementVNode("view",{class:"tag-type"}," 访客 ")])]),vue.createElementVNode("view",{class:"button-content"},[0==a.isAttention?(vue.openBlock(),vue.createElementBlock("view",{key:0,onClick:t[5]||(t[5]=vue.withModifiers((e=>n.onFollowButtonClick()),["stop"])),class:"edit-button"},[vue.createElementVNode("view",{class:"iconfont icon-chakantieziguanzhu",style:{fontSize:"20px",color:"#fff"}})])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{onClick:t[6]||(t[6]=vue.withModifiers((e=>n.onChatButtonClick()),["stop"])),class:"edit-button"},[vue.createElementVNode("view",{class:"iconfont icon-message",style:{fontSize:"20px",color:"#fff"}})])])])]),vue.createElementVNode("view",{class:"upper-user-ignature"}," BE Ur self ")])):vue.createCommentVNode("",!0)],4),vue.createElementVNode("view",{class:"mine-lower-half"},[vue.createVNode(u,{index:"0",animation:!0,tabPadding:"80",flex:!0},{default:vue.withCtx((()=>[vue.createVNode(c,{label:"动态"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"lower-my-aciticities"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.myArticles,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,class:"activity-item"},[vue.createVNode(l,{articleItem:e,isMe:!0,avatar:a.userInfo.avatar,username:a.userInfo.username,onOnClick:t=>n.onActivityItemClick(e),onOnMoreClick:t=>n.onMoreClick(e)},null,8,["articleItem","avatar","username","onOnClick","onOnMoreClick"])])))),128))])])),_:1}),vue.createVNode(c,{label:"赞过"})])),_:1})])],32),vue.createVNode(m,{ref:"articleActionPopup",needHead:!0,title:"动态选择",needCancelButton:!0},{default:vue.withCtx((()=>[a.editArticleItem.id?(vue.openBlock(),vue.createBlock(d,{key:0,onClick:t[10]||(t[10]=e=>n.onPopupReportClick(a.editArticleItem)),icon:"icon-alert",title:"举报"})):vue.createCommentVNode("",!0)])),_:1},512)])}var PagesUserHomePageUserHomePage=_export_sfc(_sfc_main$K,[["render",_sfc_render$J]]);const _sfc_main$J={name:"reply-item",props:{replyCommentData:{type:Object,required:!0},isAuthor:{type:Boolean,default:!1},isLead:{type:Boolean,default:!1}},data:()=>({}),methods:{onClick(){1!=this.replyCommentData.isDeleted&&this.$emit("onClick")},onMoreClick(){this.$emit("onMoreClick")}}};function _sfc_render$I(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{id:`reply_${o.replyCommentData.id}`},[vue.createElementVNode("view",{class:"reply-comment-item-content",onClick:t[1]||(t[1]=vue.withModifiers((e=>n.onClick()),["stop"]))},[vue.createElementVNode("view",{class:"reply-comment-avatar"},[vue.createElementVNode("image",{style:vue.normalizeStyle({width:"25px",height:"25px",borderRadius:"12.5px"}),src:o.replyCommentData.fromUserAvatar,mode:"aspectFill"},null,12,["src"])]),vue.createElementVNode("view",{class:"reply-comment-info"},[vue.createElementVNode("view",{class:"reply-user-name-option"},[vue.createElementVNode("view",{class:"reply-username"},[vue.createElementVNode("view",{class:"reply-username-text-content"},[vue.createElementVNode("text",{class:"reply-username-text"},vue.toDisplayString(o.replyCommentData.fromUsername),1)]),o.isAuthor?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"lead-label"},[vue.createElementVNode("text",{class:"label-text"},"作者")])):o.isLead?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"lead-label"},[vue.createElementVNode("text",{class:"label-text"},"层主")])):vue.createCommentVNode("",!0)]),1!=o.replyCommentData.isDeleted?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"iconfont icon-ellipsis right-edit-item",style:{fontSize:"25px",color:"#cacaca"},onClick:t[0]||(t[0]=vue.withModifiers((e=>n.onMoreClick()),["stop"]))})):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"reply-comment-text"},[1==o.replyCommentData.isDeleted?(vue.openBlock(),vue.createElementBlock("text",{key:0,style:{color:"#a7a7a7"}},"评论已删除")):(vue.openBlock(),vue.createElementBlock("text",{key:1},[0!=o.replyCommentData.toUserId?(vue.openBlock(),vue.createElementBlock("text",{key:0},[vue.createTextVNode(" 回复@"),vue.createElementVNode("text",{style:{color:"#33a68f"}},vue.toDisplayString(-1==o.replyCommentData.toUserId?"某只小布咕":o.replyCommentData.toUsername),1),vue.createTextVNode(": ")])):vue.createCommentVNode("",!0),vue.createTextVNode(vue.toDisplayString(o.replyCommentData.content),1)]))])])])],8,["id"])}var __easycom_0=_export_sfc(_sfc_main$J,[["render",_sfc_render$I],["__scopeId","data-v-0858b100"]]);const _sfc_main$I={name:"comment-item",props:{commentData:{type:Object,required:!0},needRefresh:{type:Boolean,default:!1},authorId:{type:Number,default:0},needShowAll:{type:Boolean,default:!1},replyAlign:{type:Boolean,default:!1},showReplyCount:{type:Boolean,default:!1}},watch:{needRefresh(e){formatAppLog("log","at components/comment-item/comment-item.vue:158","needRefresh",e),e&&this.refreshReply()}},data:()=>({replyCommentDatas:[],likeSum:0,isLiked:!1,showAll:!0,replySum:0}),async created(){this.isLiked=this.commentData.isLiked,this.likeSum=this.commentData.likeSum;let e=await this.getCommentReply(this.commentData.id);this.replySum=e.length,this.replySum<=3||this.needShowAll?(this.showAll=!0,this.replyCommentDatas=e):(this.showAll=!1,this.replyCommentDatas=e.splice(0,3))},methods:{onClick(){this.$emit("onCommentClick")},onMoreClick(){this.$emit("onCommentMoreClick")},onReplyClick(e,t){this.$emit("onReplyClick",this.commentData,e,t)},onReplyMoreClick(e,t){this.$emit("onReplyMoreClick",this.commentData,e,t)},onShowAllClick(){this.$emit("onShowAllClick")},async onLikeButtonClick(){if(0==this.isLiked){await this.likeThisComment(this.commentData.id)&&(this.likeSum=this.likeSum+1,this.isLiked=1)}else{await this.CancelikeThisComment(this.commentData.id)&&(this.likeSum=this.likeSum-1,this.isLiked=0)}},async refreshReply(){let e=await this.getCommentReply(this.commentData.id);this.replySum=e.length,this.replySum<=3||this.needShowAll?(this.showAll=!0,this.replyCommentDatas=e):(this.showAll=!1,this.replyCommentDatas=e.splice(0,3))},async likeThisComment(e){let t=await request({data:{method:"PUT",group:"activity/comment",action:`${e}/like`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return t.data.code===REQUEST_SUCCEEDED_CODE&&(formatAppLog("log","at components/comment-item/comment-item.vue:275",t.data),!0)},async CancelikeThisComment(e){let t=await request({data:{method:"DELETE",group:"activity/comment",action:`${e}/like/remove`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return t.data.code===REQUEST_SUCCEEDED_CODE?(formatAppLog("log","at components/comment-item/comment-item.vue:301",t.data),!0):(formatAppLog("log","at components/comment-item/comment-item.vue:304",t),!1)},async getCommentReply(e){let t=await request({data:{method:"GET",group:"activity/comment",action:`${e}/responseList`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return t.data.code===REQUEST_SUCCEEDED_CODE?t.data.data:[]}}};function _sfc_render$H(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("reply-item"),__easycom_0),r=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",{id:`comment_${o.commentData.id}`,class:"comment-content"},[vue.createElementVNode("view",{onClick:t[2]||(t[2]=vue.withModifiers((e=>n.onClick()),["stop"])),class:"comment-item-content"},[vue.createElementVNode("view",{class:"comment-avatar"},[vue.createElementVNode("image",{mode:"aspectFill",class:"avatar",src:o.commentData.publisher.avatar},null,8,["src"])]),vue.createElementVNode("view",{class:"comment-info"},[vue.createElementVNode("view",{class:"user-name-option"},[vue.createElementVNode("view",{class:"username"},[vue.createTextVNode(vue.toDisplayString(o.commentData.publisher.username)+" ",1),o.authorId==o.commentData.publisher.id?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"lead-label"},[vue.createElementVNode("text",{class:"label-text"},"作者")])):vue.createCommentVNode("",!0)]),0==o.commentData.isDeleted?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"comment-likes",onClick:t[0]||(t[0]=vue.withModifiers((e=>n.onLikeButtonClick()),["stop"]))},[a.isLiked?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"iconfont icon-xihuan right-edit-item",style:{fontSize:"24px",color:"#83dbcd"}})):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"iconfont icon-xihuan2 right-edit-item",style:{fontSize:"24px",color:"#cacaca",fontWeight:"bold"}})),vue.createTextVNode(" "+vue.toDisplayString(a.likeSum),1)])):vue.createCommentVNode("",!0),0==o.commentData.isDeleted?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"iconfont icon-ellipsis right-edit-item",onClick:t[1]||(t[1]=vue.withModifiers((e=>n.onMoreClick()),["stop"])),style:{fontSize:"25px",color:"#cacaca"}})):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"comment-text"},[1==o.commentData.isDeleted?(vue.openBlock(),vue.createElementBlock("text",{key:0,style:{color:"#cecece"}},"评论已删除")):(vue.openBlock(),vue.createElementBlock("text",{key:1},vue.toDisplayString(o.commentData.content),1))]),vue.createElementVNode("view",{class:"comment-footer"},[vue.createElementVNode("view",{class:"creat_time"},vue.toDisplayString(o.commentData.createTime),1),0==o.commentData.isDeleted?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"activity-footer-comments"}," 回复 ")):vue.createCommentVNode("",!0)])])]),vue.createElementVNode("view",{class:"reply-content",style:vue.normalizeStyle({paddingLeft:o.replyAlign?"0rpx":"90rpx",borderTop:o.showReplyCount?"2px solid #F5F5F5":"none"})},[o.showReplyCount?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"reply-count"},"回复 "+vue.toDisplayString(a.replyCommentDatas.length),1)):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"comment-comment"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.replyCommentDatas,((e,t)=>(vue.openBlock(),vue.createBlock(s,{replyCommentData:e,isAuthor:o.authorId==e.fromUserId,isLead:o.commentData.publisher.id==e.fromUserId,key:e.id,onOnClick:o=>n.onReplyClick(e,t),onOnMoreClick:o=>n.onReplyMoreClick(e,t)},null,8,["replyCommentData","isAuthor","isLead","onOnClick","onOnMoreClick"])))),128))]),a.showAll?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"view-all-button"},[vue.createElementVNode("view",{onClick:t[3]||(t[3]=vue.withModifiers(((...e)=>n.onShowAllClick&&n.onShowAllClick(...e)),["stop"]))}," 查看全部"+vue.toDisplayString(a.replySum)+"条回复 ",1),vue.createVNode(r,{customPrefix:"customicons",type:"right",color:"#808080",size:"15"})]))],4)],8,["id"])}var __easycom_1$9=_export_sfc(_sfc_main$I,[["render",_sfc_render$H],["__scopeId","data-v-c2e48b68"]]);const _sfc_main$H={data:()=>({isDelete:!1,article:{},myId:0,isMe:!1,commentDatas:[],refreshCommentId:0,isRefresh:!1,scrollInto:"",isReplyComment:!1,inputFocus:!1,sendText:"",buttonIsLoading:!1,keyboardHeight:0,emojiContentHeight:300,showEmojiPicker:!1,commentSelected:{},commentMoreSelected:{}}),async onLoad(e){uni.onKeyboardHeightChange((async e=>{0!=e.height?(this.keyboardHeight=e.height,this.emojiContentHeight=e.height,this.showEmojiPicker=!1,formatAppLog("log","at pages/activity-info/activity-info.vue:201",this.keyboardHeight)):this.keyboardHeight=0}));let t=e.activityId;if(await this.getArticleInfo(t),this.article.publisher){let e=await getMyUserInfo();this.myId=e.id,this.isMe=this.article.publisher.id==e.id}this.commentDatas=await this.getActivtyComments(t)},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onActivityItemClick(){this.inputFocus=!0,this.isReplyComment=!1},onCommentTextareaInput(e){this.sendText=e.detail.value},onCommentTextareaFocus(){this.inputFocus=!0},onCommentTextareaBlur(){this.inputFocus=!1},onEmojiIconClick(){this.showEmojiPicker=!this.showEmojiPicker},async onSendButtonClick(){if(this.sendText.length<=0)return;if(this.buttonIsLoading)return;this.refreshCommentId=0,this.buttonIsLoading=!0,this.scrollInto="";let e=!1;e=this.isReplyComment?await ReplyComments(this.commentSelected.commentId,this.sendText,0,this.commentSelected.toUserId):await commentActivity(this.article.id,this.sendText,0),this.buttonIsLoading=!1,this.showEmojiPicker=!1,e&&(this.isReplyComment?this.refreshCommentId=this.commentSelected.commentId:(this.commentDatas=await this.getActivtyComments(this.article.id),this.scrollInto="comment-item-newest"),this.sendText="")},setEmoj(e){this.sendText=this.sendText+e},async onRefresh(){this.isRefresh=!0;let e=this.article.id;await this.getArticleInfo(e),this.commentDatas=await this.getActivtyComments(e),setTimeout((()=>{this.isRefresh=!1}),700)},onActivityPopupMoreClick(){this.$refs.articleActionPopup.open()},onActivityPopupReportClick(e){uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.id}&objectType=${reportObjectType.activity}`}),this.$refs.articleActionPopup.close()},onActivityPopupDeleteClick(){let e=this;uni.showModal({title:"删除动态",content:"你确定要删除这个动态吗",success:async function(t){t.confirm?await deleteMyArticle(e.article.id)&&(e.isDelete=!0,e.$refs.articleActionPopup.close(),uni.showToast({title:"删除成功",icon:"success"})):formatAppLog("log","at pages/activity-info/activity-info.vue:350","用户点击取消")}})},onCommentPopupReportClick(e){e.isReply?uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.replyId}&objectType=${reportObjectType.commentResponse}`}):uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.commentId}&objectType=${reportObjectType.comment}`}),this.$refs.commentActionPopup.close()},onCommentPopupDeleteClick(e){let t=this;uni.showModal({title:"删除评论",content:"你确定删除这条评论吗？",success:async function(o){if(o.confirm){let o=!1;t.refreshCommentId=0,e.isReply?(o=await DeleteReply(e.replyId),o&&(t.refreshCommentId=e.commentId)):(o=await DeleteComments(e.commentId),o&&(t.commentDatas=await t.getActivtyComments(t.article.id))),o&&(uni.showToast({title:"删除成功"}),t.$refs.commentActionPopup.close())}else formatAppLog("log","at pages/activity-info/activity-info.vue:402","用户点击取消")}})},async onCancelFollow(e){if(!e.publisher)return;let t=this;uni.showModal({title:"取消关注",content:`你确定要取消关注${e.publisher.username}`,success:async function(o){o.confirm?e.publisher&&await cancelAttention(e.publisher.id)&&(t.article.publisher.isAttention=0,t.$refs.articleActionPopup.close(),uni.showToast({title:"取消关注",icon:"success"})):o.cancel&&formatAppLog("log","at pages/activity-info/activity-info.vue:432","用户点击取消")}})},async onFollow(e){if(!e.publisher)return;let t=this;await followUser(e.publisher.id)&&(t.article.publisher.isAttention=1,t.$refs.articleActionPopup.close(),uni.showToast({title:"关注成功",icon:"success"}))},onCommentClick(e){this.isReplyComment=!0,this.inputFocus=!0,this.commentSelected={toUsername:e.publisher.username,toUserId:0,commentId:e.id}},onCommentMoreClick(e){this.commentMoreSelected={commentId:e.id,replyId:0,fromUserId:e.publisher.id,isReply:!1},this.$refs.commentActionPopup.open()},onShowAllClick(e){formatAppLog("log","at pages/activity-info/activity-info.vue:488","onShowAllClick",e),uni.navigateTo({url:`/pages/activity-info/comment-info?commentData=${JSON.stringify(e)}&authorId=${this.article.publisher?this.article.publisher.id:0}`})},onReplyClick(e,t,o){formatAppLog("log","at pages/activity-info/activity-info.vue:500","onReplyClick",e,o),this.isReplyComment=!0,this.commentSelected={commentId:e.id,replyId:t.id,toUsername:t.fromUsername,toUserId:0==t.fromUserId?-1:t.fromUserId}},onReplyMoreClick(e,t){this.commentMoreSelected={commentId:e.id,replyId:t.id,fromUserId:t.fromUserId,isReply:!0},this.$refs.commentActionPopup.open()},async getArticleInfo(e){uni.showLoading({title:"加载中"});let t=await request({data:{method:"GET",group:"activity",action:`${e}/info`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}});uni.hideLoading(),t.data.code===REQUEST_SUCCEEDED_CODE?this.article=t.data.data:"A0201"===t.data.code?this.isDelete=!0:formatAppLog("log","at pages/activity-info/activity-info.vue:550",t.data)},async getActivtyComments(e){let t=await request({data:{method:"GET",group:"activity",action:`${e}/commentList`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(setTimeout((()=>{this.isRefresh=!1}),700),t.data.code===REQUEST_SUCCEEDED_CODE){return formatAppLog("log","at pages/activity-info/activity-info.vue:576","getActivtyComments",t.data),t.data.data}return[]}}};function _sfc_render$G(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("activity-item"),__easycom_1$g),l=resolveEasycom(vue.resolveDynamicComponent("comment-item"),__easycom_1$9),c=resolveEasycom(vue.resolveDynamicComponent("activity-skeleton"),__easycom_3$7),u=resolveEasycom(vue.resolveDynamicComponent("emoji"),__easycom_3$3),d=resolveEasycom(vue.resolveDynamicComponent("uni-transition"),__easycom_3$6),m=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),h=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"activity-info-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"动态详情")])),_:1}),vue.createElementVNode("scroll-view",{"scroll-y":"true","refresher-enabled":"","refresher-triggered":a.isRefresh,onRefresherrefresh:t[4]||(t[4]=e=>n.onRefresh()),"scroll-into-view":a.scrollInto,style:{height:"82vh",width:"100%"}},[a.isDelete?(vue.openBlock(),vue.createElementBlock("view",{key:0,style:{marginTop:"45%",width:"100%",textAlign:"center",color:"#c4c4c4",fontSize:"20px"}}," 该动态已被删除 ")):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[a.article.id?(vue.openBlock(),vue.createElementBlock("view",{key:0},[vue.createVNode(r,{isMe:a.isMe,needShowAll:!0,articleItem:a.article,onOnFollowClick:t[1]||(t[1]=e=>n.onFollow(a.article)),onOnMoreClick:t[2]||(t[2]=e=>n.onActivityPopupMoreClick(a.article)),onOnClick:t[3]||(t[3]=e=>n.onActivityItemClick())},null,8,["isMe","articleItem"]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.commentDatas,((e,t)=>(vue.openBlock(),vue.createBlock(l,{commentData:e,key:e.id,authorId:a.article.isAnonymity?0:a.article.publisher.id,needRefresh:a.refreshCommentId==e.id,onOnCommentClick:t=>n.onCommentClick(e),onOnShowAllClick:t=>n.onShowAllClick(e),onOnCommentMoreClick:t=>n.onCommentMoreClick(e),onOnReplyClick:n.onReplyClick,onOnReplyMoreClick:n.onReplyMoreClick},null,8,["commentData","authorId","needRefresh","onOnCommentClick","onOnShowAllClick","onOnCommentMoreClick","onOnReplyClick","onOnReplyMoreClick"])))),128)),vue.createElementVNode("view",{id:"comment-item-newest"})])):(vue.openBlock(),vue.createElementBlock("view",{key:1},[vue.createVNode(c)]))],64))],40,["refresher-triggered","scroll-into-view"]),vue.createElementVNode("view",{class:"comment-bottom-content"},[vue.createElementVNode("view",{class:"comment-input-content"},[vue.createElementVNode("textarea",{"auto-height":"true",class:"comment-input","adjust-position":!1,"show-confirm-bar":!1,placeholder:a.isReplyComment?`回复${a.commentSelected.toUsername}`:"回复作者",focus:a.inputFocus,value:a.sendText,onInput:t[5]||(t[5]=(...e)=>n.onCommentTextareaInput&&n.onCommentTextareaInput(...e)),onFocus:t[6]||(t[6]=(...e)=>n.onCommentTextareaFocus&&n.onCommentTextareaFocus(...e)),onBlur:t[7]||(t[7]=(...e)=>n.onCommentTextareaBlur&&n.onCommentTextareaBlur(...e))},"\r\n\t\t\t\t\t",40,["placeholder","focus","value"]),vue.createElementVNode("view",{class:"option-image-content"},[vue.createElementVNode("image",{class:"send-option-image",mode:"aspectFill",src:"/static/svgs/smile.svg",onClick:t[8]||(t[8]=e=>n.onEmojiIconClick())})]),vue.createElementVNode("view",{class:"send-button-content",onClick:t[9]||(t[9]=e=>n.onSendButtonClick())},[vue.createElementVNode("view",{class:"send-button"},vue.toDisplayString(a.buttonIsLoading?"发送中":"发送"),1)])]),vue.createElementVNode("view",{style:vue.normalizeStyle({height:a.showEmojiPicker?a.emojiContentHeight+"px":a.keyboardHeight+"px"})},[vue.createVNode(d,{class:"emoji-picker-content","mode-class":"slide-bottom",show:a.showEmojiPicker},{default:vue.withCtx((()=>[vue.createElementVNode("view",null,[vue.withDirectives(vue.createVNode(u,{contentHeight:a.emojiContentHeight,onSetEmoj:n.setEmoj},null,8,["contentHeight","onSetEmoj"]),[[vue.vShow,a.showEmojiPicker]])])])),_:1},8,["show"])],4)])]),vue.createVNode(h,{ref:"commentActionPopup",needHead:!0,title:"评论选择",needCancelButton:!0},{default:vue.withCtx((()=>[a.commentMoreSelected.fromUserId?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[a.myId==a.commentMoreSelected.fromUserId?(vue.openBlock(),vue.createBlock(m,{key:0,onClick:t[10]||(t[10]=e=>n.onCommentPopupDeleteClick(a.commentMoreSelected)),icon:"icon-delete",title:"删除"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createVNode(m,{onClick:t[11]||(t[11]=e=>n.onCommentPopupReportClick(a.commentMoreSelected)),icon:"icon-alert",title:"举报"}),a.article.publisher&&a.article.publisher.id==a.myId?(vue.openBlock(),vue.createBlock(m,{key:0,icon:"icon-delete",title:"删除",onClick:t[12]||(t[12]=e=>n.onCommentPopupDeleteClick(a.commentMoreSelected))})):vue.createCommentVNode("",!0)],64))],64)):vue.createCommentVNode("",!0)])),_:1},512),vue.createVNode(h,{ref:"articleActionPopup",needHead:!0,title:"动态选择",needCancelButton:!0},{default:vue.withCtx((()=>[a.article.id?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[a.article.isAnonymity?(vue.openBlock(),vue.createBlock(m,{key:0,onClick:t[13]||(t[13]=e=>n.onActivityPopupReportClick(a.article)),icon:"icon-alert",title:"举报"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[a.article.publisher.id==a.myId?(vue.openBlock(),vue.createBlock(m,{key:0,icon:"icon-delete",title:"删除",onClick:n.onActivityPopupDeleteClick},null,8,["onClick"])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[1==a.article.publisher.isAttention?(vue.openBlock(),vue.createBlock(m,{key:0,icon:"icon-quxiaoguanzhu",title:"取消关注",onClick:t[14]||(t[14]=e=>n.onCancelFollow(a.article))})):(vue.openBlock(),vue.createBlock(m,{key:1,icon:"icon-guanzhu",title:"关注",onClick:t[15]||(t[15]=e=>n.onFollow(a.article))})),vue.createVNode(m,{icon:"icon-message",title:"私聊"}),vue.createVNode(m,{onClick:t[16]||(t[16]=e=>n.onActivityPopupReportClick(a.article)),icon:"icon-alert",title:"举报"})],64))],64))],64)):vue.createCommentVNode("",!0)])),_:1},512)])}var PagesActivityInfoActivityInfo=_export_sfc(_sfc_main$H,[["render",_sfc_render$G]]);const _sfc_main$G={data:()=>({scrollInto:"",commentData:{},authorId:-1,needRefresh:!1,commentSelected:{},commentMoreSelected:{},buttonIsLoading:!1,sendText:"",showEmojiPicker:!1,inputFocus:!1,myId:0,keyboardHeight:0,emojiContentHeight:300}),async onLoad(e){uni.onKeyboardHeightChange((async e=>{0!=e.height?(this.keyboardHeight=e.height,this.emojiContentHeight=e.height,this.showEmojiPicker=!1,formatAppLog("log","at pages/activity-info/comment-info.vue:134",this.keyboardHeight)):this.keyboardHeight=0}));let t=e.commentData;if(this.authorId=e.authorId,t){this.commentData=JSON.parse(t);let e=await getMyUserInfo();this.myId=e.id,this.commentSelected={commentId:this.commentData.id,toUsername:this.commentData.publisher.username,toUserId:0}}},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onCommentTextareaInput(e){this.sendText=e.detail.value},onCommentTextareaFocus(){this.inputFocus=!0},onCommentTextareaBlur(){this.inputFocus=!1},onEmojiIconClick(){formatAppLog("log","at pages/activity-info/comment-info.vue:186",this.showEmojiPicker),this.showEmojiPicker=!this.showEmojiPicker},async onSendButtonClick(){if(this.sendText.length<=0)return;if(this.buttonIsLoading)return;this.needRefresh=!1,this.buttonIsLoading=!0,this.scrollInto="";let e=!1;e=await ReplyComments(this.commentSelected.commentId,this.sendText,0,this.commentSelected.toUserId),this.buttonIsLoading=!1,this.showEmojiPicker=!1,e&&(this.needRefresh=!0,this.sendText="",setTimeout((()=>{this.scrollInto="reply-newest"}),1e3))},setEmoj(e){this.sendText=this.sendText+e},onCommentClick(e){this.inputFocus=!0,this.commentSelected={toUsername:e.publisher.username,toUserId:0,commentId:e.id}},onCommentMoreClick(e){this.commentMoreSelected={commentId:e.id,replyId:0,fromUserId:e.publisher.id,isReply:!1},this.$refs.commentActionPopup.open()},onShowAllClick(e){formatAppLog("log","at pages/activity-info/comment-info.vue:254","onShowAllClick",e),uni.navigateTo({url:`/pages/activity-info/comment-info?commentData=${JSON.stringify(e)}&authorId=${this.article.publisher?this.article.publisher.id:0}`})},onReplyClick(e,t){this.commentSelected={commentId:e.id,replyId:t.id,toUsername:t.fromUsername,toUserId:0==t.fromUserId?-1:t.fromUserId}},onReplyMoreClick(e,t){this.commentMoreSelected={commentId:e.id,replyId:t.id,fromUserId:t.fromUserId,isReply:!0},this.$refs.commentActionPopup.open()},onCommentPopupReportClick(e){e.isReply?uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.replyId}&objectType=${reportObjectType.commentResponse}`}):uni.navigateTo({url:`/pages/setting/report-user/report-user?objectId=${e.commentId}&objectType=${reportObjectType.comment}`}),this.$refs.commentActionPopup.close()},onCommentPopupDeleteClick(e){let t=this;uni.showModal({title:"删除评论",content:"你确定删除这条评论吗？",success:async function(o){if(o.confirm){let o=!1;t.needRefresh=!1,e.isReply?(o=await DeleteReply(e.replyId),o&&(t.needRefresh=!0)):(o=await DeleteComments(e.commentId),o&&(t.commentData.isDeleted=!0)),o&&(uni.showToast({title:"删除成功"}),t.$refs.commentActionPopup.close())}else formatAppLog("log","at pages/activity-info/comment-info.vue:334","用户点击取消")}})}}};function _sfc_render$F(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("comment-item"),__easycom_1$9),l=resolveEasycom(vue.resolveDynamicComponent("emoji"),__easycom_3$3),c=resolveEasycom(vue.resolveDynamicComponent("uni-transition"),__easycom_3$6),u=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),d=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"comment-info-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"评论详情")])),_:1}),vue.createElementVNode("scroll-view",{"scroll-y":"true","scroll-into-view":a.scrollInto,style:{height:"82vh",width:"100%"}},[a.commentData.id?(vue.openBlock(),vue.createBlock(r,{key:0,commentData:a.commentData,authorId:a.authorId,needRefresh:a.needRefresh,needShowAll:!0,replyAlign:!0,showReplyCount:!0,onOnCommentClick:t[1]||(t[1]=e=>n.onCommentClick(a.commentData)),onOnCommentMoreClick:t[2]||(t[2]=e=>n.onCommentMoreClick(a.commentData)),onOnReplyClick:n.onReplyClick,onOnReplyMoreClick:n.onReplyMoreClick},null,8,["commentData","authorId","needRefresh","onOnReplyClick","onOnReplyMoreClick"])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{id:"reply-newest"})],8,["scroll-into-view"]),vue.createElementVNode("view",{class:"comment-bottom-content"},[vue.createElementVNode("view",{class:"comment-input-content"},[vue.createElementVNode("textarea",{"auto-height":"true",class:"comment-input","adjust-position":!1,"show-confirm-bar":!1,placeholder:`回复${a.commentSelected.toUsername}`,focus:a.inputFocus,value:a.sendText,onInput:t[3]||(t[3]=(...e)=>n.onCommentTextareaInput&&n.onCommentTextareaInput(...e)),onFocus:t[4]||(t[4]=(...e)=>n.onCommentTextareaFocus&&n.onCommentTextareaFocus(...e)),onBlur:t[5]||(t[5]=(...e)=>n.onCommentTextareaBlur&&n.onCommentTextareaBlur(...e))},"\n\t\t\t\t\t\t",40,["placeholder","focus","value"]),vue.createElementVNode("view",{class:"option-image-content"},[vue.createElementVNode("image",{class:"send-option-image",mode:"aspectFill",src:"/static/svgs/smile.svg",onClick:t[6]||(t[6]=e=>n.onEmojiIconClick())})]),vue.createElementVNode("view",{class:"send-button-content",onClick:t[7]||(t[7]=e=>n.onSendButtonClick())},[vue.createElementVNode("view",{class:"send-button"},vue.toDisplayString(a.buttonIsLoading?"发送中":"发送"),1)])]),vue.createElementVNode("view",{style:vue.normalizeStyle({height:a.showEmojiPicker?a.emojiContentHeight+"px":a.keyboardHeight+"px"})},[vue.createVNode(c,{class:"emoji-picker-content","mode-class":"slide-bottom",show:a.showEmojiPicker},{default:vue.withCtx((()=>[vue.createElementVNode("view",{style:vue.normalizeStyle({height:a.showEmojiPicker?a.emojiContentHeight+"px":a.keyboardHeight+"px"})},[vue.withDirectives(vue.createVNode(l,{contentHeight:a.keyboardHeight,onSetEmoj:n.setEmoj},null,8,["contentHeight","onSetEmoj"]),[[vue.vShow,a.showEmojiPicker]])],4)])),_:1},8,["show"])],4)]),vue.createVNode(d,{ref:"commentActionPopup",needHead:!0,title:"评论选择",needCancelButton:!0},{default:vue.withCtx((()=>[a.commentMoreSelected.fromUserId?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[a.myId==a.commentMoreSelected.fromUserId?(vue.openBlock(),vue.createBlock(u,{key:0,onClick:t[8]||(t[8]=e=>n.onCommentPopupDeleteClick(a.commentMoreSelected)),icon:"icon-delete",title:"删除"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createVNode(u,{onClick:t[9]||(t[9]=e=>n.onCommentPopupReportClick(a.commentMoreSelected)),icon:"icon-alert",title:"举报"}),e.article.publisher&&e.article.publisher.id==a.myId?(vue.openBlock(),vue.createBlock(u,{key:0,icon:"icon-delete",title:"删除",onClick:t[10]||(t[10]=e=>n.onCommentPopupDeleteClick(a.commentMoreSelected))})):vue.createCommentVNode("",!0)],64))],64)):vue.createCommentVNode("",!0)])),_:1},512)])])}var PagesActivityInfoCommentInfo=_export_sfc(_sfc_main$G,[["render",_sfc_render$F]]);const _sfc_main$F={name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:()=>({type:"contact",color:"#000000",size:20})},border:{type:Boolean,default:!0}},data:()=>({isFirstChild:!1}),mounted(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm(e="uniList"){let t=this.$parent,o=t.$options.name;for(;o!==e;){if(t=t.$parent,!t)return!1;o=t.$options.name}return t},onClick(){""===this.to?(this.clickable||this.link)&&this.$emit("click",{data:{}}):this.openPage()},onSwitchChange(e){this.$emit("switchChange",e.detail)},openPage(){-1!==["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi(e){let t={url:this.to,success:e=>{this.$emit("click",{data:e})},fail:e=>{this.$emit("click",{data:e})}};switch(e){case"navigateTo":default:uni.navigateTo(t);break;case"redirectTo":uni.redirectTo(t);break;case"reLaunch":uni.reLaunch(t);break;case"switchTab":uni.switchTab(t)}}}};function _sfc_render$E(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h),r=resolveEasycom(vue.resolveDynamicComponent("uni-badge"),__easycom_1$e);return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass([{"uni-list-item--disabled":o.disabled},"uni-list-item"]),"hover-class":!o.clickable&&!o.link||o.disabled||o.showSwitch?"":"uni-list-item--hover",onClick:t[1]||(t[1]=(...e)=>n.onClick&&n.onClick(...e))},[a.isFirstChild?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass(["border--left",{"uni-list--border":o.border}])},null,2)),vue.createElementVNode("view",{class:vue.normalizeClass(["uni-list-item__container",{"container--right":o.showArrow||o.link,"flex--direction":"column"===o.direction}])},[vue.renderSlot(e.$slots,"header",{},(()=>[vue.createElementVNode("view",{class:"uni-list-item__header"},[o.thumb?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-list-item__icon"},[vue.createElementVNode("image",{src:o.thumb,class:vue.normalizeClass(["uni-list-item__icon-img",["uni-list--"+o.thumbSize]])},null,10,["src"])])):o.showExtraIcon?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-list-item__icon"},[vue.createVNode(s,{color:o.extraIcon.color,size:o.extraIcon.size,type:o.extraIcon.type},null,8,["color","size","type"])])):vue.createCommentVNode("",!0)])]),!0),vue.renderSlot(e.$slots,"body",{},(()=>[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-list-item__content",{"uni-list-item__content--center":o.thumb||o.showExtraIcon||o.showBadge||o.showSwitch}])},[o.title?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:vue.normalizeClass(["uni-list-item__content-title",[0!==o.ellipsis&&o.ellipsis<=2?"uni-ellipsis-"+o.ellipsis:""]])},vue.toDisplayString(o.title),3)):vue.createCommentVNode("",!0),o.note?(vue.openBlock(),vue.createElementBlock("text",{key:1,class:"uni-list-item__content-note"},vue.toDisplayString(o.note),1)):vue.createCommentVNode("",!0)],2)]),!0),vue.renderSlot(e.$slots,"footer",{},(()=>[o.rightText||o.showBadge||o.showSwitch?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass(["uni-list-item__extra",{"flex--justify":"column"===o.direction}])},[o.rightText?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"uni-list-item__extra-text"},vue.toDisplayString(o.rightText),1)):vue.createCommentVNode("",!0),o.showBadge?(vue.openBlock(),vue.createBlock(r,{key:1,type:o.badgeType,text:o.badgeText},null,8,["type","text"])):vue.createCommentVNode("",!0),o.showSwitch?(vue.openBlock(),vue.createElementBlock("switch",{key:2,disabled:o.disabled,checked:o.switchChecked,onChange:t[0]||(t[0]=(...e)=>n.onSwitchChange&&n.onSwitchChange(...e))},null,40,["disabled","checked"])):vue.createCommentVNode("",!0)],2)):vue.createCommentVNode("",!0)]),!0)],2),o.showArrow||o.link?(vue.openBlock(),vue.createBlock(s,{key:1,size:16,class:"uni-icon-wrapper",color:"#bbb",type:"arrowright"})):vue.createCommentVNode("",!0)],10,["hover-class"])}var __easycom_1$8=_export_sfc(_sfc_main$F,[["render",_sfc_render$E],["__scopeId","data-v-a5d829a0"]]);const _sfc_main$E={name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0}},created(){this.firstChildAppend=!1},methods:{loadMore(e){this.$emit("scrolltolower")}}};function _sfc_render$D(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-list uni-border-top-bottom"},[o.border?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-list--border-top"})):vue.createCommentVNode("",!0),vue.renderSlot(e.$slots,"default",{},void 0,!0),o.border?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-list--border-bottom"})):vue.createCommentVNode("",!0)])}var __easycom_2$3=_export_sfc(_sfc_main$E,[["render",_sfc_render$D],["__scopeId","data-v-822b7074"]]);const _sfc_main$D={data:()=>({userInfo:{}}),async onLoad(){this.userInfo=await getMyUserInfo()},methods:{onNarLeftClick(){formatAppLog("log","at pages/setting/setting.vue:52","onNarLeftClick()"),uni.navigateBack({delta:1})},onNavigateTo(e){formatAppLog("log","at pages/setting/setting.vue:62",e),uni.navigateTo({url:e})},onRealNameAuthenticationClick(){1!=this.userInfo.isVerify?this.$refs.authenticationActionSheet.open():uni.showToast({title:"您已经完成实名认证",icon:"none"})},onClearCacheClick(){if(!this.userInfo.id)return void uni.showToast({title:"您还未登录，请先登录",icon:"error"});let e=this;uni.showModal({title:"清除聊天记录吗",content:"你确定要清除所有本地的聊天记录吗",success:function(t){t.confirm&&(deleteMessageRecord(e.userInfo.id),uni.showToast({title:"清除成功"}))}})},onLogoutClick(){uni.showModal({title:"退出登录",content:"你确定要退出登录吗？",success:function(e){e.confirm&&(uni.setStorage({key:TOKEN,data:null}),uni.setStorage({key:USER_INFO,data:null}),uni.$emit(REFRESH_USERINFO,{needRefresh:!0}),uni.navigateBack({delta:1}))}})}}};function _sfc_render$C(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-list-item"),__easycom_1$8),l=resolveEasycom(vue.resolveDynamicComponent("uni-list"),__easycom_2$3),c=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),u=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:n.onNarLeftClick},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"设置")])),_:1},8,["onClickLeft"]),vue.createVNode(l,null,{default:vue.withCtx((()=>[vue.createVNode(r,{clickable:"",showArrow:"",link:"",to:"/pages/setting/personal_information/personal_information",title:"个人资料",thumb:"/static/icons/user.png","thumb-size":"medium"}),vue.createVNode(r,{clickable:"",showArrow:"",link:"",to:"/pages/setting/bugu-vip/bugu-vip",title:"布咕会员",thumb:"/static/icons/crown.png","thumb-size":"medium"}),vue.createVNode(r,{clickable:"",showArrow:"",title:"实名认证",thumb:"/static/icons/security-scan.png","thumb-size":"medium",onClick:t[0]||(t[0]=e=>n.onRealNameAuthenticationClick())}),vue.createElementVNode("view",{class:"split-line"}),vue.createVNode(r,{clickable:"",showArrow:"",link:"",to:"/pages/setting/sound-setting/sound-setting",title:"声音设置",thumb:"/static/icons/bell.png","thumb-size":"medium"}),vue.createVNode(r,{clickable:"",showArrow:"",link:"",to:"/pages/setting/help/help",title:"帮助与反馈",thumb:"/static/icons/question.png","thumb-size":"medium"}),vue.createVNode(r,{clickable:"",showArrow:"",link:"",to:"/pages/setting/about-bugu/about-bugu",title:"关于布咕星球",thumb:"/static/icons/read.png","thumb-size":"medium"}),vue.createElementVNode("view",{class:"split-line"}),vue.createVNode(r,{clickable:"",showArrow:"",title:"清除聊天记录",thumb:"/static/icons/clear.png","thumb-size":"medium",onClick:t[1]||(t[1]=e=>n.onClearCacheClick())}),vue.createVNode(r,{clickable:"",showArrow:"",title:"退出登录",thumb:"/static/icons/logout.png","thumb-size":"medium",onClick:n.onLogoutClick},null,8,["onClick"])])),_:1}),vue.createVNode(u,{ref:"authenticationActionSheet",title:"选择认证方式",needCancelButton:"true",needHead:"true"},{default:vue.withCtx((()=>[vue.createVNode(c,{onClick:t[2]||(t[2]=e=>n.onNavigateTo("/pages/setting/school-login/school-login")),title:"登录学校官网认证(仅支持湖北工业大学)"}),vue.createVNode(c,{onClick:t[3]||(t[3]=e=>n.onNavigateTo("/pages/setting/real-name-authentication/real-name-authentication")),title:"上传照片认证"})])),_:1},512)])}var PagesSettingSetting=_export_sfc(_sfc_main$D,[["render",_sfc_render$C]]);const _sfc_main$C={data:()=>({reportTypes:reportTypes,reportSelected:reportTypes[reportTypes.length-1],reportReason:"",reportSuccess:!1,objectId:-1,objectType:""}),onLoad(e){this.objectId=e.objectId,this.objectType=e.objectType},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onReportTypesChange(e){this.reportSelected=e.detail.value},onTextInput(e){this.reportReason=e.detail.value},async onReportButtonClick(){"其他"===this.reportSelected&&this.reportReason.length<1?uni.showToast({title:"请先输入原因！",icon:"none"}):this.reportSuccess=await this.reportUser(this.objectId,this.objectType,this.reportSelected+"-"+this.reportReason)},async reportUser(e,t,o){formatAppLog("log","at pages/setting/report-user/report-user.vue:111","objectId",e,"objectType",t,"reason",o);let i=await request({data:{method:"POST",group:"user",action:"inform",data:{objectId:e,objectType:t,reason:o},header:{"content-type":"application/x-www-form-urlencoded"}}});return i.data.code===REQUEST_SUCCEEDED_CODE?(formatAppLog("log","at pages/setting/report-user/report-user.vue:128",i.data),!0):(formatAppLog("log","at pages/setting/report-user/report-user.vue:131","reportUser",i.data),!1)}}};function _sfc_render$B(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-transition"),__easycom_3$6);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"report-user-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"举报用户")])),_:1}),a.reportSuccess?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"report-user"},[vue.createElementVNode("radio-group",{onChange:t[1]||(t[1]=(...e)=>n.onReportTypesChange&&n.onReportTypesChange(...e)),class:"report-select-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.reportTypes,(e=>(vue.openBlock(),vue.createElementBlock("label",{class:"report-select-item",key:e},[vue.createElementVNode("view",{class:"report-text"},vue.toDisplayString(e),1),vue.createElementVNode("view",{class:"report-radio"},[vue.createElementVNode("radio",{color:"#4eccb8",value:e,checked:e===a.reportSelected},null,8,["value","checked"])])])))),128))],32),vue.createElementVNode("view",{class:"reason-title"}," 详细描述 "),vue.createElementVNode("textarea",{class:"reason-input",value:a.reportReason,maxlength:49-a.reportSelected.length,placeholder:"其他"===a.reportSelected?"举报详细说明(必填)":"举报详细说明(选填)",onInput:t[2]||(t[2]=(...e)=>n.onTextInput&&n.onTextInput(...e))},null,40,["value","maxlength","placeholder"]),vue.createElementVNode("button",{class:"report-button",onClick:t[3]||(t[3]=(...e)=>n.onReportButtonClick&&n.onReportButtonClick(...e))},"举报")])),vue.createVNode(r,{class:"emoji-picker-content","mode-class":"zoom-in",show:a.reportSuccess},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"report-success"},[vue.createElementVNode("text",null,vue.toDisplayString("举报成功,我们会尽快处理\n\t\t\t\t\t  感谢您为维护社区氛围做出的贡献"))])])),_:1},8,["show"])])])}var PagesSettingReportUserReportUser=_export_sfc(_sfc_main$C,[["render",_sfc_render$B]]);const _sfc_main$B={data:()=>({userId:0,username:"",avatar:"",sex:0,isVerify:0,sexGrounp:sexGrounp}),onLoad(){this.refreshUserInfo()},onShow(){let e=this;uni.$once(REFRESH_USERINFO,(function(t){t.needRefresh&&e.refreshUserInfo()}))},methods:{onNarLeftClick(){formatAppLog("log","at pages/setting/personal_information/personal_information.vue:92","onNarLeftClick()"),uni.navigateBack({delta:1})},async refreshUserInfo(){let e=await getMyUserInfo(),t=await getUserinfo(e.id);t&&(uni.setStorage({key:USER_INFO,data:t}),this.id=t.id,this.username=t.username,this.avatar=t.avatar,this.sex=null==t.sex?-1:t.sex,this.isVerify=t.isVerify)},onChangeAvatarClick(){this.$refs.changeAvatarPopup.open()},onSexPickerChange(e){this.changeSex(e.detail.value)},onSeletImage(e){let t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:[e],success:function(e){var o=e.tempFilePaths;t.changeAvatar(o[0])}})},async changeAvatar(e){uni.showLoading({title:"正在发布"});let t=await request({data:{method:"GET",group:"user",action:"avatar/token",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){let o=t.data.data.fileName,i=t.data.data.token,a=this;uni.uploadFile({url:UploadUrl,filePath:e,name:"file",formData:{key:o,token:aes.decrypt(i)},async success(e){formatAppLog("log","at pages/setting/personal_information/personal_information.vue:181",e),(await request({data:{method:"POST",group:"user",action:"avatar/change",data:{fileName:o},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE&&(uni.showToast({title:"更换头像成功"}),a.$refs.changeAvatarPopup.close(),a.refreshUserInfo())}})}},async changeSex(e){uni.showLoading({title:"修改中"}),(await request({data:{method:"POST",group:"user",action:"sex/update",data:{sex:e},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE&&(uni.showToast({title:"修改性别成功"}),this.refreshUserInfo())}}};function _sfc_render$A(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-list-item"),__easycom_1$8),l=resolveEasycom(vue.resolveDynamicComponent("uni-list"),__easycom_2$3),c=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_2$7);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"my-info-setting-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"个人资料设置")])),_:1}),vue.createElementVNode("view",{class:"setting-items-content"},[vue.createVNode(l,null,{default:vue.withCtx((()=>[vue.createVNode(r,{clickable:"",thumb:a.avatar,thumbSize:"lg",showArrow:"",rightText:"修改头像",onClick:n.onChangeAvatarClick},null,8,["thumb","onClick"]),vue.createVNode(r,{clickable:"",showArrow:"",link:"",to:`/pages/setting/personal_information/change-username?username=${a.username}`,title:"昵称",rightText:a.username},null,8,["to","rightText"]),vue.createElementVNode("picker",{mode:"selector",range:a.sexGrounp,value:a.sex,onChange:t[1]||(t[1]=(...e)=>n.onSexPickerChange&&n.onSexPickerChange(...e))},[vue.createVNode(r,{clickable:"",showArrow:"",title:"性别",rightText:-1==a.sex?"未设置":a.sexGrounp[a.sex]},null,8,["rightText"])],40,["range","value"]),vue.createVNode(r,{clickable:"",showArrow:"",title:"是否实名认证",rightText:1==a.isVerify?"已实名认证":"未实名认证"},null,8,["rightText"])])),_:1})])]),vue.createVNode(c,{ref:"changeAvatarPopup",type:"center"},{default:vue.withCtx((()=>[a.avatar?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"change-avatar-content"},[vue.createElementVNode("view",{class:"change-avatar-content-title"}," 修改头像 "),vue.createElementVNode("view",{class:"avatar-content"},[vue.createElementVNode("image",{src:a.avatar,class:"avatar-image",mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:"select-image-way",onClick:t[2]||(t[2]=e=>n.onSeletImage("camera"))}," 拍照 "),vue.createElementVNode("view",{class:"select-image-way",onClick:t[3]||(t[3]=e=>n.onSeletImage("album"))}," 从相册选择 ")])):vue.createCommentVNode("",!0)])),_:1},512)])}var PagesSettingPersonal_informationPersonal_information=_export_sfc(_sfc_main$B,[["render",_sfc_render$A]]);const _sfc_main$A={data:()=>({username:""}),onLoad(e){this.username=e.username},methods:{onNarLeftClick(){formatAppLog("log","at pages/setting/personal_information/change-username.vue:44","onNarLeftClick()"),uni.navigateBack({delta:1})},onUsernameInput(e){this.username=e.detail.value},onSaveButtonClick(){this.username.length<1?uni.showToast({title:"请先输入昵称",icon:"error"}):this.username.length>16?uni.showToast({title:"昵称不能超过16个字符",icon:"error"}):this.changeName(this.username)},async changeName(e){uni.showLoading({title:"修改中"});let t=await request({data:{method:"POST",group:"user",action:`username/change/${e}`,data:{username:e},header:{"content-type":"application/x-www-form-urlencoded"}}});uni.hideLoading(),t.data.code===REQUEST_SUCCEEDED_CODE&&(uni.$emit(REFRESH_USERINFO,{needRefresh:!0}),uni.navigateBack())}}};function _sfc_render$z(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"change-username-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"更改昵称")])),_:1}),vue.createElementVNode("input",{value:a.username,onInput:t[1]||(t[1]=(...e)=>n.onUsernameInput&&n.onUsernameInput(...e)),class:"change-username-input"},null,40,["value"]),vue.createElementVNode("view",{class:"change-username-tips"}," 好的名字更容易遇见有趣的人哦~ "),vue.createElementVNode("button",{class:"change-username-button main-color",onClick:t[2]||(t[2]=e=>n.onSaveButtonClick())},"保存并退出")])])}var PagesSettingPersonal_informationChangeUsername=_export_sfc(_sfc_main$A,[["render",_sfc_render$z]]);const _sfc_main$z={data:()=>({userInfo:{},typeSelect:0}),onLoad(){this.refreshUserInfo()},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},async refreshUserInfo(){uni.showLoading({title:"加载中"});let e=await getMyUserInfo();this.userInfo=await getUserinfo(e.id),uni.hideLoading()},onVipTypeClick(e){this.typeSelect=e},onOpenVipClick(){uni.showModal({title:"开通会员",content:"暂时还不能开通哦~，参加官方活动可以免费领取会员哦~"})},async getFreeVip(){uni.showLoading({title:"领取中"}),(await request({data:{method:"PUT",group:"welfare",action:"vip/oneMonth",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE&&(uni.showToast({title:"领取成功",icon:"success"}),this.refreshUserInfo())},async getVipByActivitySum(){(await request({data:{method:"PUT",group:"welfare",action:"getByActivitySum",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE&&(uni.showToast({title:"领取成功",icon:"success"}),this.refreshUserInfo())}}};function _sfc_render$y(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"布咕会员")])),_:1}),vue.createElementVNode("view",{class:"header"},[vue.createElementVNode("view",{class:"bg-w"},[vue.createElementVNode("view",{class:"bg"})]),vue.createElementVNode("view",{class:"cont"},[vue.createElementVNode("view",{class:"my-vip-info"},[a.userInfo.id?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("view",{class:"avatar-content"},[vue.createElementVNode("image",{class:"avatar",src:a.userInfo.avatar,mode:"aspectFill"},null,8,["src"])]),vue.createElementVNode("view",{class:"username-and-vip-info"},[vue.createElementVNode("view",{class:"username"},vue.toDisplayString(a.userInfo.username),1),vue.createElementVNode("view",{class:"vip-info"},vue.toDisplayString(a.userInfo.vip&&a.userInfo.vip.remainDays>0?"您的会员剩余"+a.userInfo.vip.remainDays+"天":"开通布咕会员，享更多权益"),1)])],64)):vue.createCommentVNode("",!0)])])]),vue.createElementVNode("view",{class:"vip-interests"},[vue.createElementVNode("view",{class:"interests-item"},[vue.createElementVNode("image",{class:"interests-image",src:"/static/svgs/vip-huiyuan.svg"}),vue.createElementVNode("view",{class:"interests-text"}," 身份标识 ")]),vue.createElementVNode("view",{class:"interests-item"},[vue.createElementVNode("image",{class:"interests-image",src:"/static/svgs/vip-yonghuchaxun.svg"}),vue.createElementVNode("view",{class:"interests-text"}," 查看访客 ")]),vue.createElementVNode("view",{class:"interests-item"},[vue.createElementVNode("image",{class:"interests-image",src:"/static/svgs/vip-zhuangshi.svg"}),vue.createElementVNode("view",{class:"interests-text"}," 自定义主页 ")]),vue.createElementVNode("view",{class:"interests-item"},[vue.createElementVNode("image",{class:"interests-image",src:"/static/svgs/vip-xihuan.svg"}),vue.createElementVNode("view",{class:"interests-text"}," 盲盒劵 ")]),vue.createElementVNode("view",{class:"interests-item"},[vue.createElementVNode("image",{class:"interests-image",src:"/static/svgs/vip-liuyan.svg"}),vue.createElementVNode("view",{class:"interests-text"}," 消息漫游 ")])]),vue.createElementVNode("view",{class:"vip-type"},[vue.createElementVNode("view",{class:"vip-type-card",onClick:t[1]||(t[1]=e=>n.onVipTypeClick(0)),style:vue.normalizeStyle({backgroundColor:0==a.typeSelect?"#ffefdb":"#ffffff",border:0==a.typeSelect?"2px solid #deb887":"2px solid #ffffff00"})},[vue.createElementVNode("view",{class:"vip-type-title"}," 月度会员 "),vue.createElementVNode("view",{class:"vip-type-price"}," ￥19 "),vue.createElementVNode("view",{class:"vip-type-tips"}," 畅享一个月会员权益 ")],4),vue.createElementVNode("view",{class:"vip-type-card",onClick:t[2]||(t[2]=e=>n.onVipTypeClick(1)),style:vue.normalizeStyle({backgroundColor:1==a.typeSelect?"#ffefdb":"#ffffff",border:1==a.typeSelect?"2px solid #deb887":"2px solid #ffffff00"})},[vue.createElementVNode("view",{class:"vip-type-title"}," 季度会员 "),vue.createElementVNode("view",{class:"vip-type-price"}," ￥45 "),vue.createElementVNode("view",{class:"vip-type-tips"}," 畅享一个季度会员权益 ")],4),vue.createElementVNode("view",{class:"vip-type-card",onClick:t[3]||(t[3]=e=>n.onVipTypeClick(2)),style:vue.normalizeStyle({backgroundColor:2==a.typeSelect?"#ffefdb":"#ffffff",border:2==a.typeSelect?"2px solid #deb887":"2px solid #ffffff00"})},[vue.createElementVNode("view",{class:"vip-type-title"}," 年度会员 "),vue.createElementVNode("view",{class:"vip-type-price"}," ￥150 "),vue.createElementVNode("view",{class:"vip-type-tips"}," 畅享一年会员权益 ")],4)]),vue.createElementVNode("view",{class:"vip-activities"},[vue.createElementVNode("view",{class:"vip-activity-content",onClick:t[4]||(t[4]=(...e)=>n.getFreeVip&&n.getFreeVip(...e))},[vue.createElementVNode("view",{class:"vip-activity-text"},[vue.createElementVNode("view",{class:"vip-activity-title"}," 限时福利① "),vue.createElementVNode("view",{class:"vip-activity-info"}," 新用户注册领取一个月VIP ")]),vue.createElementVNode("view",{class:"vip-activity-button-content"},[vue.createElementVNode("view",{class:"vip-activity-button"}," 立即领取 ")])])]),vue.createElementVNode("view",{class:"vip-activities"},[vue.createElementVNode("view",{class:"vip-activity-content",onClick:t[5]||(t[5]=(...e)=>n.getVipByActivitySum&&n.getVipByActivitySum(...e))},[vue.createElementVNode("view",{class:"vip-activity-text"},[vue.createElementVNode("view",{class:"vip-activity-title"}," 限时福利② "),vue.createElementVNode("view",{class:"vip-activity-info"}," 连续发布五条动态领取vip ")]),vue.createElementVNode("view",{class:"vip-activity-button-content"},[vue.createElementVNode("view",{class:"vip-activity-button"}," 立即领取 ")])])]),vue.createElementVNode("view",{class:"vip-page-footer"},[vue.createElementVNode("view",{class:"vip-footer-botton"}," 立即开通 ")])])}var PagesSettingBuguVipBuguVip=_export_sfc(_sfc_main$z,[["render",_sfc_render$y]]);const _sfc_main$y={data:()=>({isSuccessed:!1,fileUrl:""}),methods:{onNarLeftClick(){formatAppLog("log","at pages/setting/real-name-authentication/real-name-authentication.vue:100","onNarLeftClick()"),uni.navigateBack({delta:1})},onImageContentClick(){let e=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(t){var o=t.tempFilePaths;e.fileUrl=o[0]}})},onPrivacyPolicyClick(){uni.navigateTo({url:"/pages/login/bugu-privacy-policy/bugu-privacy-policy"})},onSubmitButtonClick(){this.fileUrl?this.submit_authentication(this.fileUrl):uni.showToast({title:"请先选择照片",icon:"error"})},async submit_authentication(e){uni.showLoading({title:"正在提交"});let t=await request({data:{method:"GET",group:"user",action:"verify/token",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){let o=t.data.data.fileName,i=t.data.data.token,a=this;uni.uploadFile({url:UploadUrl,filePath:e,name:"file",formData:{key:o,token:aes.decrypt(i)},async success(e){formatAppLog("log","at pages/setting/real-name-authentication/real-name-authentication.vue:180",e);let t=await request({data:{method:"PUT",group:"user",action:"verify/submit",data:{verifyPic:o},header:{"content-type":"application/x-www-form-urlencoded"}}});uni.hideLoading(),t.data.code===REQUEST_SUCCEEDED_CODE&&(a.isSuccessed=!0)}})}}}};function _sfc_render$x(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-transition"),__easycom_3$6);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"real-name-authentication-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"身份认证")])),_:1}),vue.createVNode(r,{class:"emoji-picker-content","mode-class":"zoom-in",show:a.isSuccessed},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"authentication-success"}," 您已经提交认证信息，我们会尽快审核，感谢您为维护社区氛围做出的贡献 ")])),_:1},8,["show"]),a.isSuccessed?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"authentication-info-content"},[vue.createTextVNode(" 一.认证流程 "),vue.createElementVNode("view",{class:"authentication-tips"}," 相关资料仅用于校园身份认证,并受隐私保护协议与相关法律保护，将严格保密 "),vue.createElementVNode("view",{class:"info-type"}," 1.请上传证明照片* "),vue.createElementVNode("view",{class:"authentication-image-content",onClick:t[1]||(t[1]=e=>n.onImageContentClick())},[a.fileUrl?(vue.openBlock(),vue.createElementBlock("image",{key:0,src:a.fileUrl,mode:"scaleToFill",class:"authentication-image"},null,8,["src"])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("view",{class:"iconfont icon-xiangji",style:{fontSize:"50px",color:"#979797"}}),vue.createElementVNode("view",{class:"authentication-image-text"}," 请拍摄并上传清晰的学生证、一卡通、或录取通知书的照片 ")],64))]),vue.createElementVNode("view",{class:"authentication-reason"},[vue.createElementVNode("view",null,"说明："),vue.createElementVNode("view",null," 1. 请在本页提供一张录取通知书/学生证/校园卡/学位证/毕业证的正面照片 "),vue.createElementVNode("view",null,[vue.createTextVNode(" 2. 照片必须保持清晰，但我们"),vue.createElementVNode("text",{style:{color:"#fc1313"}},"不会采集或分析其中的信息，可以自行对学号、序列号、条形码等信息进行遮盖处理")]),vue.createElementVNode("view",null," 3. 后台将进行人工审核，保证信息符合要求 "),vue.createElementVNode("view",null," 4. 对于蓄意伪造、冒用以及欺诈等行为，本方保留封禁乃至报案的权利 "),vue.createElementVNode("view",null," 5. 其他用户无法得知您的实名认证信息 ")]),vue.createElementVNode("view",{class:"agree-content"},[vue.createElementVNode("text",{style:{color:"#fc1313"}},"上传照片代表您已阅读并同意"),vue.createElementVNode("text",{style:{color:"#2c80ff"},onClick:t[2]||(t[2]=vue.withModifiers(((...e)=>n.onPrivacyPolicyClick&&n.onPrivacyPolicyClick(...e)),["stop"]))},"《布咕星球隐私保护指引》")]),vue.createElementVNode("button",{class:"authentication-button main-color",onClick:t[3]||(t[3]=e=>n.onSubmitButtonClick())},"提交")]))])])}var PagesSettingRealNameAuthenticationRealNameAuthentication=_export_sfc(_sfc_main$y,[["render",_sfc_render$x]]);const _sfc_main$x={data:()=>({username:"",password:"",agreest:!1,MainColor:MainColor}),methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onCheckBoxClick(){this.agreest=!this.agreest},onPasswordInput(e){this.password=e},onUsernameInput(e){this.username=e},onUserProtocolClick(){uni.navigateTo({url:"/pages/login/bugu-use-protocol/bugu-use-protocol"})},onPrivacyPolicyClick(){uni.navigateTo({url:"/pages/login/bugu-privacy-policy/bugu-privacy-policy"})},onLoginButtonClick(){this.username&&this.password?this.agreest?this.tryToLogin(this.username,this.password):uni.showToast({title:"请先同意用户协议和隐私政策",icon:"none"}):uni.showToast({title:"请先输入用户名或密码",icon:"none"})},async tryToLogin(e,t){uni.showLoading({title:"正在登陆"});try{let o=await request({data:{method:"POST",group:"verify",action:"login",data:{username:e,password:t},header:{"content-type":"application/x-www-form-urlencoded"}}});if(uni.hideLoading(),o.data.code===REQUEST_SUCCEEDED_CODE){uni.showToast({title:"认证成功",icon:"success"});let e=await getMyUserInfo();e.isVerify=1,uni.setStorage({key:USER_INFO,data:e}),setTimeout((function(){uni.navigateBack({delta:1})}),1e3)}}catch{uni.showToast({title:"登录失败，请稍后再试",icon:"none"})}}}};function _sfc_render$w(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"),__easycom_1$a),l=resolveEasycom(vue.resolveDynamicComponent("uni-forms-item"),__easycom_2$4),c=resolveEasycom(vue.resolveDynamicComponent("uni-forms"),__easycom_3$2);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"account-login-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"学生认证")])),_:1}),vue.createElementVNode("view",{class:"identify-title"}," 登录学校个人门户认证 "),vue.createElementVNode("view",{class:"input-content"},[vue.createVNode(c,{class:"login-form-atform"},{default:vue.withCtx((()=>[vue.createVNode(l,{required:"true",label:"用户名",name:"username"},{default:vue.withCtx((()=>[vue.createVNode(r,{value:a.username,onInput:n.onUsernameInput,class:"login-form-input",type:"text",placeholder:"请输入用户名"},null,8,["value","onInput"])])),_:1}),vue.createVNode(l,{required:"true",label:"密码",name:"password"},{default:vue.withCtx((()=>[vue.createVNode(r,{value:a.password,onInput:n.onPasswordInput,class:"login-form-input",type:"password",placeholder:"请输入密码"},null,8,["value","onInput"])])),_:1})])),_:1})]),vue.createElementVNode("view",{class:"login-bottom"},[vue.createElementVNode("view",{class:"login-useragreement-content"},[vue.createElementVNode("checkbox",{color:a.MainColor,class:"login-useragreement",onClick:t[1]||(t[1]=e=>n.onCheckBoxClick()),checked:a.agreest},null,8,["color","checked"]),vue.createTextVNode("已阅读并同意"),vue.createElementVNode("text",{onClick:t[2]||(t[2]=vue.withModifiers(((...e)=>n.onUserProtocolClick&&n.onUserProtocolClick(...e)),["stop"])),class:"login-agreement1"},"《用户协议》"),vue.createTextVNode("和"),vue.createElementVNode("text",{onClick:t[3]||(t[3]=vue.withModifiers(((...e)=>n.onPrivacyPolicyClick&&n.onPrivacyPolicyClick(...e)),["stop"])),class:"login-agreement2"},"《隐私政策》")]),vue.createElementVNode("button",{color:a.MainColor,class:"login-form-button",onClick:t[4]||(t[4]=e=>n.onLoginButtonClick())},"登录",8,["color"])])])])}var PagesSettingSchoolLoginSchoolLogin=_export_sfc(_sfc_main$x,[["render",_sfc_render$w]]);const _sfc_main$w={data:()=>({RingingToneList:RingingToneList,refreshDynamicSound:{},newMessageSound:{},REFRESH_DYNAMIC_SOUND:REFRESH_DYNAMIC_SOUND,NEW_MESSAGE_SOUND:NEW_MESSAGE_SOUND,ringingToneSelected:0,selectType:REFRESH_DYNAMIC_SOUND}),onLoad(){let e=uni.getStorageSync(REFRESH_DYNAMIC_SOUND);e||(e=RingingToneList[6]),this.refreshDynamicSound=e;let t=uni.getStorageSync(NEW_MESSAGE_SOUND);t||(t=RingingToneList[0]),this.newMessageSound=t},methods:{onNarLeftClick(){formatAppLog("log","at pages/setting/sound-setting/sound-setting.vue:69","onNarLeftClick()"),uni.navigateBack({delta:1})},onChangeSoundItemClick(e){this.selectType=e,e===REFRESH_DYNAMIC_SOUND?this.ringingToneSelected=this.refreshDynamicSound.value:e===NEW_MESSAGE_SOUND&&(this.ringingToneSelected=this.newMessageSound.value),this.$refs.soundSelectPopup.open()},onRadioItemClick(e){this.ringingToneSelected=e.value;const t=uni.createInnerAudioContext();t.autoplay=!0,t.src=e.url,this.changeSound(e,this.selectType)},async changeSound(e,t){await uni.setStorage({key:t,data:e}),t===REFRESH_DYNAMIC_SOUND?this.refreshDynamicSound=e:t===NEW_MESSAGE_SOUND&&(this.newMessageSound=e)}}};function _sfc_render$v(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-list-item"),__easycom_1$8),l=resolveEasycom(vue.resolveDynamicComponent("uni-list"),__easycom_2$3),c=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"sound-setting-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:n.onNarLeftClick},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"声音设置")])),_:1},8,["onClickLeft"])]),vue.createVNode(l,null,{default:vue.withCtx((()=>[vue.createVNode(r,{clickable:"",showArrow:"",title:"刷新动态",rightText:a.refreshDynamicSound.label,onClick:t[0]||(t[0]=e=>n.onChangeSoundItemClick(a.REFRESH_DYNAMIC_SOUND))},null,8,["rightText"]),vue.createVNode(r,{clickable:"",showArrow:"",title:"消息通知",rightText:a.newMessageSound.label,onClick:t[1]||(t[1]=e=>n.onChangeSoundItemClick(a.NEW_MESSAGE_SOUND))},null,8,["rightText"])])),_:1}),vue.createVNode(c,{ref:"soundSelectPopup",needHead:!0,title:"铃声选择"},{default:vue.withCtx((()=>[vue.createElementVNode("radio-group",{class:"sound-select-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.RingingToneList,((e,t)=>(vue.openBlock(),vue.createElementBlock("label",{onClick:t=>n.onRadioItemClick(e),class:"sound-select-item",key:e},[vue.createElementVNode("view",{class:"sound-text"},vue.toDisplayString(e.label),1),vue.createElementVNode("view",{class:"sound-radio"},[vue.createElementVNode("radio",{color:"#4eccb8",value:e,checked:e.value==a.ringingToneSelected},null,8,["value","checked"])])],8,["onClick"])))),128))])])),_:1},512)])}var PagesSettingSoundSettingSoundSetting=_export_sfc(_sfc_main$w,[["render",_sfc_render$v]]);const _sfc_main$v={name:"uniCollapseItem",props:{title:{type:String,default:""},name:{type:[Number,String],default:""},disabled:{type:Boolean,default:!1},showAnimation:{type:Boolean,default:!1},open:{type:Boolean,default:!1},thumb:{type:String,default:""},titleBorder:{type:String,default:"auto"},border:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0}},data:()=>({isOpen:!1,isheight:null,height:0,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,nameSync:0}),watch:{open(e){this.isOpen=e,this.onClick(e,"init")}},updated(e){this.$nextTick((()=>{this.init(!0)}))},created(){this.collapse=this.getCollapse(),this.oldHeight=0},unmounted(){this.__isUnmounted=!0,this.uninstall()},mounted(){this.collapse&&(""!==this.name?this.nameSync=this.name:this.nameSync=this.collapse.childrens.length+"",-1===this.collapse.names.indexOf(this.nameSync)?this.collapse.names.push(this.nameSync):formatAppLog("warn","at uni_modules/uni-collapse/components/uni-collapse-item/uni-collapse-item.vue:154",`name 值 ${this.nameSync} 重复`),-1===this.collapse.childrens.indexOf(this)&&this.collapse.childrens.push(this),this.init())},methods:{init(e){this.getCollapseHeight(e)},uninstall(){this.collapse&&(this.collapse.childrens.forEach(((e,t)=>{e===this&&this.collapse.childrens.splice(t,1)})),this.collapse.names.forEach(((e,t)=>{e===this.nameSync&&this.collapse.names.splice(t,1)})))},onClick(e,t){this.disabled||(this.isOpen=e,this.isOpen&&this.collapse&&this.collapse.setAccordion(this),"init"!==t&&this.collapse.onChange(e,this))},getCollapseHeight(e,t=0){uni.createSelectorQuery().in(this).select(`#${this.elId}`).fields({size:!0},(o=>{if(!(t>=10)){if(!o)return t++,void this.getCollapseHeight(!1,t);this.height=o.height,this.isheight=!0,e||this.onClick(this.open,"init")}})).exec()},getNvueHwight(e){dom.getComponentRect(this.$refs["collapse--hook"],(t=>{if(t&&t.result&&t.size){if(this.height=t.size.height,this.isheight=!0,e)return;this.onClick(this.open,"init")}}))},getCollapse(e="uniCollapse"){let t=this.$parent,o=t.$options.name;for(;o!==e;){if(t=t.$parent,!t)return!1;o=t.$options.name}return t}}};function _sfc_render$u(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",{class:"uni-collapse-item"},[vue.createElementVNode("view",{onClick:t[0]||(t[0]=e=>n.onClick(!a.isOpen)),class:vue.normalizeClass(["uni-collapse-item__title",{"is-open":a.isOpen&&"auto"===o.titleBorder,"uni-collapse-item-border":"none"!==o.titleBorder}])},[vue.createElementVNode("view",{class:"uni-collapse-item__title-wrap"},[vue.renderSlot(e.$slots,"title",{},(()=>[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-collapse-item__title-box",{"is-disabled":o.disabled}])},[o.thumb?(vue.openBlock(),vue.createElementBlock("image",{key:0,src:o.thumb,class:"uni-collapse-item__title-img"},null,8,["src"])):vue.createCommentVNode("",!0),vue.createElementVNode("text",{class:"uni-collapse-item__title-text"},vue.toDisplayString(o.title),1)],2)]),!0)]),o.showArrow?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass([{"uni-collapse-item__title-arrow-active":a.isOpen,"uni-collapse-item--animation":!0===o.showAnimation},"uni-collapse-item__title-arrow"])},[vue.createVNode(s,{color:o.disabled?"#ddd":"#bbb",size:"14",type:"bottom"},null,8,["color"])],2)):vue.createCommentVNode("",!0)],2),vue.createElementVNode("view",{class:vue.normalizeClass(["uni-collapse-item__wrap",{"is--transition":o.showAnimation}]),style:vue.normalizeStyle({height:(a.isOpen?a.height:0)+"px"})},[vue.createElementVNode("view",{id:a.elId,ref:"collapse--hook",class:vue.normalizeClass(["uni-collapse-item__wrap-content",{open:a.isheight,"uni-collapse-item--border":o.border&&a.isOpen}])},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],10,["id"])],6)])}var __easycom_1$7=_export_sfc(_sfc_main$v,[["render",_sfc_render$u],["__scopeId","data-v-38002c3c"]]);const _sfc_main$u={name:"uniCollapse",emits:["change","activeItem","input","update:modelValue"],props:{value:{type:[String,Array],default:""},modelValue:{type:[String,Array],default:""},accordion:{type:[Boolean,String],default:!1}},data:()=>({}),computed:{dataValue(){let e="string"==typeof this.value&&""===this.value||Array.isArray(this.value)&&0===this.value.length;"string"==typeof this.modelValue&&""===this.modelValue||Array.isArray(this.modelValue)&&this.modelValue.length;return e?this.modelValue:this.value}},watch:{dataValue(e){this.setOpen(e)}},created(){this.childrens=[],this.names=[]},mounted(){this.setOpen(this.dataValue)},methods:{setOpen(e){let t="string"==typeof e,o=Array.isArray(e);this.childrens.forEach(((i,a)=>{if(t&&e===i.nameSync){if(!this.accordion)return void formatAppLog("warn","at uni_modules/uni-collapse/components/uni-collapse/uni-collapse.vue:74","accordion 属性为 false ,v-model 类型应该为 array");i.isOpen=!0}o&&e.forEach((e=>{if(e===i.nameSync){if(this.accordion)return void formatAppLog("warn","at uni_modules/uni-collapse/components/uni-collapse/uni-collapse.vue:84","accordion 属性为 true ,v-model 类型应该为 string");i.isOpen=!0}}))})),this.emit(e)},setAccordion(e){this.accordion&&this.childrens.forEach(((t,o)=>{e!==t&&(t.isOpen=!1)}))},resize(){this.childrens.forEach(((e,t)=>{e.getCollapseHeight()}))},onChange(e,t){let o=[];this.accordion?o=e?t.nameSync:"":this.childrens.forEach(((e,t)=>{e.isOpen&&o.push(e.nameSync)})),this.$emit("change",o),this.emit(o)},emit(e){this.$emit("input",e),this.$emit("update:modelValue",e)}}};function _sfc_render$t(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-collapse"},[vue.renderSlot(e.$slots,"default",{},void 0,!0)])}var __easycom_2$2=_export_sfc(_sfc_main$u,[["render",_sfc_render$t],["__scopeId","data-v-69a76780"]]);const _sfc_main$t={data:()=>({onNarLeftClick(){uni.navigateBack({delta:1})}}),methods:{}};function _sfc_render$s(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-collapse-item"),__easycom_1$7),l=resolveEasycom(vue.resolveDynamicComponent("uni-collapse"),__easycom_2$2);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>a.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"帮助与反馈")])),_:1}),vue.createVNode(l,{accordion:""},{default:vue.withCtx((()=>[vue.createVNode(r,{title:"为什么要进行身份认证？"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"answer-content"},[vue.createElementVNode("text",null,"我们竭力创造一个真实、安全、和谐的社交平台，只有对每一位用户都严格核实身份后我们才能保证社区的真实性，保障每一位用户的安全")])])),_:1}),vue.createVNode(r,{title:"其他人可以看到我的真实身份吗？"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"answer-content"},[vue.createElementVNode("text",null,"您在身份认证界面上传的资料仅用于身份核实，身份核实完成后我们会加密保存，其他人不会看到您的真实身份信息")])])),_:1}),vue.createVNode(r,{title:"为什么性别设置后不能修改？"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"answer-content"},[vue.createElementVNode("text",null,"为了用户安全和各类活动参与的真实性，性别一旦进行设置后无法自主修改哦，如果您的性别设置错误，请联系客服上传证明材料修改")])])),_:1}),vue.createVNode(r,{title:"为什么我的账户被禁言/封禁？"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"answer-content"},[vue.createElementVNode("text",null,"您的公开言论收到平台和社区用户的监督，当您频繁发布违法、侮辱、歧视、谣言、政治敏感等信息时会受到举报和平台的处罚， 如果您并没有发布以上信息，请联系客服进行核实和恢复账号权益")])])),_:1})])),_:1}),vue.createElementVNode("view",{class:"more-question"},[vue.createElementVNode("text",{selectable:""}," 如果您还有其他问题请添加客服QQ：3357936383 ")])])}var PagesSettingHelpHelp=_export_sfc(_sfc_main$t,[["render",_sfc_render$s]]);const _sfc_main$s={data:()=>({AppVersion:AppVersion}),methods:{onNarLeftClick(){formatAppLog("log","at pages/setting/about-bugu/about-bugu.vue:67","onNarLeftClick()"),uni.navigateBack({delta:1})}}};function _sfc_render$r(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-list-item"),__easycom_1$8);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"body-box"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"关于布咕星球")])),_:1}),vue.createElementVNode("view",{class:"logo-content"},[vue.createElementVNode("view",{class:"about-logoicon"},[vue.createElementVNode("image",{class:"about-logo-image",style:{height:"90px",width:"90px",borderRadius:"30px"},src:"/static/imgs/logo.png",mode:"aspectFit"})]),vue.createElementVNode("view",{class:"about-logo-image-content"},[vue.createElementVNode("image",{class:"about-logo-image",style:{height:"25px",width:"110px"},src:"/static/imgs/logo-text.png"})])]),vue.createElementVNode("view",{class:"version-number"}," 版本 "+vue.toDisplayString(a.AppVersion),1),vue.createElementVNode("view",{class:"hbutliving-content"},[vue.createElementVNode("view",{class:"hbutliving-logo"},[vue.createElementVNode("image",{class:"about-logo-image",style:{height:"30px",width:"30px"},src:"/static/imgs/hbutliving-logo.png"})]),vue.createElementVNode("view",{class:"hbutliving-text"}," 湖工Living 出品 ")]),vue.createElementVNode("view",{class:"update-log"},[vue.createVNode(r,{clickable:"",showArrow:"",link:"",to:"/pages/setting/about-bugu/update-log",title:"更新日志",arrow:"right"})])])])}var PagesSettingAboutBuguAboutBugu=_export_sfc(_sfc_main$s,[["render",_sfc_render$r]]);const _sfc_main$r={name:"UniCard",emits:["click"],props:{title:{type:String,default:""},subTitle:{type:String,default:""},padding:{type:String,default:"10px"},margin:{type:String,default:"15px"},spacing:{type:String,default:"0 10px"},extra:{type:String,default:""},cover:{type:String,default:""},thumbnail:{type:String,default:""},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!0},shadow:{type:String,default:"0px 0px 3px 1px rgba(0, 0, 0, 0.08)"},border:{type:Boolean,default:!0}},methods:{onClick(e){this.$emit("click",e)}}};function _sfc_render$q(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["uni-card",{"uni-card--full":o.isFull,"uni-card--shadow":o.isShadow,"uni-card--border":o.border}]),style:vue.normalizeStyle({margin:o.isFull?0:o.margin,padding:o.spacing,"box-shadow":o.isShadow?o.shadow:""})},[vue.renderSlot(e.$slots,"cover",{},(()=>[o.cover?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-card__cover"},[vue.createElementVNode("image",{class:"uni-card__cover-image",mode:"widthFix",onClick:t[0]||(t[0]=e=>n.onClick("cover")),src:o.cover},null,8,["src"])])):vue.createCommentVNode("",!0)]),!0),vue.renderSlot(e.$slots,"title",{},(()=>[o.title||o.extra?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-card__header"},[vue.createElementVNode("view",{class:"uni-card__header-box",onClick:t[1]||(t[1]=e=>n.onClick("title"))},[o.thumbnail?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-card__header-avatar"},[vue.createElementVNode("image",{class:"uni-card__header-avatar-image",src:o.thumbnail,mode:"aspectFit"},null,8,["src"])])):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"uni-card__header-content"},[vue.createElementVNode("text",{class:"uni-card__header-content-title uni-ellipsis"},vue.toDisplayString(o.title),1),o.title&&o.subTitle?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"uni-card__header-content-subtitle uni-ellipsis"},vue.toDisplayString(o.subTitle),1)):vue.createCommentVNode("",!0)])]),vue.createElementVNode("view",{class:"uni-card__header-extra",onClick:t[2]||(t[2]=e=>n.onClick("extra"))},[vue.createElementVNode("text",{class:"uni-card__header-extra-text"},vue.toDisplayString(o.extra),1)])])):vue.createCommentVNode("",!0)]),!0),vue.createElementVNode("view",{class:"uni-card__content",style:vue.normalizeStyle({padding:o.padding}),onClick:t[3]||(t[3]=e=>n.onClick("content"))},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],4),vue.createElementVNode("view",{class:"uni-card__actions",onClick:t[4]||(t[4]=e=>n.onClick("actions"))},[vue.renderSlot(e.$slots,"actions",{},void 0,!0)])],6)}var __easycom_1$6=_export_sfc(_sfc_main$r,[["render",_sfc_render$q],["__scopeId","data-v-62311a94"]]);const _sfc_main$q={data:()=>({updateLogs:updateLogs}),onLoad(){},methods:{onNarLeftClick(){formatAppLog("log","at pages/setting/about-bugu/update-log.vue:42","onNarLeftClick()"),uni.navigateBack({delta:1})}}};function _sfc_render$p(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-card"),__easycom_1$6);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:n.onNarLeftClick},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"更新日志")])),_:1},8,["onClickLeft"]),vue.createElementVNode("view",{class:"passage"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.updateLogs,((e,t)=>(vue.openBlock(),vue.createBlock(r,{key:e.version,title:"v "+e.version+" 更新日志"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.logTexts,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t},vue.toDisplayString(t+1)+"."+vue.toDisplayString(e),1)))),128))])])),_:2},1032,["title"])))),128))])])}var PagesSettingAboutBuguUpdateLog=_export_sfc(_sfc_main$q,[["render",_sfc_render$p]]);const _sfc_main$p={name:"uniPopupDialog",mixins:[popup],emits:["confirm","close"],props:{value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},customOkText:{type:String,default:"确定"},customCancelText:{type:String,default:"取消"},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1}},data:()=>({dialogType:"error",focus:!1,val:""}),computed:{okText(){return this.customOkText},cancelText(){return this.customCancelText},placeholderText(){return this.placeholder},titleText(){return this.title}},watch:{type(e){this.dialogType=e},mode(e){"input"===e&&(this.dialogType="info")},value(e){this.val=e}},created(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},mounted(){this.focus=!0},methods:{onOk(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog(){this.$emit("close"),this.beforeClose||this.popup.close()},close(){this.popup.close()}}};function _sfc_render$o(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-popup-dialog"},[vue.createElementVNode("view",{class:"uni-dialog-title"},[vue.createElementVNode("text",{class:vue.normalizeClass(["uni-dialog-title-text",["uni-popup__"+a.dialogType]])},vue.toDisplayString(n.titleText),3)]),"base"===o.mode?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-dialog-content"},[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createElementVNode("text",{class:"uni-dialog-content-text"},vue.toDisplayString(o.content),1)]),!0)])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-dialog-content"},[vue.renderSlot(e.$slots,"default",{},(()=>[vue.withDirectives(vue.createElementVNode("input",{class:"uni-dialog-input","onUpdate:modelValue":t[0]||(t[0]=e=>a.val=e),type:"text",placeholder:n.placeholderText,focus:a.focus},null,8,["placeholder","focus"]),[[vue.vModelText,a.val]])]),!0)])),vue.createElementVNode("view",{class:"uni-dialog-button-group"},[vue.createElementVNode("view",{class:"uni-dialog-button",onClick:t[1]||(t[1]=(...e)=>n.closeDialog&&n.closeDialog(...e))},[vue.createElementVNode("text",{class:"uni-dialog-button-text"},vue.toDisplayString(n.cancelText),1)]),vue.createElementVNode("view",{class:"uni-dialog-button uni-border-left",onClick:t[2]||(t[2]=(...e)=>n.onOk&&n.onOk(...e))},[vue.createElementVNode("text",{class:"uni-dialog-button-text uni-button-color"},vue.toDisplayString(n.okText),1)])])])}var __easycom_1$5=_export_sfc(_sfc_main$p,[["render",_sfc_render$o],["__scopeId","data-v-baf512ea"]]);const _sfc_main$o={data:()=>({boxSelected:0,femaleBoxSum:0,maleBoxSum:0,lastClickTime:0,boxTicketsAvailableSum:0,userInfo:{},boxInfo:{},boxOwnerInfo:{}}),async onLoad(){this.userInfo=await getMyUserInfo(),this.getBoxInfo(),this.getBoxTicketsInfo(1)},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onShowRulesButtonClick(){this.$refs.boxRulePopup.open()},onGetMoreTicketsClick(){uni.showModal({title:"获取方法",content:"投入盲盒即可获取一张盲盒劵哦~"})},onPutBoxButtonClick(){2!=this.boxSelected?this.$refs.putboxPopup.open():uni.navigateTo({url:"/pages/bugu-secondary-page/blind-box/my-box"})},onPutBoxConfirm(e){this.putBox(this.boxSelected,e)},onBoxTicketsButtonClick(){uni.navigateTo({url:"/pages/bugu-secondary-page/blind-box/box-tickets"})},async takeBox(e){if(this.userInfo.sex==e)return void uni.showToast({title:"只能获取异性的盲盒哦",icon:"error"});let t=await request({data:{method:"GET",group:"blindBox",action:"collect",data:{sex:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){let e=t.data.data,o=await getUserinfo(e.userId);this.boxInfo=e,this.boxOwnerInfo=o,this.getBoxInfo(),this.$refs.takeboxPopup.open(),formatAppLog("log","at pages/bugu-secondary-page/blind-box/blind-box.vue:256","takeBoxSuccess",t.data)}else uni.showModal({title:"获取失败",content:t.data.userMsg}),formatAppLog("log","at pages/bugu-secondary-page/blind-box/blind-box.vue:262","takeBoxFail",t.data)},onBoxSelected(e){let t=Date.now();if(this.boxSelected==e){if(2==this.boxSelected)return void uni.navigateTo({url:"/pages/bugu-secondary-page/blind-box/my-box"});if(t-this.lastClickTime<500)return;this.lastClickTime=t;let o=this;uni.showModal({title:"抽取盲盒",content:`你确定要消耗一张盲盒劵抽取一个${0==e?"女":"男"}盒吗？`,success:function(i){i.confirm?(o.takeBox(e),o.lastClickTime=t):i.cancel&&formatAppLog("log","at pages/bugu-secondary-page/blind-box/blind-box.vue:293","用户点击取消")}})}else this.boxSelected=e,this.lastClickTime=t},async putBox(e,t){let o=await request({data:{method:"PUT",group:"blindBox",action:"deliver",data:{sex:e,text:t},header:{"content-type":"application/x-www-form-urlencoded"}}});o.data.code===REQUEST_SUCCEEDED_CODE?(this.getBoxInfo(),uni.showToast({title:"投送成功",icon:"success"})):formatAppLog("log","at pages/bugu-secondary-page/blind-box/blind-box.vue:329","putBoxFail",o.data)},async getBoxInfo(){let e=await request({data:{method:"GET",group:"blindBox",action:"info",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});e.data.code===REQUEST_SUCCEEDED_CODE?(this.femaleBoxSum=e.data.data.femaleBoxSum,this.maleBoxSum=e.data.data.maleBoxSum):formatAppLog("log","at pages/bugu-secondary-page/blind-box/blind-box.vue:353","getBoxInfo",e.data)},async getBoxTicketsInfo(e){let t=await request({data:{method:"GET",group:"blindBox",action:"ticket/list",data:{page:e},header:{"content-type":"application/x-www-form-urlencoded"}}});t.data.code===REQUEST_SUCCEEDED_CODE?this.boxTicketsAvailableSum=t.data.data.list.availableSum:formatAppLog("log","at pages/bugu-secondary-page/blind-box/blind-box.vue:377","getBoxTicketsInfo",t.data)}}};function _sfc_render$n(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-popup-dialog"),__easycom_1$5),l=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_2$7);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"blind-box-content",style:vue.normalizeStyle({backgroundImage:0==a.boxSelected?"linear-gradient(to bottom, #fcf5f7, #fff);":1==a.boxSelected?"linear-gradient(to bottom, #f1f5fc, #fff);":"linear-gradient(to bottom, #fefaf5, #fff);"})},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"布咕盲盒")])),_:1}),vue.createElementVNode("view",{class:"upper-right-tips-content"},[vue.createElementVNode("view",{class:"tips-image-content"},[vue.createElementVNode("image",{mode:"aspectFill",src:"/static/imgs/bird.png",class:"tips-image"},[vue.createElementVNode("view",{class:"tips rule-tips",style:vue.normalizeStyle({backgroundColor:0==a.boxSelected?"#f0afc7":1==a.boxSelected?"#8fd5f1":"#f9e3ce"}),onClick:t[1]||(t[1]=e=>n.onShowRulesButtonClick())}," 查看规则 ",4),vue.createElementVNode("view",{class:"tips box-tips",style:vue.normalizeStyle({backgroundColor:0==a.boxSelected?"#f0afc7":1==a.boxSelected?"#8fd5f1":"#f9e3ce"})},vue.toDisplayString(0==a.boxSelected?`当前有${a.femaleBoxSum}个女生盒子`:1==a.boxSelected?`当前有${a.maleBoxSum}个男生盒子`:"我收到和投入的盒子"),5),vue.createElementVNode("view",{class:"tips tickets-tips",style:vue.normalizeStyle({backgroundColor:0==a.boxSelected?"#f0afc7":1==a.boxSelected?"#8fd5f1":"#f9e3ce"}),onClick:t[2]||(t[2]=(...e)=>n.onBoxTicketsButtonClick&&n.onBoxTicketsButtonClick(...e))}," 剩余盲盒劵："+vue.toDisplayString(a.boxTicketsAvailableSum)+"张 ",5)])])]),vue.createElementVNode("view",{class:"take-box-content"},[vue.createElementVNode("view",{class:"take-girl-box"},[vue.createElementVNode("view",{class:"box-imgae",style:vue.normalizeStyle({border:0==a.boxSelected?"7px dotted #f0afc7":"7px dotted #ffffff00"}),onClick:t[3]||(t[3]=e=>n.onBoxSelected(0))},[vue.createElementVNode("image",{style:{height:"70px",width:"70px"},mode:"aspectFill",src:0==a.boxSelected?"/static/svgs/box-girl-selected.svg":"/static/svgs/box-girl.svg"},null,8,["src"])],4)]),vue.createElementVNode("view",{class:"take-boy-box"},[vue.createElementVNode("view",{class:"box-imgae",style:vue.normalizeStyle({border:1==a.boxSelected?"7px dotted #8fd5f1":"7px dotted #ffffff00"}),onClick:t[4]||(t[4]=e=>n.onBoxSelected(1))},[vue.createElementVNode("image",{style:{height:"70px",width:"70px"},mode:"aspectFill",src:1==a.boxSelected?"/static/svgs/box-boy-selected.svg":"/static/svgs/box-boy.svg"},null,8,["src"])],4)]),vue.createElementVNode("view",{class:"take-me-box"},[vue.createElementVNode("view",{class:"box-imgae",style:vue.normalizeStyle({border:2==a.boxSelected?"7px dotted #f9e3ce":"7px dotted #ffffff00"}),onClick:t[5]||(t[5]=e=>n.onBoxSelected(2))},[vue.createElementVNode("image",{style:{height:"70px",width:"70px"},mode:"aspectFill",src:2==a.boxSelected?"/static/svgs/box-me-selected.svg":"/static/svgs/box-me.svg"},null,8,["src"])],4)])]),vue.createElementVNode("view",{class:"get-more-tikets",style:vue.normalizeStyle({backgroundColor:0==a.boxSelected?"#f0afc7":1==a.boxSelected?"#8fd5f1":"#f9e3ce"}),onClick:t[6]||(t[6]=e=>n.onGetMoreTicketsClick())},[vue.createElementVNode("view",{class:"iconfont icon-menpiao",style:{fontSize:"25px",color:"#787f8b"}}),vue.createElementVNode("view",null,"获取更多盲盒劵")],4),vue.createElementVNode("view",{class:"put-box-content"},[vue.createElementVNode("view",{class:"put-box"},[vue.createElementVNode("view",{class:"put-box-text",style:vue.normalizeStyle({backgroundColor:0==a.boxSelected?"#f0afc7":1==a.boxSelected?"#8fd5f1":"#f9e3ce"}),onClick:t[7]||(t[7]=e=>n.onPutBoxButtonClick())},vue.toDisplayString(0==a.boxSelected?"留下女盒":1==a.boxSelected?"留下男盒":"我的盒子"),5)])])],4),vue.createVNode(l,{ref:"takeboxPopup",type:"dialog"},{default:vue.withCtx((()=>[a.boxOwnerInfo.username?(vue.openBlock(),vue.createBlock(r,{key:0,title:`来自${a.boxOwnerInfo.username}的盒子`,customOkText:"和ta打声招呼",customCancelText:"再等一会儿"},{default:vue.withCtx((()=>[vue.createElementVNode("text",null,vue.toDisplayString(a.boxInfo.text),1)])),_:1},8,["title"])):vue.createCommentVNode("",!0)])),_:1},512),vue.createVNode(l,{ref:"putboxPopup",type:"dialog"},{default:vue.withCtx((()=>[vue.createVNode(r,{mode:"input",title:"投放盲盒",placeholder:"介绍一下自己吧",onConfirm:n.onPutBoxConfirm},null,8,["onConfirm"])])),_:1},512),vue.createVNode(l,{ref:"boxRulePopup",type:"dialog"},{default:vue.withCtx((()=>[vue.createVNode(r,{title:"盲盒规则介绍",customCancelText:"我知道了"},{default:vue.withCtx((()=>[vue.createElementVNode("text",null,vue.toDisplayString("\n\t\t\t\t\t\t1.点击盒子切换类型，再次点击抽取一个盲盒\n\t\t\t\t\t\t2.投入盲盒可以获取一张盲盒劵，每周上限两张\n\t\t\t\t\t\t3.抽取盲盒需要消耗一张盲盒劵哦~\n\t\t\t\t\t\t4.一天只能抽取和投入一个盲盒哦~\n\t\t\t\t\t\t"),1)])),_:1})])),_:1},512)])}var PagesBuguSecondaryPageBlindBoxBlindBox=_export_sfc(_sfc_main$o,[["render",_sfc_render$n]]);const _sfc_main$n={name:"my-box-item",props:{myBoxData:{type:Object,required:!0}},data:()=>({}),methods:{onClick(){this.$emit("onClick")}}};function _sfc_render$m(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{class:"my-box-ite-content",style:vue.normalizeStyle({backgroundImage:0==o.myBoxData.sex?"linear-gradient(to left, #fce9f0, #fff);":"linear-gradient(to left, #ebf2fd, #fff);"}),onClick:t[0]||(t[0]=(...e)=>n.onClick&&n.onClick(...e))},[vue.createElementVNode("view",{class:"my-box-info"},[vue.createElementVNode("view",{class:"my-box-type"},vue.toDisplayString(0==o.myBoxData.sex?"女生盒子":"男生盒子")+" "+vue.toDisplayString(1==o.myBoxData.isDeleted?"-已删除":1==o.myBoxData.isCollected?"-已被收取":""),1),vue.createElementVNode("view",{class:"my-box-text"},vue.toDisplayString(o.myBoxData.text),1),vue.createElementVNode("view",{class:"my-box-time"},vue.toDisplayString(o.myBoxData.time),1)]),vue.createElementVNode("view",{class:"my-box-more-icon"},[vue.createVNode(s,{color:"#b4b4b4",type:"right",size:"20"})])],4)])}var __easycom_1$4=_export_sfc(_sfc_main$n,[["render",_sfc_render$m],["__scopeId","data-v-51438121"]]);const _sfc_main$m={name:"UniPagination",emits:["update:modelValue","input","change"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},prevText:{type:String},nextText:{type:String},current:{type:[Number,String],default:1},total:{type:[Number,String],default:0},pageSize:{type:[Number,String],default:10},showIcon:{type:[Boolean,String],default:!1},pagerCount:{type:Number,default:7}},data:()=>({currentIndex:1,paperData:[]}),computed:{prevPageText(){return this.prevText||t("uni-pagination.prevText")},nextPageText(){return this.nextText||t("uni-pagination.nextText")},maxPage(){let e=1,t=Number(this.total),o=Number(this.pageSize);return t&&o&&(e=Math.ceil(t/o)),e},paper(){const e=this.currentIndex,t=this.pagerCount,o=this.total,i=this.pageSize;let a=[],n=[],s=Math.ceil(o/i);for(let l=0;l<s;l++)a.push(l+1);n.push(1);const r=a[a.length-(t+1)/2];return a.forEach(((o,i)=>{(t+1)/2>=e?o<t+1&&o>1&&n.push(o):e+2<=r?o>e-(t+1)/2&&o<e+(t+1)/2&&n.push(o):(o>e-(t+1)/2||s-t<o)&&o<a[a.length-1]&&n.push(o)})),s>t?((t+1)/2>=e?n[n.length-1]="...":e+2<=r?(n[1]="...",n[n.length-1]="..."):n[1]="...",n.push(a[a.length-1])):(t+1)/2>=e||e+2<=r||(n.shift(),n.push(a[a.length-1])),n}},watch:{current:{immediate:!0,handler(e,t){this.currentIndex=e<1?1:e}},value:{immediate:!0,handler(e){1===Number(this.current)&&(this.currentIndex=e<1?1:e)}}},methods:{selectPage(e,t){if(parseInt(e))this.currentIndex=e,this.change("current");else{let e=Math.ceil(this.total/this.pageSize);if(t<=1)return void(this.currentIndex-5>1?this.currentIndex-=5:this.currentIndex=1);if(t>=6)return void(this.currentIndex+5>e?this.currentIndex=e:this.currentIndex+=5)}},clickLeft(){1!==Number(this.currentIndex)&&(this.currentIndex-=1,this.change("prev"))},clickRight(){Number(this.currentIndex)>=this.maxPage||(this.currentIndex+=1,this.change("next"))},change(e){this.$emit("input",this.currentIndex),this.$emit("update:modelValue",this.currentIndex),this.$emit("change",{type:e,current:this.currentIndex})}}};function _sfc_render$l(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h);return vue.openBlock(),vue.createElementBlock("view",{class:"uni-pagination"},[vue.createElementVNode("view",{class:"uni-pagination__total is-phone-hide"},"共 "+vue.toDisplayString(o.total)+" 条",1),vue.createElementVNode("view",{class:vue.normalizeClass(["uni-pagination__btn",1===a.currentIndex?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":1===a.currentIndex?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:t[0]||(t[0]=(...e)=>n.clickLeft&&n.clickLeft(...e))},[!0===o.showIcon||"true"===o.showIcon?(vue.openBlock(),vue.createBlock(s,{key:0,color:"#666",size:"16",type:"left"})):(vue.openBlock(),vue.createElementBlock("text",{key:1,class:"uni-pagination__child-btn"},vue.toDisplayString(n.prevPageText),1))],10,["hover-class"]),vue.createElementVNode("view",{class:"uni-pagination__num uni-pagination__num-flex-none"},[vue.createElementVNode("view",{class:"uni-pagination__num-current"},[vue.createElementVNode("text",{class:"uni-pagination__num-current-text is-pc-hide",style:{color:"#409EFF"}},vue.toDisplayString(a.currentIndex),1),vue.createElementVNode("text",{class:"uni-pagination__num-current-text is-pc-hide"},"/"+vue.toDisplayString(n.maxPage||0),1),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.paper,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t,class:vue.normalizeClass([{"page--active":e===a.currentIndex},"uni-pagination__num-tag tag--active is-phone-hide"]),onClick:o=>n.selectPage(e,t)},[vue.createElementVNode("text",null,vue.toDisplayString(e),1)],10,["onClick"])))),128))])]),vue.createElementVNode("view",{class:vue.normalizeClass(["uni-pagination__btn",a.currentIndex>=n.maxPage?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":a.currentIndex===n.maxPage?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:t[1]||(t[1]=(...e)=>n.clickRight&&n.clickRight(...e))},[!0===o.showIcon||"true"===o.showIcon?(vue.openBlock(),vue.createBlock(s,{key:0,color:"#666",size:"16",type:"right"})):(vue.openBlock(),vue.createElementBlock("text",{key:1,class:"uni-pagination__child-btn"},vue.toDisplayString(n.nextPageText),1))],10,["hover-class"])])}var __easycom_3$1=_export_sfc(_sfc_main$m,[["render",_sfc_render$l],["__scopeId","data-v-be39dc20"]]);const _sfc_main$l={data:()=>({tabSelected:0,tookBoxInfos:[],tookBoxPage:1,tookBoxSum:0,tookBoxDetail:{},putBoxInfos:[],putBoxPage:1,putBoxSum:0,putBoxDetail:{}}),onLoad(){this.tookBoxLog(1),this.putBoxLog(1)},methods:{onNarLeftClick(){formatAppLog("log","at pages/bugu-secondary-page/blind-box/my-box.vue:152","onNarLeftClick()"),uni.navigateBack({delta:1})},onTabChange(e){this.tabSelected=e},tookBoxPageChange(e){this.tookBoxPage=e.current,this.tookBoxLog(this.tookBoxPage)},putBoxPageChange(e){this.putBoxPage=e.current,this.putBoxLog(this.putBoxPage)},onTookBoxItemClick(e){this.tookBoxDetail=e,this.$refs.tookBoxDetailPopup.open()},onPutBoxItemClick(e){this.putBoxDetail=e,this.$refs.putBoxDetailPopup.open()},onDeleteButtonClick(e){let t=this;uni.showModal({title:"删除盒子",content:"你确定要删除这个盒子吗？已经被收取的盒子无法删除哦",success:function(o){o.confirm?(t.deleteBox(e.id),t.$refs.putBoxDetailPopup.close()):o.cancel&&formatAppLog("log","at pages/bugu-secondary-page/blind-box/my-box.vue:208","用户点击取消")}})},async tookBoxLog(e){let t=await request({data:{method:"GET",group:"blindBox",action:"collect/log",data:{page:e},header:{"content-type":"application/x-www-form-urlencoded"}}});t.data.code===REQUEST_SUCCEEDED_CODE?(this.tookBoxInfos=t.data.data.list,this.tookBoxSum=t.data.data.total):formatAppLog("log","at pages/bugu-secondary-page/blind-box/my-box.vue:236","tookBoxLogFail",t.data)},async putBoxLog(e){let t=await request({data:{method:"GET",group:"blindBox",action:"deliver/log",data:{page:e},header:{"content-type":"application/x-www-form-urlencoded"}}});t.data.code===REQUEST_SUCCEEDED_CODE?(this.putBoxInfos=t.data.data.list,this.putBoxSum=t.data.data.total):formatAppLog("log","at pages/bugu-secondary-page/blind-box/my-box.vue:261","putBoxLogFail",t.data)},async deleteBox(e){let t=await request({data:{method:"DELETE",group:"blindBox",action:`${e}/delete`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){formatAppLog("log","at pages/bugu-secondary-page/blind-box/my-box.vue:283","删除成功");for(let t=0;t<this.putBoxInfos.length;t++)if(this.putBoxInfos[t].id==e){this.putBoxInfos[t].isDeleted=1;break}}else formatAppLog("log","at pages/bugu-secondary-page/blind-box/my-box.vue:292","tookBoxLogFail",t.data)}}};function _sfc_render$k(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("my-box-item"),__easycom_1$4),l=resolveEasycom(vue.resolveDynamicComponent("uni-pagination"),__easycom_3$1),c=resolveEasycom(vue.resolveDynamicComponent("uni-transition"),__easycom_3$6),u=resolveEasycom(vue.resolveDynamicComponent("uni-list-item"),__easycom_1$8),d=resolveEasycom(vue.resolveDynamicComponent("uni-list"),__easycom_2$3),m=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"我的盒子")])),_:1}),vue.createElementVNode("view",{class:"my-box-content"},[vue.createElementVNode("view",{class:"box-tags-content"},[vue.createElementVNode("view",{class:"box-tag-take",style:vue.normalizeStyle({backgroundColor:0==a.tabSelected?"#ffd5a9":"#fff",color:0==a.tabSelected?"#000":"#8a8a8a"}),onClick:t[1]||(t[1]=e=>n.onTabChange(0))}," 我开的盒子 ",4),vue.createElementVNode("view",{class:"box-tag-put",style:vue.normalizeStyle({backgroundColor:1==a.tabSelected?"#ffd5a9":"#fff",color:1==a.tabSelected?"#000":"#8a8a8a"}),onClick:t[2]||(t[2]=e=>n.onTabChange(1))}," 我留的盒子 ",4)]),vue.createElementVNode("view",{class:"box-logs-content"},[0==a.tabSelected?(vue.openBlock(),vue.createBlock(c,{key:0,class:"emoji-picker-content","mode-class":"slide-left",show:0==a.tabSelected},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"box-take-log"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.tookBoxInfos,((e,t)=>(vue.openBlock(),vue.createBlock(r,{key:e.id,myBoxData:{time:e.collectTime,id:e.id,sex:e.sex,text:e.text,userId:e.userId,isCollected:0,isDeleted:0},onOnClick:t=>n.onTookBoxItemClick(e)},null,8,["myBoxData","onOnClick"])))),128)),vue.createVNode(l,{total:a.tookBoxSum,prevText:"上一页",nextText:"下一页",pageSize:"5",pagerCount:a.tookBoxPage,onChange:n.tookBoxPageChange},null,8,["total","pagerCount","onChange"])])])),_:1},8,["show"])):vue.createCommentVNode("",!0),1==a.tabSelected?(vue.openBlock(),vue.createBlock(c,{key:1,class:"emoji-picker-content","mode-class":"slide-right",show:1==a.tabSelected},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"box-put-log"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.putBoxInfos,((e,t)=>(vue.openBlock(),vue.createBlock(r,{key:e.id,myBoxData:{time:e.createTime,id:e.id,sex:e.sex,text:e.text,userId:e.userId,isCollected:e.isCollected,isDeleted:e.isDeleted},onOnClick:t=>n.onPutBoxItemClick(e)},null,8,["myBoxData","onOnClick"])))),128)),vue.createVNode(l,{total:a.putBoxSum,prevText:"上一页",nextText:"下一页",pageSize:"5",pagerCount:a.putBoxPage,onChange:n.putBoxPageChange},null,8,["total","pagerCount","onChange"])])])),_:1},8,["show"])):vue.createCommentVNode("",!0)]),vue.createVNode(m,{ref:"tookBoxDetailPopup",needHead:"",title:"盒子详情"},{default:vue.withCtx((()=>[a.tookBoxDetail.id?(vue.openBlock(),vue.createBlock(d,{key:0},{default:vue.withCtx((()=>[vue.createVNode(u,{title:"获取时间",rightText:a.tookBoxDetail.collectTime},null,8,["rightText"]),vue.createVNode(u,{title:"内容",note:a.tookBoxDetail.text},null,8,["note"]),vue.createVNode(u,{title:"性别",rightText:0==a.tookBoxDetail.sex?"女":"男"},null,8,["rightText"])])),_:1})):vue.createCommentVNode("",!0),vue.createElementVNode("view",{class:"box-edit-button main-color"},"去ta的主页")])),_:1},512),vue.createVNode(m,{ref:"putBoxDetailPopup",needHead:"",title:"盒子详情"},{default:vue.withCtx((()=>[a.putBoxDetail.id?(vue.openBlock(),vue.createBlock(d,{key:0},{default:vue.withCtx((()=>[vue.createVNode(u,{title:"创建时间",rightText:a.putBoxDetail.createTime},null,8,["rightText"]),vue.createVNode(u,{title:"内容",note:a.putBoxDetail.text},null,8,["note"]),vue.createVNode(u,{title:"性别",rightText:0==a.putBoxDetail.sex?"女":"男"},null,8,["rightText"])])),_:1})):vue.createCommentVNode("",!0),1!=a.putBoxDetail.isDeleted?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"box-edit-button",onClick:t[3]||(t[3]=e=>n.onDeleteButtonClick(a.putBoxDetail))},"删除这个盒子")):vue.createCommentVNode("",!0)])),_:1},512)])])}var PagesBuguSecondaryPageBlindBoxMyBox=_export_sfc(_sfc_main$l,[["render",_sfc_render$k]]);const _sfc_main$k={data:()=>({boxTicketsAvailableSum:0,tickets:[],total:0,pageNumber:1}),onLoad(){this.getBoxTicketsInfo(this.pageNumber)},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onPageChange(e){this.pageNumber=e.current,this.getBoxTicketsInfo(this.pageNumber)},async getBoxTicketsInfo(e){let t=await request({data:{method:"GET",group:"blindBox",action:"ticket/list",data:{page:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){let e=t.data.data;this.boxTicketsAvailableSum=e.list.availableSum,this.tickets=e.list.tickets,this.total=e.total}else formatAppLog("log","at pages/bugu-secondary-page/blind-box/box-tickets.vue:105","getBoxTicketsInfo",t.data)}}};function _sfc_render$j(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-list-item"),__easycom_1$8),l=resolveEasycom(vue.resolveDynamicComponent("uni-list"),__easycom_2$3),c=resolveEasycom(vue.resolveDynamicComponent("uni-pagination"),__easycom_3$1),u=resolveEasycom(vue.resolveDynamicComponent("uni-card"),__easycom_1$6);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"我的盲盒劵")])),_:1}),vue.createElementVNode("view",{class:"box-tickets-content"},[vue.createVNode(u,{title:"我的盲盒劵",extra:`剩余${a.boxTicketsAvailableSum}张`},{default:vue.withCtx((()=>[vue.createVNode(l,null,{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.tickets,((e,t)=>(vue.openBlock(),vue.createBlock(r,{key:e.id,title:"获取时间",note:e.createTime,rightText:1==e.isUsed?"已使用":"未使用"},null,8,["note","rightText"])))),128))])),_:1}),vue.createVNode(c,{class:"takes-pagination",total:a.total,prevText:"上一页",nextText:"下一页",pageSize:"5",pagerCount:a.pageNumber,onChange:n.onPageChange},null,8,["total","pagerCount","onChange"])])),_:1},8,["extra"])])])}var PagesBuguSecondaryPageBlindBoxBoxTickets=_export_sfc(_sfc_main$k,[["render",_sfc_render$j]]);const innerAudioContext=uni.createInnerAudioContext(),_sfc_main$j={name:"chat-item",props:{chatText:{type:String,required:!0},messageType:{type:Number,required:!0},avatarUrl:{type:String,default:""},isMe:{type:Boolean,required:!0},voiceTime:{type:Number,default:0},isNotRead:{type:Boolean,default:!1}},data:()=>({isPlayVoice:!1}),methods:{onVoicePlayClick(){this.isPlayVoice?(innerAudioContext.stop(),this.isPlayVoice=!1):(innerAudioContext.src=this.chatText,innerAudioContext.play(),this.isPlayVoice=!0,innerAudioContext.onEnded((()=>{this.isPlayVoice=!1})))},onLongPress(){this.$emit("onLongPress")}}};function _sfc_render$i(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",null,[-1==o.messageType?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"message-withdraw"},vue.toDisplayString(o.chatText),1)):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:vue.normalizeClass(o.isMe?"chat-item-me-content":"chat-item-content")},[vue.createElementVNode("view",null,[vue.createElementVNode("image",{mode:"aspectFill",class:"chat-avatar",src:o.avatarUrl},null,8,["src"])]),vue.createElementVNode("view",{onLongpress:t[1]||(t[1]=(...e)=>n.onLongPress&&n.onLongPress(...e)),class:"chat-text"},[1==o.messageType?(vue.openBlock(),vue.createElementBlock("view",{key:0},[vue.createElementVNode("image",{style:{height:"60vw",maxWidth:"60vw"},lazyLoad:"",mode:"heightFix",src:o.chatText},null,8,["src"])])):2==o.messageType?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"chat-voice",style:vue.normalizeStyle({width:o.voiceTime/20*100+"px"})},[vue.createElementVNode("view",{class:"iconfont icon-yuyin-l",style:{fontSize:"25px",color:"#c1c1c1"}}),vue.createElementVNode("view",{onClick:t[0]||(t[0]=(...e)=>n.onVoicePlayClick&&n.onVoicePlayClick(...e)),class:"voice-play-tips"},vue.toDisplayString(a.isPlayVoice?"正在播放":`${o.voiceTime}`),1)],4)):(vue.openBlock(),vue.createElementBlock("text",{key:2},vue.toDisplayString(o.chatText),1)),o.isNotRead?(vue.openBlock(),vue.createElementBlock("view",{key:3,class:"is-not-read-ponit"})):vue.createCommentVNode("",!0)],32)],2))])}var __easycom_2$1=_export_sfc(_sfc_main$j,[["render",_sfc_render$i],["__scopeId","data-v-7903176d"]]);const _sfc_main$i={name:"custom-expression",props:{contentHeight:{type:Number,required:!0}},data:()=>({haveMore:!0,page:1,expressions:[],editExpression:{},editIndex:0}),async created(){this.expressions=await this.getExpressions(this.page)},methods:{onExpressionItemClick(e,t){this.$emit("onItemClick",e,t)},onLongPress(e,t){this.editExpression=e,this.editIndex=t,this.$refs.expressionItemActionPopup.open()},onDeleteTextClick(){this.deleteExpression(this.editExpression.id,this.editIndex),this.$refs.expressionItemActionPopup.close()},async refresh(){this.page=1,this.expressions=await this.getExpressions(this.page)},async onScroolToLower(){if(this.haveMore){this.page=this.page+1;let e=await this.getExpressions(this.page),t=this.expressions;t=t.concat(e),this.expressions=t}},async getExpressions(e){let t=await request({data:{method:"GET",group:"message",action:"emoticon/list",data:{page:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){let o=t.data.data.list;return formatAppLog("log","at components/custom-expression/custom-expression.vue:153","expressionList",o),t.data.data.pageSum<=e&&(this.haveMore=!1),o}return[]},async deleteExpression(e,t){if((await request({data:{method:"DELETE",group:"message",action:"emoticon/delete",data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE){let e=this.expressions;return e.splice(t,1),this.expressions=e,uni.showToast({title:"删除成功",icon:"success"}),!0}return!1}}};function _sfc_render$h(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),r=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("scroll-view",{"scroll-y":"true",style:vue.normalizeStyle({height:o.contentHeight?o.contentHeight+"px":"300px"}),"lower-threshold":"80",onScrolltolower:t[0]||(t[0]=(...e)=>n.onScroolToLower&&n.onScroolToLower(...e))},[vue.createElementVNode("view",{class:"expression-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.expressions,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"expression-item",key:e.id},[vue.createElementVNode("image",{onClick:o=>n.onExpressionItemClick(e,t),onLongpress:o=>n.onLongPress(e,t),style:{width:"16vw",height:"16vw"},src:e.url,mode:"aspectFill"},null,40,["onClick","onLongpress","src"])])))),128))]),a.expressions.length<1?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"no-expression"}," 您还未添加任何表情~ ")):vue.createCommentVNode("",!0)],36),vue.createVNode(r,{ref:"expressionItemActionPopup",needHead:!0,title:"设置消息",needCancelButton:!0},{default:vue.withCtx((()=>[a.editExpression.id?(vue.openBlock(),vue.createBlock(s,{key:0,onClick:n.onDeleteTextClick,title:"删除"},null,8,["onClick"])):vue.createCommentVNode("",!0)])),_:1},512)])}var __easycom_4=_export_sfc(_sfc_main$i,[["render",_sfc_render$h],["__scopeId","data-v-3172e5be"]]);const _sfc_main$h={data:()=>({sendText:"",inputFocus:!1,onLineState:!1,fromUserInfo:{},myUserInfo:{},messageGroup:{},keyboardHeight:0,emojiContentHeight:300,showEmojiPicker:!1,expressionTabPage:0,isRecording:!1,sendVoice:!1,scrollInto:"",state:store.state,GettimeifferenceOfNow:GettimeifferenceOfNow,navHeight:0,contentHeight:0,recorderManager:uni.getRecorderManager(),touchY:0,cancelSendVoice:!1,showSendVoiceToast:!1,voiceFile:{},voiceTime:0,stopTimer:!1,selectChatItem:{}}),onReady(){let e=this;uni.getSystemInfo({success(t){e.contentHeight=t.windowHeight}}),uni.createSelectorQuery().select("#chat-scrollview").boundingClientRect((t=>{e.navHeight=t.top})).exec()},onShow(){let e=this;uni.$once(REFRESH_CHAT_CONTENT,(async function(t){if(t.needRefresh){e.$refs.customExpression.refresh();let t=await getChatRecord(e.myUserInfo.id,e.fromUserInfo.id);e.messageGroup=t;let o=e.messageGroup.messages;o.length>0&&(e.scrollInto=`chat_${o[o.length-1].id}`)}}))},async onLoad(e){this.initRecorderAndKeyboardManager(),uni.showLoading({title:"加载中"});let t=e.fromUserId,o=await getMyUserInfo();if(!t||!o)return;this.myUserInfo=o;let i=await getChatRecord(o.id,t);formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:334",i),this.messageGroup=i;let a=this.messageGroup.messages,n=a.length;if(uni.hideLoading(),this.onLineState=await GetonlineState(t),this.fromUserInfo=await getUserinfo(t),n>0){this.scrollInto=`chat_${a[a.length-1].id}`;let e=await getUserMessageList(o.id);for(let i=0;i<e.length;i++)if(t==e[i].userId){changeUnreadMessageSum(-e[i].unreadSum),e[i].unreadSum=0;let t=getUserMessageListKey(o.id);await uni.setStorage({key:t,data:e});break}if(a[n-1].isMe&&a[n-1].isNotRead){if(!(await this.getIsBeenRead([a[n-1].id]))[0].unread)for(let e=n-1;e>=0&&(a[e].isMe&&a[e].isNotRead);e--)a[e].isNotRead=!1}}this.messageGroup.messages=await this.messageDataProcessing(a,t),this.messageGroup.messages.length>0&&(this.scrollInto=`chat_${a[a.length-1].id}`),this.saveNewestMessageGroup()},computed:{fromUsername(){return this.fromUserInfo.username?this.fromUserInfo.username.length>7?this.fromUserInfo.username.slice(0,7)+"...":this.fromUserInfo.username:""},newMessage(){return this.state.messageStore.newMessage},scollerHeight(){let e=this.showEmojiPicker?this.emojiContentHeight:this.keyboardHeight;return this.contentHeight-e-this.navHeight-110}},watch:{newMessage:async function(e){if(e.type===WITHDRAW){if(e.data.userId==this.fromUserInfo.id&&this.messageGroup){let t=this.messageGroup.messages;for(let o=t.length-1;o>=0;o--)if(t[o].id==e.data.messageId){t[o]={content:"对方撤回了一条消息",type:-1,id:e.data.messageId,createTime:t[o].createTime,isMe:!1};break}this.messageGroup.messages=t,this.scrollInto=`chat_${t[t.length-1].id}`}}else if(e.type===USER_MESSAGE){if(e.data.fromUserId==this.fromUserInfo.id&&(this.getUnReadMessage(this.fromUserInfo.id),this.messageGroup)){let t=this.messageGroup.messages;t.push({content:e.data.content,type:e.data.type,id:e.data.id,isMe:!1,createTime:getTime(),time:e.data.time}),this.messageGroup.messages=t,this.scrollInto=`chat_${t[t.length-1].id}`}}else if(e.type===ALREADY_READ&&e.data.userId==this.fromUserInfo.id&&(formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:441","ALREADY_READ",ALREADY_READ),this.messageGroup)){let e=this.messageGroup.messages;for(let t=e.length-1;t>=0&&(e[t].isMe&&e[t].isNotRead);t--)e[t].isNotRead=!1;this.messageGroup.messages=e}this.saveNewestUserMessage()}},methods:{initRecorderAndKeyboardManager(){uni.onKeyboardHeightChange((async e=>{0!=e.height?(this.keyboardHeight=e.height,this.emojiContentHeight=e.height,this.showEmojiPicker=!1,this.scrollInto="show_keyboard",formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:470",this.keyboardHeight)):(this.keyboardHeight=0,this.scrollInto="")})),this.recorderManager.onStart((()=>{formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:477","recorder start")})),this.recorderManager.onPause((()=>{formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:480","recorder pause")})),this.recorderManager.onStop((async e=>{if(clearInterval(),formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:484","recorder stop",e),this.cancelSendVoice)formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:486","取消发送");else{let t=Math.floor(e.duration/1e3);t<1?uni.showToast({title:"时间过短",icon:"none"}):this.uploadImageOrVoice([e.tempFilePath],2,t)}this.touchY=0,this.cancelSendVoice=!1,this.voiceTime=0,this.$refs.recordingPopup.close()})),this.recorderManager.onFrameRecorded((e=>{const{frameBuffer:t}=e;formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:508","frameBuffer.byteLength",t.byteLength)}))},onNarLeftClick(){uni.navigateBack({delta:1})},onCopyTextClick(){uni.setClipboardData({data:this.selectChatItem.content}),this.$refs.chatItemActionPopup.close()},onAddExpressionClick(){let e=this.selectChatItem.content.replace(ImageFatherPath,"");this.addExpression(e),this.$refs.chatItemActionPopup.close()},onDeleteTextClick(){this.deleteMessage(this.selectChatItem.id),this.$refs.chatItemActionPopup.close()},onWithdrawTextClick(){this.withdrawMessage(this.selectChatItem.id),this.$refs.chatItemActionPopup.close()},onInputFocus(){this.inputFocus=!0},onContentClick(){this.inputFocus=!1,this.showEmojiPicker=!1,uni.hideKeyboard()},onChatItemLongPress(e){this.selectChatItem=e,this.$refs.chatItemActionPopup.open()},onInput(e){this.sendText=e.detail.value},onVoiceButtonTouchStart(e){0!=this.myUserInfo.isVerify?(this.touchY=e.changedTouches[0].clientY,this.$refs.recordingPopup.open(),this.recorderManager.start(this.options),this.voiceTimer()):uni.showToast({title:"只有认证过的用户才可以发送语音消息哦",icon:"none"})},onVoiceButtonTouchEnd(){this.$refs.recordingPopup.close(),this.recorderManager.stop(),this.stopTimer=!0},onVoiceButtonTouchMove(e){formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:593",e),this.touchY-e.changedTouches[0].clientY>50?this.cancelSendVoice=!0:this.cancelSendVoice=!1},sendButtonClick(){this.sendVoice||this.sendText&&this.sendMessage(this.fromUserInfo.id,this.sendText)},onChangeSendTypeClick(){this.sendVoice=!this.sendVoice,this.sendVoice&&(this.inputFocus=!1,this.showEmojiPicker=!1,uni.hideKeyboard())},onImageChooseClick(){let e=this;uni.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album"],success:function(t){var o=t.tempFilePaths;e.uploadImageOrVoice(o)}})},onCameraIconClick(){let e=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(t){var o=t.tempFilePaths;e.uploadImageOrVoice(o)}})},onSmileIconClick(){this.showEmojiPicker=!this.showEmojiPicker,this.scrollInto="show_keyboard",this.showEmojiPicker&&(this.inputFocus=!1,uni.hideKeyboard())},onSwiperChange(e){this.expressionTabPage=e.detail.current},onExpressionTabClick(e){this.expressionTabPage=e},onEmojiItemClick(e){this.sendText=this.sendText+e},onCustomExpressionClick(e){this.sendMessage(this.fromUserInfo.id,e.url.replace(ImageFatherPath,""),1)},onHistoryIconClick(){formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:700","onHistoryIconClick"),uni.navigateTo({url:`/pages/message-secondary-page/chat-history/chat-history?fromUserId=${this.fromUserInfo.id}`})},showChatCreatTime(e){let t=this.messageGroup.messages,o=!1;if(0==e)o=!0;else{GetNumberOfMenit(t[e-1].createTime,t[e].createTime)>1&&(o=!0)}return o},voiceTimer(){if(this.voiceTime>=59)return;if(this.stopTimer)return void(this.stopTimer=!1);let e=this;setTimeout((function(){e.voiceTime=e.voiceTime+1,e.voiceTimer()}),1e3)},async addExpression(e){return(await request({data:{method:"POST",group:"message",action:"emoticon/add",data:{filename:e},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE&&(this.$refs.customExpression.refresh(),uni.showToast({title:"添加成功",icon:"success"}),!0)},async deleteMessage(e){if(this.messageGroup){let t=this.messageGroup.messages;for(let i=t.length-1;i>=0;i--)if(t[i].id==e){t.splice(i,1);break}this.messageGroup.messages=t;let o=await request({data:{method:"POST",group:"message",action:`${e}/delete`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}});o.data.code==REQUEST_SUCCEEDED_CODE?formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:802","deleteMessage",o.data):formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:804",o.data),this.saveNewestMessageGroup(),this.saveNewestUserMessage()}},async withdrawMessage(e){let t=await request({data:{method:"POST",group:"message",action:`${e}/withdraw`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code==REQUEST_SUCCEEDED_CODE){if(this.messageGroup){let t=this.messageGroup.messages;for(let o=t.length-1;o>=0;o--)if(t[o].id==e){t[o]={id:e,content:"你撤回了一条消息",type:-1,isMe:!0,createTime:t[o].createTime};break}this.messageGroup.messages=t,this.saveNewestMessageGroup(),this.saveNewestUserMessage()}}else formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:850",t.data)},async sendMessage(e,t,o=0,i=0){let a=await request({data:{method:"POST",group:"message",action:"send",data:{content:t,type:o,toUserId:e,time:i},header:{"content-type":"application/x-www-form-urlencoded"}}});if("00000"===a.data.code){this.sendText="";let n=a.data.data;this.messageGroup.messages?this.messageGroup.messages.push({content:0==o?t:n.url+t,type:o,id:n.messageId,isMe:!0,createTime:getTime(),isNotRead:!0,time:i}):this.messageGroup={fromUserId:e,type:"",badgeNumber:0,messages:[{content:1==o?n.url+t:t,type:o,isMe:!0,id:n.messageId,createTime:getTime(),isNotRead:!0,time:i}]},this.scrollInto=`chat_${n.messageId}`,this.saveNewestUserMessage(),this.saveNewestMessageGroup()}else formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:908",a)},async getIsBeenRead(e){let t=await request({data:{method:"GET",group:"message",action:"unread/check",data:{ids:JSON.stringify(e)},header:{"content-type":"application/x-www-form-urlencoded"}}});return t.data.code==REQUEST_SUCCEEDED_CODE?t.data.data:[]},async messageDataProcessing(e,t){let o=await this.getUnReadMessage(t);e=e.concat(o);let i=[],a=[];return e.forEach((e=>{-1==i.indexOf(e.id)&&(i.push(e.id),a.push(e))})),a.sort((function(e,t){return e.id>=t.id?1:-1})),formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:955",a),a},async getUnReadMessage(e){let t=await request({data:{method:"DELETE",group:"message",action:"unRead/message",data:{userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){let e=t.data.data;return formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:979","unReadMessage",e),e}return[]},async saveNewestMessageGroup(){let e=getChatRecordKey(this.myUserInfo.id,this.fromUserInfo.id);uni.setStorage({key:e,data:this.messageGroup})},async saveNewestUserMessage(){if(this.messageGroup.messages){let e=await getUserMessageList(this.myUserInfo.id),t=!1,o=this.messageGroup.messages[this.messageGroup.messages.length-1];for(let a=0;a<e.length;a++)if(e[a].userId===this.fromUserInfo.id){let i=e[a];changeUnreadMessageSum(-i.unreadSum),i.lastMessage=o.content,i.lastMessageType=o.type,i.lastTime=o.createTime,i.unreadSum=0,e.splice(a,1),e.push(i),t=!0;break}this.fromUserInfo&&(t||e.push({avatar:this.fromUserInfo.avatar,lastMessage:o.content,lastMessageType:o.type,lastTime:o.createTime,online:this.onLineState,unreadSum:0,userId:this.fromUserInfo.id,username:this.fromUserInfo.username})),formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:1032","this.myUserInfo.id",this.myUserInfo.id),formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:1033","this.messageGroup",this.messageGroup),formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:1034","have_data",t),formatAppLog("log","at pages/message-secondary-page/chat-content/chat-content.vue:1035","userMessageListItems",e);let i=getUserMessageListKey(this.myUserInfo.id);uni.setStorage({key:i,data:e})}},async uploadImageOrVoice(e,t=1,o){let i,a=this,n=[],s=e.length;if(2==t&&0==this.myUserInfo.isVerify)return void uni.showToast({title:"只有认证过的用户才可以发送语音消息哦",icon:"none"});if(s<1)return;let r=await request({data:{method:"GET",group:"message",action:"tokens",data:{sum:s},header:{"content-type":"application/x-www-form-urlencoded"}}});r.data.code===REQUEST_SUCCEEDED_CODE&&(i=r.data.data,i.forEach((e=>{n.push(e.fileName)})),e.forEach((async(e,n)=>{1==t&&uni.showLoading({title:`正在发送${n+1}/${s}`}),await uni.uploadFile({url:UploadUrl,filePath:e,name:"file",formData:{key:i[n].fileName,token:aes.decrypt(i[n].token)},success(){a.sendMessage(a.fromUserInfo.id,i[n].fileName,t,o)}})})),uni.hideLoading())}}};function _sfc_render$g(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("chat-item"),__easycom_2$1),l=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_2$7),c=resolveEasycom(vue.resolveDynamicComponent("emoji"),__easycom_3$3),u=resolveEasycom(vue.resolveDynamicComponent("custom-expression"),__easycom_4),d=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),m=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"chat-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},[vue.createElementVNode("view",{class:"chat-username-content"},[vue.createElementVNode("text",{class:"chat-username"},vue.toDisplayString(n.fromUsername),1),vue.createElementVNode("view",{class:"online-state",style:vue.normalizeStyle({backgroundColor:a.onLineState?"#2ee98e":"#979797",width:"10px",height:"10px",borderRadius:"5px",marginLeft:"5px"})},null,4),vue.createElementVNode("text",{class:"online-state-text"},vue.toDisplayString(a.onLineState?"在线":"离线"),1)])])])),_:1}),vue.createElementVNode("view",{id:"chat-scrollview"},[a.messageGroup.messages?(vue.openBlock(),vue.createElementBlock("scroll-view",{key:0,"scroll-y":"",class:"chat-scrollview",onClick:t[1]||(t[1]=e=>n.onContentClick()),"scroll-into-view":a.scrollInto,style:vue.normalizeStyle({height:n.scollerHeight+"px"})},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.messageGroup.messages,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,id:"chat_"+e.id},[n.showChatCreatTime(t)?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"chat-creat-time"},vue.toDisplayString(a.GettimeifferenceOfNow(e.createTime).Detailed),1)):vue.createCommentVNode("",!0),vue.createVNode(r,{avatarUrl:e.isMe?a.myUserInfo.avatar:a.fromUserInfo.avatar,chatText:e.content,isMe:e.isMe,voiceTime:e.time,isNotRead:e.isMe&&e.isNotRead,messageType:e.type,onOnLongPress:t=>n.onChatItemLongPress(e)},null,8,["avatarUrl","chatText","isMe","voiceTime","isNotRead","messageType","onOnLongPress"])],8,["id"])))),128)),0!=a.keyboardHeight||a.showEmojiPicker?(vue.openBlock(),vue.createElementBlock("view",{key:0,id:"show_keyboard"})):vue.createCommentVNode("",!0),vue.createVNode(l,{ref:"recordingPopup"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"recording-popup-content"},[vue.createElementVNode("view",{class:"popup-image"},[vue.createElementVNode("image",{style:{width:"100rpx",height:"100rpx"},mode:"aspectFill",src:a.cancelSendVoice?"/static/svgs/chat-cancel.svg":"/static/svgs/chat-recording.svg"},null,8,["src"])]),vue.createElementVNode("view",{class:"popup-text"},vue.toDisplayString(a.cancelSendVoice?"松手取消发送":`正在录音 ${a.voiceTime}S 上划取消`),1)])])),_:1},512)],12,["scroll-into-view"])):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"chat-bottom-content",style:{position:"absolute",width:"100%",bottom:"0px"}},[vue.createElementVNode("view",{class:"chat-input-content",style:{minHeight:"80px",height:"fit-content",marginTop:"10px"}},[vue.createElementVNode("view",{class:"text-send-conent"},[a.sendVoice?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"voice-input",style:vue.normalizeStyle({backgroundColor:a.isRecording?"#dddddd":"#FFF"}),onTouchstart:t[2]||(t[2]=(...e)=>n.onVoiceButtonTouchStart&&n.onVoiceButtonTouchStart(...e)),onTouchend:t[3]||(t[3]=(...e)=>n.onVoiceButtonTouchEnd&&n.onVoiceButtonTouchEnd(...e)),onTouchmove:t[4]||(t[4]=(...e)=>n.onVoiceButtonTouchMove&&n.onVoiceButtonTouchMove(...e))},[vue.createElementVNode("text",null,"按住 说话")],36)):vue.createCommentVNode("",!0),vue.withDirectives(vue.createElementVNode("textarea",{"auto-height":"",class:"chat-input",maxlength:"255","adjust-position":!1,"show-confirm-bar":!1,value:a.sendText,"hold-keyboard":!0,onInput:t[5]||(t[5]=(...e)=>n.onInput&&n.onInput(...e)),focus:a.inputFocus,onFocus:t[6]||(t[6]=(...e)=>n.onInputFocus&&n.onInputFocus(...e))},"\r\n\t\t\t\t\t\t",40,["value","focus"]),[[vue.vShow,!a.sendVoice&&a.inputFocus]]),vue.withDirectives(vue.createElementVNode("view",{class:"fake-chat-input",onClick:t[7]||(t[7]=(...e)=>n.onInputFocus&&n.onInputFocus(...e))},[vue.createElementVNode("text",null,vue.toDisplayString(a.sendText),1)],512),[[vue.vShow,!a.sendVoice&&!a.inputFocus]]),vue.createElementVNode("view",{class:"send-button-content",onClick:t[8]||(t[8]=e=>n.sendButtonClick())},[vue.createElementVNode("view",{class:"send-button"},"发送")])]),vue.createElementVNode("view",{class:"other-send-option"},[vue.createElementVNode("view",{class:"option-image-content"},[a.sendVoice?(vue.openBlock(),vue.createElementBlock("image",{key:0,onClick:t[9]||(t[9]=(...e)=>n.onChangeSendTypeClick&&n.onChangeSendTypeClick(...e)),style:{width:"24px",height:"24px"},mode:"aspectFit",src:"/static/svgs/chat-keyboard.svg"})):(vue.openBlock(),vue.createElementBlock("image",{key:1,onClick:t[10]||(t[10]=(...e)=>n.onChangeSendTypeClick&&n.onChangeSendTypeClick(...e)),class:"send-option-image",mode:"aspectFill",src:"/static/svgs/chat-speech.svg"}))]),vue.createElementVNode("view",{class:"option-image-content"},[vue.createElementVNode("image",{onClick:t[11]||(t[11]=(...e)=>n.onImageChooseClick&&n.onImageChooseClick(...e)),class:"send-option-image",mode:"aspectFill",src:"/static/svgs/chat-photo.svg"})]),vue.createElementVNode("view",{class:"option-image-content"},[vue.createElementVNode("image",{onClick:t[12]||(t[12]=(...e)=>n.onCameraIconClick&&n.onCameraIconClick(...e)),class:"send-option-image",mode:"aspectFill",src:"/static/svgs/chat-camera.svg"})]),vue.createElementVNode("view",{class:"option-image-content"},[vue.createElementVNode("image",{onClick:t[13]||(t[13]=(...e)=>n.onSmileIconClick&&n.onSmileIconClick(...e)),class:"send-option-image",mode:"aspectFill",src:"/static/svgs/smile.svg"})]),vue.createElementVNode("view",{class:"option-image-content"},[vue.createElementVNode("image",{onClick:t[14]||(t[14]=(...e)=>n.onHistoryIconClick&&n.onHistoryIconClick(...e)),class:"send-option-image",mode:"aspectFill",src:"/static/svgs/clocks.svg"})])])]),vue.createElementVNode("view",{class:"emoji-choose-content",style:vue.normalizeStyle({height:a.showEmojiPicker?a.emojiContentHeight+"px":a.keyboardHeight+"px"})},[vue.withDirectives(vue.createElementVNode("view",null,[vue.createElementVNode("view",{class:"expression-taps",style:{height:"45px"}},[vue.createElementVNode("view",{onClick:t[15]||(t[15]=e=>n.onExpressionTabClick(0)),class:"tap-content",style:vue.normalizeStyle({backgroundColor:0==a.expressionTabPage?"#fff":""})},[vue.createElementVNode("view",{class:"iconfont icon-smile",style:{fontSize:"30px",color:"#5e5e5e"}})],4),vue.createElementVNode("view",{onClick:t[16]||(t[16]=e=>n.onExpressionTabClick(1)),class:"tap-content",style:vue.normalizeStyle({backgroundColor:1==a.expressionTabPage?"#fff":""})},[vue.createElementVNode("view",{class:"iconfont icon-heart",style:{fontSize:"30px",color:"#5e5e5e"}})],4)]),vue.createElementVNode("swiper",{current:a.expressionTabPage,style:vue.normalizeStyle({height:a.emojiContentHeight-45+"px",backgroundColor:"#fff"}),onChange:t[17]||(t[17]=(...e)=>n.onSwiperChange&&n.onSwiperChange(...e))},[vue.createElementVNode("swiper-item",{style:vue.normalizeStyle({height:a.emojiContentHeight-45+"px"})},[vue.createVNode(c,{contentHeight:a.emojiContentHeight-45,onSetEmoj:n.onEmojiItemClick},null,8,["contentHeight","onSetEmoj"])],4),vue.createElementVNode("swiper-item",{style:vue.normalizeStyle({height:a.emojiContentHeight-45+"px"})},[vue.createVNode(u,{contentHeight:a.emojiContentHeight-45,ref:"customExpression",onOnItemClick:n.onCustomExpressionClick},null,8,["contentHeight","onOnItemClick"])],4)],44,["current"])],512),[[vue.vShow,a.showEmojiPicker]])],4)]),vue.createVNode(m,{ref:"chatItemActionPopup",needHead:!0,title:"设置消息",needCancelButton:!0},{default:vue.withCtx((()=>[a.selectChatItem.id?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[0==a.selectChatItem.type?(vue.openBlock(),vue.createBlock(d,{key:0,onClick:n.onCopyTextClick,title:"复制"},null,8,["onClick"])):vue.createCommentVNode("",!0),1==a.selectChatItem.type?(vue.openBlock(),vue.createBlock(d,{key:1,onClick:n.onAddExpressionClick,title:"添加到表情"},null,8,["onClick"])):vue.createCommentVNode("",!0),vue.createVNode(d,{onClick:n.onDeleteTextClick,title:"删除"},null,8,["onClick"]),a.selectChatItem.isMe?(vue.openBlock(),vue.createBlock(d,{key:2,onClick:n.onWithdrawTextClick,title:"撤回"},null,8,["onClick"])):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0)])),_:1},512)])])}var PagesMessageSecondaryPageChatContentChatContent=_export_sfc(_sfc_main$h,[["render",_sfc_render$g]]),dataPicker={props:{localdata:{type:[Array,Object],default:()=>[]},spaceInfo:{type:Object,default:()=>({})},collection:{type:String,default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},getone:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},manual:{type:Boolean,default:!1},value:{type:[Array,String,Number],default:()=>[]},modelValue:{type:[Array,String,Number],default:()=>[]},preload:{type:Boolean,default:!1},stepSearh:{type:Boolean,default:!0},selfField:{type:String,default:""},parentField:{type:String,default:""},multiple:{type:Boolean,default:!1},map:{type:Object,default:()=>({text:"text",value:"value"})}},data(){return{loading:!1,errorMessage:"",loadMore:{contentdown:"",contentrefresh:"",contentnomore:""},dataList:[],selected:[],selectedIndex:0,page:{current:this.pageCurrent,size:this.pageSize,count:0}}},computed:{isLocaldata(){return!this.collection.length},postField(){let e=[this.field];return this.parentField&&e.push(`${this.parentField} as parent_value`),e.join(",")},dataValue(){return(Array.isArray(this.modelValue)?this.modelValue.length>0:null!==this.modelValue||void 0!==this.modelValue)?this.modelValue:this.value},hasValue(){return"number"==typeof this.dataValue||null!=this.dataValue&&this.dataValue.length>0}},created(){this.$watch((()=>{var e=[];return["pageCurrent","pageSize","spaceInfo","value","modelValue","localdata","collection","action","field","orderby","where","getont","getcount","gettree"].forEach((t=>{e.push(this[t])})),e}),((e,t)=>{for(let o=2;o<e.length&&e[o]==t[o];o++);e[0]!=t[0]&&(this.page.current=this.pageCurrent),this.page.size=this.pageSize,this.onPropsChange()})),this._treeData=[]},methods:{onPropsChange(){this._treeData=[]},getCommand(e={}){let t=wt.database(this.spaceInfo);const o=e.action||this.action;o&&(t=t.action(o));const i=e.collection||this.collection;t=t.collection(i);const a=e.where||this.where;a&&Object.keys(a).length&&(t=t.where(a));const n=e.field||this.field;n&&(t=t.field(n));const s=e.orderby||this.orderby;s&&(t=t.orderBy(s));const r=void 0!==e.pageCurrent?e.pageCurrent:this.page.current,l=void 0!==e.pageSize?e.pageSize:this.page.size,c={getCount:void 0!==e.getcount?e.getcount:this.getcount,getTree:void 0!==e.gettree?e.gettree:this.gettree};return e.getTreePath&&(c.getTreePath=e.getTreePath),t=t.skip(l*(r-1)).limit(l).get(c),t},getNodeData(e){this.loading||(this.loading=!0,this.getCommand({field:this.postField,where:this._pathWhere()}).then((t=>{this.loading=!1,this.selected=t.result.data,e&&e()})).catch((e=>{this.loading=!1,this.errorMessage=e})))},getTreePath(e){this.loading||(this.loading=!0,this.getCommand({field:this.postField,getTreePath:{startWith:`${this.selfField}=='${this.dataValue}'`}}).then((t=>{this.loading=!1;let o=[];this._extractTreePath(t.result.data,o),this.selected=o,e&&e()})).catch((e=>{this.loading=!1,this.errorMessage=e})))},loadData(){this.isLocaldata?this._processLocalData():null==this.dataValue?this.stepSearh?this._loadNodeData((e=>{this._treeData=e,this._updateBindData()})):this._loadAllData((e=>{this._treeData=[],this._extractTree(e,this._treeData,null),this._updateBindData()})):this._loadNodeData((e=>{this._treeData=e,this._updateBindData(),this._updateSelected()}))},_loadAllData(e){this.loading||(this.loading=!0,this.getCommand({field:this.postField,gettree:!0,startwith:`${this.selfField}=='${this.dataValue}'`}).then((t=>{this.loading=!1,e(t.result.data),this.onDataChange()})).catch((e=>{this.loading=!1,this.errorMessage=e})))},_loadNodeData(e,t){this.loading||(this.loading=!0,this.getCommand({field:this.postField,where:t||this._postWhere(),pageSize:500}).then((t=>{this.loading=!1,e(t.result.data),this.onDataChange()})).catch((e=>{this.loading=!1,this.errorMessage=e})))},_pathWhere(){let e=[],t=this._getParentNameByField();return t&&e.push(`${t} == '${this.dataValue}'`),this.where?`(${this.where}) && (${e.join(" || ")})`:e.join(" || ")},_postWhere(){let e=[],t=this.selected,o=this.parentField;if(o&&e.push(`${o} == null || ${o} == ""`),t.length)for(var i=0;i<t.length-1;i++)e.push(`${o} == '${t[i].value}'`);let a=[];return this.where&&a.push(`(${this.where})`),e.length&&a.push(`(${e.join(" || ")})`),a.join(" && ")},_nodeWhere(){let e=[],t=this.selected;return t.length&&e.push(`${this.parentField} == '${t[t.length-1].value}'`),this.where?`(${this.where}) && (${e.join(" || ")})`:e.join(" || ")},_getParentNameByField(){const e=this.field.split(",");let t=null;for(let o=0;o<e.length;o++){const i=e[o].split("as");if(!(i.length<2)&&"value"===i[1].trim()){t=i[0].trim();break}}return t},_isTreeView(){return this.parentField&&this.selfField},_updateSelected(){var e=this.dataList,t=this.selected;let o=this.map.text,i=this.map.value;for(var a=0;a<t.length;a++)for(var n=t[a].value,s=e[a],r=0;r<s.length;r++){var l=s[r];if(l[i]===n){t[a].text=l[o];break}}},_updateBindData(e){const{dataList:t,hasNodes:o}=this._filterData(this._treeData,this.selected);let i=!1===this._stepSearh&&!o;return e&&(e.isleaf=i),this.dataList=t,this.selectedIndex=t.length-1,!i&&this.selected.length<t.length&&this.selected.push({value:null,text:"请选择"}),{isleaf:i,hasNodes:o}},_filterData(e,t){let o=[],i=!0;o.push(e.filter((e=>null===e.parent_value||void 0===e.parent_value||""===e.parent_value)));for(let s=0;s<t.length;s++){var a=t[s].value,n=e.filter((e=>e.parent_value===a));n.length?o.push(n):i=!1}return{dataList:o,hasNodes:i}},_extractTree(e,t,o){let i=this.map.value;for(let a=0;a<e.length;a++){let n=e[a],s={};for(let e in n)"children"!==e&&(s[e]=n[e]);null!=o&&""!==o&&(s.parent_value=o),t.push(s);let r=n.children;r&&this._extractTree(r,t,n[i])}},_extractTreePath(e,t){for(let o=0;o<e.length;o++){let i=e[o],a={};for(let e in i)"children"!==e&&(a[e]=i[e]);t.push(a);let n=i.children;n&&this._extractTreePath(n,t)}},_findNodePath(e,t,o=[]){let i=this.map.text,a=this.map.value;for(let n=0;n<t.length;n++){let s=t[n],r=s.children,l=s[i],c=s[a];if(o.push({value:c,text:l}),c===e)return o;if(r){const t=this._findNodePath(e,r,o);if(t.length)return t}o.pop()}return[]},_processLocalData(){this._treeData=[],this._extractTree(this.localdata,this._treeData);var e=this.dataValue;void 0!==e&&(Array.isArray(e)&&"object"==typeof(e=e[e.length-1])&&e[this.map.value]&&(e=e[this.map.value]),this.selected=this._findNodePath(e,this.localdata))}}};const _sfc_main$g={name:"UniDataPickerView",emits:["nodeclick","change","datachange","update:modelValue"],mixins:[dataPicker],props:{managedMode:{type:Boolean,default:!1},ellipsis:{type:Boolean,default:!0}},data:()=>({}),created(){this.managedMode||this.$nextTick((()=>{this.load()}))},methods:{onPropsChange(){this._treeData=[],this.selectedIndex=0,this.load()},load(){this.isLocaldata?this.loadData():this.dataValue.length&&this.getTreePath((e=>{this.loadData()}))},handleSelect(e){this.selectedIndex=e},handleNodeClick(e,t,o){if(e.disable)return;const i=this.dataList[t][o],a=i[this.map.text],n=i[this.map.value];if(t<this.selected.length-1?(this.selected.splice(t,this.selected.length-t),this.selected.push({text:a,value:n})):t===this.selected.length-1&&this.selected.splice(t,1,{text:a,value:n}),i.isleaf)return void this.onSelectedChange(i,i.isleaf);const{isleaf:s,hasNodes:r}=this._updateBindData();(this._isTreeView()||r)&&(!this.isLocaldata||r&&!s)?s||r?this.onSelectedChange(i,!1):this._loadNodeData((e=>{e.length?(this._treeData.push(...e),this._updateBindData(i)):i.isleaf=!0,this.onSelectedChange(i,i.isleaf)}),this._nodeWhere()):this.onSelectedChange(i,!0)},updateData(e){this._treeData=e.treeData,this.selected=e.selected,this._treeData.length?this._updateBindData():this.loadData()},onDataChange(){this.$emit("datachange")},onSelectedChange(e,t){t&&this._dispatchEvent(),e&&this.$emit("nodeclick",e)},_dispatchEvent(){this.$emit("change",this.selected.slice(0))}}};function _sfc_render$f(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-load-more"),__easycom_1$f);return vue.openBlock(),vue.createElementBlock("view",{class:"uni-data-pickerview"},[vue.createElementVNode("scroll-view",{class:"selected-area","scroll-x":"true","scroll-y":"false","show-scrollbar":!1},[vue.createElementVNode("view",{class:"selected-list"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.selected,((t,i)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[t.text?(vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["selected-item",{"selected-item-active":i==e.selectedIndex,"selected-item-text-overflow":o.ellipsis}]),key:i,onClick:e=>n.handleSelect(i)},[vue.createElementVNode("text",{class:""},vue.toDisplayString(t.text),1)],10,["onClick"])):vue.createCommentVNode("",!0)],64)))),256))])]),vue.createElementVNode("view",{class:"tab-c"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.dataList,((t,o)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[o==e.selectedIndex?(vue.openBlock(),vue.createElementBlock("scroll-view",{class:"list",key:o,"scroll-y":!0},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t,((t,i)=>(vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["item",{"is-disabled":!!t.disable}]),key:i,onClick:e=>n.handleNodeClick(t,o,i)},[vue.createElementVNode("text",{class:"item-text item-text-overflow"},vue.toDisplayString(t[e.map.text]),1),e.selected.length>o&&t[e.map.value]==e.selected[o].value?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"check"})):vue.createCommentVNode("",!0)],10,["onClick"])))),128))])):vue.createCommentVNode("",!0)],64)))),256)),e.loading?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"loading-cover"},[vue.createVNode(s,{class:"load-more",contentText:e.loadMore,status:"loading"},null,8,["contentText"])])):vue.createCommentVNode("",!0),e.errorMessage?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"error-message"},[vue.createElementVNode("text",{class:"error-text"},vue.toDisplayString(e.errorMessage),1)])):vue.createCommentVNode("",!0)])])}var DataPickerView=_export_sfc(_sfc_main$g,[["render",_sfc_render$f],["__scopeId","data-v-8d86a5bc"]]);const _sfc_main$f={name:"UniDataPicker",emits:["popupopened","popupclosed","nodeclick","input","change","update:modelValue"],mixins:[dataPicker],components:{DataPickerView:DataPickerView},props:{options:{type:[Object,Array],default:()=>({})},popupTitle:{type:String,default:"请选择"},placeholder:{type:String,default:"请选择"},heightMobile:{type:String,default:""},readonly:{type:Boolean,default:!1},clearIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!0},split:{type:String,default:"/"},ellipsis:{type:Boolean,default:!0}},data:()=>({isOpened:!1,inputSelected:[]}),created(){this.form=this.getForm("uniForms"),this.formItem=this.getForm("uniFormsItem"),this.formItem&&this.formItem.name&&(this.rename=this.formItem.name,this.form.inputChildrens.push(this)),this.$nextTick((()=>{this.load()}))},methods:{clear(){this.inputSelected.splice(0),this._dispatchEvent([])},onPropsChange(){this._treeData=[],this.selectedIndex=0,this.load()},load(){this.readonly?this._processReadonly(this.localdata,this.dataValue):this.isLocaldata?(this.loadData(),this.inputSelected=this.selected.slice(0)):this.parentField||this.selfField||!this.hasValue?this.hasValue&&this.getTreePath((()=>{this.inputSelected=this.selected.slice(0)})):this.getNodeData((()=>{this.inputSelected=this.selected.slice(0)}))},getForm(e="uniForms"){let t=this.$parent,o=t.$options.name;for(;o!==e;){if(t=t.$parent,!t)return!1;o=t.$options.name}return t},show(){this.isOpened=!0,this.$nextTick((()=>{this.$refs.pickerView.updateData({treeData:this._treeData,selected:this.selected,selectedIndex:this.selectedIndex})})),this.$emit("popupopened")},hide(){this.isOpened=!1,this.$emit("popupclosed")},handleInput(){this.readonly||this.show()},handleClose(e){this.hide()},onnodeclick(e){this.$emit("nodeclick",e)},ondatachange(e){this._treeData=this.$refs.pickerView._treeData},onchange(e){this.hide(),this.inputSelected=e,this._dispatchEvent(e)},_processReadonly(e,t){if(e.findIndex((e=>e.children))>-1){let e;return Array.isArray(t)?(e=t[t.length-1],"object"==typeof e&&e.value&&(e=e.value)):e=t,void(this.inputSelected=this._findNodePath(e,this.localdata))}if(!this.hasValue)return void(this.inputSelected=[]);let o=[];for(let n=0;n<t.length;n++){var i=t[n],a=e.find((e=>e.value==i));a&&o.push(a)}o.length&&(this.inputSelected=o)},_filterForArray(e,t){var o=[];for(let n=0;n<t.length;n++){var i=t[n],a=e.find((e=>e.value==i));a&&o.push(a)}return o},_dispatchEvent(e){let t={};if(e.length){for(var o=new Array(e.length),i=0;i<e.length;i++)o[i]=e[i].value;t=e[e.length-1]}else t.value="";this.formItem&&this.formItem.setValue(t.value),this.$emit("input",t.value),this.$emit("update:modelValue",t.value),this.$emit("change",{detail:{value:e}})}}};function _sfc_render$e(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-load-more"),__easycom_1$f),r=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_1$h),l=vue.resolveComponent("data-picker-view");return vue.openBlock(),vue.createElementBlock("view",{class:"uni-data-tree"},[vue.createElementVNode("view",{class:"uni-data-tree-input",onClick:t[1]||(t[1]=(...e)=>n.handleInput&&n.handleInput(...e))},[vue.renderSlot(e.$slots,"default",{options:o.options,data:a.inputSelected,error:e.errorMessage},(()=>[vue.createElementVNode("view",{class:vue.normalizeClass(["input-value",{"input-value-border":o.border}])},[e.errorMessage?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"selected-area error-text"},vue.toDisplayString(e.errorMessage),1)):e.loading&&!a.isOpened?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"selected-area"},[vue.createVNode(s,{class:"load-more",contentText:e.loadMore,status:"loading"},null,8,["contentText"])])):a.inputSelected.length?(vue.openBlock(),vue.createElementBlock("scroll-view",{key:2,class:"selected-area","scroll-x":"true"},[vue.createElementVNode("view",{class:"selected-list"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.inputSelected,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"selected-item",key:t},[vue.createElementVNode("text",null,vue.toDisplayString(e.text),1),t<a.inputSelected.length-1?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"input-split-line"},vue.toDisplayString(o.split),1)):vue.createCommentVNode("",!0)])))),128))])])):(vue.openBlock(),vue.createElementBlock("text",{key:3,class:"selected-area placeholder"},vue.toDisplayString(o.placeholder),1)),vue.withDirectives(vue.createElementVNode("view",{class:"icon-clear",onClick:t[0]||(t[0]=vue.withModifiers(((...e)=>n.clear&&n.clear(...e)),["stop"]))},[vue.createVNode(r,{type:"clear",color:"#e1e1e1",size:"14"})],512),[[vue.vShow,o.clearIcon&&!o.readonly&&a.inputSelected.length]]),o.clearIcon&&a.inputSelected.length||o.readonly?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("view",{key:4,class:"arrow-area"},[vue.createElementVNode("view",{class:"input-arrow"})]))],2)]),!0)]),a.isOpened?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-data-tree-cover",onClick:t[2]||(t[2]=(...e)=>n.handleClose&&n.handleClose(...e))})):vue.createCommentVNode("",!0),a.isOpened?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-data-tree-dialog"},[vue.createElementVNode("view",{class:"uni-popper__arrow"}),vue.createElementVNode("view",{class:"dialog-caption"},[vue.createElementVNode("view",{class:"title-area"},[vue.createElementVNode("text",{class:"dialog-title"},vue.toDisplayString(o.popupTitle),1)]),vue.createElementVNode("view",{class:"dialog-close",onClick:t[3]||(t[3]=(...e)=>n.handleClose&&n.handleClose(...e))},[vue.createElementVNode("view",{class:"dialog-close-plus","data-id":"close"}),vue.createElementVNode("view",{class:"dialog-close-plus dialog-close-rotate","data-id":"close"})])]),vue.createVNode(l,{class:"picker-view",ref:"pickerView",modelValue:e.dataValue,"onUpdate:modelValue":t[4]||(t[4]=t=>e.dataValue=t),localdata:e.localdata,preload:e.preload,collection:e.collection,field:e.field,orderby:e.orderby,where:e.where,"step-searh":e.stepSearh,"self-field":e.selfField,"parent-field":e.parentField,"managed-mode":!0,map:e.map,ellipsis:o.ellipsis,onChange:n.onchange,onDatachange:n.ondatachange,onNodeclick:n.onnodeclick},null,8,["modelValue","localdata","preload","collection","field","orderby","where","step-searh","self-field","parent-field","map","ellipsis","onChange","onDatachange","onNodeclick"])])):vue.createCommentVNode("",!0)])}var __easycom_3=_export_sfc(_sfc_main$f,[["render",_sfc_render$e],["__scopeId","data-v-df048c12"]]);const _sfc_main$e={data:()=>({fromUserInfo:{},myUserInfo:{},historyChats:[],scrollInto:"",page:1,haveMoreData:!0,GettimeifferenceOfNow:GettimeifferenceOfNow,navHeight:0,contentHeight:0,selectChatItem:{},moreText:"more",datePickerList:[],daySelected:"all"}),onReady(){let e=this;uni.getSystemInfo({success(t){e.contentHeight=t.windowHeight}}),uni.createSelectorQuery().select("#chat-scrollview").boundingClientRect((t=>{e.navHeight=t.top})).exec()},async onLoad(e){let t=e.fromUserId,o=await getUserinfo(t),i=await getMyUserInfo();this.myUserInfo=i,this.fromUserInfo=o,this.getAllChatHistory(t,this.page),this.getHistoryDateList(t)},computed:{fromUsername(){return this.fromUserInfo.username?this.fromUserInfo.username.length>7?this.fromUserInfo.username.slice(0,7)+"...":this.fromUserInfo.username:""},scollerHeight(){return this.contentHeight-this.navHeight-70}},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onScrollToUpper(){this.haveMoreData&&this.fromUserInfo&&(this.page=this.page+1,"all"===this.daySelected?this.getAllChatHistory(this.fromUserInfo.id,this.page):this.getHistoryByDate(this.formUserInfo.id,this.daySelected,this.page))},onDatePikcerChange(e){this.daySelected=e.detail.value[1].value,this.page=1,this.getHistoryByDate(this.fromUserInfo.id,this.daySelected,this.page)},onDatePikcerNodeClick(e){formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:211","onDatePikcerNodeClick",e)},onCopyTextClick(){uni.setClipboardData({data:this.selectChatItem.content}),this.$refs.chatItemActionPopup.close()},onAddExpressionClick(){let e=this.selectChatItem.content.replace(ImageFatherPath,"");this.addExpression(e),this.$refs.chatItemActionPopup.close()},onDeleteTextClick(){this.deleteMessage(this.selectChatItem.id),this.$refs.chatItemActionPopup.close()},onChatItemLongPress(e){this.selectChatItem=e,this.$refs.chatItemActionPopup.open()},showChatCreatTime(e){let t=this.historyChats,o=!1;if(0==e)o=!0;else{GetNumberOfMenit(t[e-1].createTime,t[e].createTime)>1&&(o=!0)}return o},addExpression:async e=>(await request({data:{method:"POST",group:"message",action:"emoticon/add",data:{filename:e},header:{"content-type":"application/x-www-form-urlencoded"}}})).data.code===REQUEST_SUCCEEDED_CODE&&(uni.showToast({title:"添加成功",icon:"success"}),uni.$emit(REFRESH_CHAT_CONTENT,{needRefresh:!0}),!0),async deleteMessage(e){if(this.historyChats){let t=this.historyChats;for(let a=t.length-1;a>=0;a--)if(t[a].id==e){t.splice(a,1);break}this.historyChats=t;let o=await getChatRecord(this.myUserInfo.id,this.fromUserInfo.id);if(o){let t=o.messages,i=0;for(let o=0;o<t.length;o++)if(e==t[o].id){t.splice(o,1),i=o;break}o.messages=t,formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:319","messageGroup",o);let a=getChatRecordKey(this.myUserInfo.id,this.fromUserInfo.id);if(uni.setStorage({key:a,data:o}),t.length>0&&i==t.length){let e=await getUserMessageList(this.myUserInfo.id);for(let i=0;i<e.length;i++)if(e[i].userId==this.fromUserInfo.id){let o=e[i];o.lastMessage=t[t.length-1].content,o.lastMessageType=t[t.length-1].type,o.lastTime=t[t.length-1].createTime,o.unreadSum=0,e.splice(i,1),e.push(o);break}formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:337","userMessageList",e);let o=getUserMessageListKey(this.myUserInfo.id);uni.setStorage({key:o,data:e})}}let i=await request({data:{method:"POST",group:"message",action:`${e}/delete`,data:{id:e},header:{"content-type":"application/x-www-form-urlencoded"}}});i.data.code==REQUEST_SUCCEEDED_CODE?formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:360","deleteMessage",i.data):formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:362",i.data),uni.$emit(REFRESH_CHAT_CONTENT,{needRefresh:!0})}},async getAllChatHistory(e,t){this.moreText="loading";let o=await request({data:{method:"GET",group:"message",action:"history",data:{page:t,userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(o.data.code==REQUEST_SUCCEEDED_CODE){let e=o.data.data,i=o.data.data.list;e.pageSum<=t?(this.haveMoreData=!1,this.moreText="noMore"):(this.haveMoreData=!0,this.moreText="more");let a=[];t>1&&(a=this.historyChats),a=a.reverse().concat(i),this.scrollInto=`chat_${i[0].id}`,this.historyChats=a.reverse(),formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:406",o.data)}else formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:408",o.data)},async getHistoryByDate(e,t,o){let i=await request({data:{method:"GET",group:"message",action:"history/byDate",data:{userId:e,date:t,page:o},header:{"content-type":"application/x-www-form-urlencoded"}}});if(i.data.code==REQUEST_SUCCEEDED_CODE){let e=i.data.data,t=i.data.data.list;e.pageSum<=o?(this.haveMoreData=!1,this.moreText="noMore"):(this.haveMoreData=!0,this.moreText="more");let a=[];o>1&&(a=this.historyChats),a=a.reverse().concat(t),this.scrollInto=`chat_${t[0].id}`,this.historyChats=a.reverse(),formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:451",i.data)}else formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:453",i.data)},async getHistoryDateList(e){let t=await request({data:{method:"GET",group:"message",action:"history/dateList",data:{userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code==REQUEST_SUCCEEDED_CODE){let e=t.data.data,o=[];e.forEach((e=>{let t={text:e.month,value:e.month,children:[]};e.day.forEach((e=>{let o={text:e,value:e};t.children.push(o)})),o.push(t)})),this.datePickerList=o,formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:493",this.datePickerList)}else formatAppLog("log","at pages/message-secondary-page/chat-history/chat-history.vue:495","getHistoryDateList",t.data)}}};function _sfc_render$d(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-load-more"),__easycom_1$f),l=resolveEasycom(vue.resolveDynamicComponent("chat-item"),__easycom_2$1),c=resolveEasycom(vue.resolveDynamicComponent("uni-data-picker"),__easycom_3),u=resolveEasycom(vue.resolveDynamicComponent("action-sheet-item"),__easycom_4$2),d=resolveEasycom(vue.resolveDynamicComponent("action-sheet"),__easycom_5);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"chat-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"}," 聊天历史 ")])),_:1}),vue.createElementVNode("view",{id:"chat-scrollview"},[a.historyChats.length>0?(vue.openBlock(),vue.createElementBlock("scroll-view",{key:0,"scroll-y":"",class:"chat-scrollview",onClick:t[1]||(t[1]=t=>e.onContentClick()),"scroll-into-view":a.scrollInto,style:vue.normalizeStyle({height:n.scollerHeight+"px"}),onScrolltoupper:t[2]||(t[2]=(...e)=>n.onScrollToUpper&&n.onScrollToUpper(...e))},[vue.createVNode(r,{status:a.moreText,contentText:{contentdown:"下拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}},null,8,["status","contentText"]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.historyChats,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,id:"chat_"+e.id},[n.showChatCreatTime(t)?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"chat-creat-time"},vue.toDisplayString(a.GettimeifferenceOfNow(e.createTime).Detailed),1)):vue.createCommentVNode("",!0),vue.createVNode(l,{avatarUrl:e.my?a.myUserInfo.avatar:a.fromUserInfo.avatar,chatText:e.content,isMe:e.my,voiceTime:e.time,messageType:e.type,onOnLongPress:t=>n.onChatItemLongPress(e)},null,8,["avatarUrl","chatText","isMe","voiceTime","messageType","onOnLongPress"])],8,["id"])))),128))],44,["scroll-into-view"])):vue.createCommentVNode("",!0)]),vue.createElementVNode("view",{class:"select-date",style:{height:"70px"}},[a.datePickerList.length>0?(vue.openBlock(),vue.createBlock(c,{key:0,class:"data-picker",placeholder:"请选择日期",localdata:a.datePickerList,"popup-title":"请选择日期",onChange:n.onDatePikcerChange,onNodeclick:n.onDatePikcerNodeClick},null,8,["localdata","onChange","onNodeclick"])):vue.createCommentVNode("",!0)]),vue.createVNode(d,{ref:"chatItemActionPopup",needHead:!0,title:"设置消息",needCancelButton:!0},{default:vue.withCtx((()=>[a.selectChatItem.id?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[0==a.selectChatItem.type?(vue.openBlock(),vue.createBlock(u,{key:0,onClick:n.onCopyTextClick,title:"复制"},null,8,["onClick"])):vue.createCommentVNode("",!0),1==a.selectChatItem.type?(vue.openBlock(),vue.createBlock(u,{key:1,onClick:n.onAddExpressionClick,title:"添加到表情"},null,8,["onClick"])):vue.createCommentVNode("",!0),vue.createVNode(u,{onClick:n.onDeleteTextClick,title:"删除"},null,8,["onClick"])],64)):vue.createCommentVNode("",!0)])),_:1},512)])])}var PagesMessageSecondaryPageChatHistoryChatHistory=_export_sfc(_sfc_main$e,[["render",_sfc_render$d]]);const _sfc_main$d={data:()=>({type:PUNISH,officialNews:[],navHeight:0,contentHeight:0,scrollInto:""}),onReady(){let e=this;uni.getSystemInfo({success(t){e.contentHeight=t.windowHeight}}),uni.createSelectorQuery().select("#news-scrollview").boundingClientRect((t=>{e.navHeight=t.top})).exec()},async onLoad(e){let t=e.type;this.type=t;let o=await getMyUserInfo(),i=await getTypeOfficalNews(o.id,t);this.officialNews=i.reverse(),this.officialNews.length>0&&(this.scrollInto=`news_${this.officialNews[this.officialNews.length-1].id}`),i.reverse();let a=await this.getUnreadTypeofficialNews(t);i=i.concat(a),this.officialNews=i.reverse(),this.officialNews.length>0&&(this.scrollInto=`news_${this.officialNews[this.officialNews.length-1].id}`);let n=getOfficeTypeNewsListKey(o.id,t);uni.setStorage({key:n,data:i});let s=await getOfficalList(o.id);for(let l=0;l<s.length;l++)if(s[l].type===t){changeUnreadMessageSum(-s[l].unreadSum),s[l].unreadSum=0;break}let r=getOfficeNewsListKey(o.id);uni.setStorage({key:r,data:s})},computed:{scollerHeight(){return this.contentHeight-this.navHeight}},methods:{onNarLeftClick(){formatAppLog("log","at pages/message-secondary-page/official-news-info/official-news-info.vue:125","onNarLeftClick()"),uni.navigateBack({delta:1})},async getUnreadTypeofficialNews(e){let t=await request({data:{method:"GET",group:"message",action:"official/unread/special",data:{type:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(t.data.code===REQUEST_SUCCEEDED_CODE){return t.data.data}return[]}}};function _sfc_render$c(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=vue.resolveComponent("Text"),l=resolveEasycom(vue.resolveDynamicComponent("uni-card"),__easycom_1$6);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createElementVNode("view",{class:"official-news-info-content"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:n.onNarLeftClick},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"通知详情")])),_:1},8,["onClickLeft"]),vue.createElementVNode("scroll-view",{id:"news-scrollview","scroll-y":"true","scroll-into-view":a.scrollInto,style:vue.normalizeStyle({height:n.scollerHeight+"px"})},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.officialNews,(e=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,id:`news_${e.id}`},[vue.createElementVNode("view",{class:"creat-time"},vue.toDisplayString(e.createTime),1),vue.createVNode(l,{extra:"有任何问题请联系官方客服",title:"官方消息"},{default:vue.withCtx((()=>[vue.createVNode(r,null,{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.text),1)])),_:2},1024)])),_:2},1024)],8,["id"])))),128))],12,["scroll-into-view"])])])}var PagesMessageSecondaryPageOfficialNewsInfoOfficialNewsInfo=_export_sfc(_sfc_main$d,[["render",_sfc_render$c]]);const _sfc_main$c={name:"fan-item",props:{item:{type:Object,required:!0}},computed:{buttontext(){return this.isFollowed?"互相关注":"关注"}},created(){1==this.item.mutual?this.isFollowed=!0:this.isFollowed=!1},data:()=>({isFollowed:!1}),methods:{onContentClick(){uni.navigateTo({url:`/pages/user-home-page/user-home-page?userId=${this.item.id}`})},async onFollowButtonClick(){if(this.isFollowed){let e=this;uni.showModal({title:"取消关注",content:"你确定要取消关注这个用户吗？",success:async function(t){t.confirm?await cancelAttention(e.item.id)&&(e.isFollowed=!1):t.cancel&&formatAppLog("log","at components/fan-item/fan-item.vue:91","用户点击取消")}})}else await followUser(this.item.id)&&(this.isFollowed=!0)}}};function _sfc_render$b(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{class:"fan-content",onClick:t[1]||(t[1]=vue.withModifiers((e=>n.onContentClick()),["stop"]))},[vue.createElementVNode("view",{class:"user-avatar"},[vue.createElementVNode("image",{mode:"aspectFill",class:"user-item-avatar",src:o.item.avatar},null,8,["src"])]),vue.createElementVNode("text",{class:"user-name"},vue.toDisplayString(o.item.username),1),vue.createElementVNode("view",{class:"attention-statu-button-content",onClick:t[0]||(t[0]=vue.withModifiers(((...e)=>n.onFollowButtonClick&&n.onFollowButtonClick(...e)),["stop"]))},[vue.createElementVNode("view",{style:vue.normalizeStyle({backgroundColor:a.isFollowed?"#bbbbbb":"#75e4d2"}),class:"attention-statu-button"},vue.toDisplayString(n.buttontext),5)])])])}var __easycom_1$3=_export_sfc(_sfc_main$c,[["render",_sfc_render$b],["__scopeId","data-v-b967a72c"]]);const _sfc_main$b={data:()=>({isRefresh:!1,navHeight:0,contentHeight:0,fansList:[]}),onReady(){let e=this;uni.getSystemInfo({success(t){e.contentHeight=t.windowHeight}}),uni.createSelectorQuery().select("#fans-scrollview").boundingClientRect((t=>{e.navHeight=t.top})).exec()},async onLoad(){let e=await getMyUserInfo(),t=getFansNumberChangedKey(e.id);uni.setStorage({key:t,data:0}),this.fansList=await this.getMyFans(e.id)},computed:{scollerHeight(){let e=this.showEmojiPicker?this.emojiContentHeight:this.keyboardHeight;return this.contentHeight-e-this.navHeight-110}},methods:{onNarLeftClick(){formatAppLog("log","at pages/mine-secondary-page/fan-list/fan-list.vue:83","onNarLeftClick()"),uni.navigateBack({delta:1})},onScrollRefresheRrefresh(){},async getMyFans(e){let t=await request({data:{method:"GET",group:"user",action:`${e}/fansList`,data:{userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return setTimeout((()=>{this.isRefresh=!1}),500),t.data.code===REQUEST_SUCCEEDED_CODE?(formatAppLog("log","at pages/mine-secondary-page/fan-list/fan-list.vue:117",t.data),t.data.data):[]}}};function _sfc_render$a(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("fan-item"),__easycom_1$3);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"我的粉丝")])),_:1}),vue.createElementVNode("scroll-view",{id:"fans-scrollview","scroll-y":"true","refresher-enabled":"",style:vue.normalizeStyle({height:n.scollerHeight+"px"}),"refresher-triggered":a.isRefresh,"scroll-anchoring":"",onRefresherrefresh:t[1]||(t[1]=e=>n.onScrollRefresheRrefresh())},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.fansList,(e=>(vue.openBlock(),vue.createBlock(r,{item:e,key:e.id},null,8,["item"])))),128))],44,["refresher-triggered"])])}var PagesMineSecondaryPageFanListFanList=_export_sfc(_sfc_main$b,[["render",_sfc_render$a]]);const _sfc_main$a={name:"follow-item",props:{item:{type:Object,required:!0}},computed:{buttontext(){return this.isFollowed?1==this.item.mutual?"互相关注":"已关注":"关注"}},beforeCreate(){},data:()=>({isFollowed:!0}),methods:{onContentClick(){uni.navigateTo({url:`/pages/user-home-page/user-home-page?userId=${this.item.id}`})},async onFollowButtonClick(){if(this.isFollowed){let e=this;uni.showModal({title:"取消关注",content:"你确定要取消关注这个用户吗？",success:async function(t){t.confirm?await cancelAttention(e.item.id)&&(e.isFollowed=!1):t.cancel&&formatAppLog("log","at components/follow-item/follow-item.vue:87","用户点击取消")}})}else await followUser(this.item.id)&&(this.isFollowed=!0)}}};function _sfc_render$9(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{class:"follow-content",onClick:t[1]||(t[1]=vue.withModifiers((e=>n.onContentClick()),["stop"]))},[vue.createElementVNode("view",{class:"user-avatar"},[vue.createElementVNode("image",{mode:"aspectFill",class:"user-item-avatar",src:o.item.avatar},null,8,["src"])]),vue.createElementVNode("text",{class:"user-name"},vue.toDisplayString(o.item.username),1),vue.createElementVNode("view",{class:"attention-statu-button-content",onClick:t[0]||(t[0]=vue.withModifiers(((...e)=>n.onFollowButtonClick&&n.onFollowButtonClick(...e)),["stop"]))},[vue.createElementVNode("view",{style:vue.normalizeStyle({backgroundColor:a.isFollowed?"#bbbbbb":"#75e4d2"}),class:"attention-statu-button"},vue.toDisplayString(n.buttontext),5)])])])}var __easycom_1$2=_export_sfc(_sfc_main$a,[["render",_sfc_render$9],["__scopeId","data-v-61ac87c5"]]);const _sfc_main$9={data:()=>({isRefresh:!1,navHeight:0,contentHeight:0,followsList:[],userInfo:{}}),onReady(){let e=this;uni.getSystemInfo({success(t){e.contentHeight=t.windowHeight}}),uni.createSelectorQuery().select("#followed-scrollview").boundingClientRect((t=>{e.navHeight=t.top})).exec()},async onLoad(){this.userInfo=await getMyUserInfo();let e=getFollowedNumberChangedKey(this.userInfo.id);uni.setStorage({key:e,data:0}),this.followsList=await this.getMyfollows(this.userInfo.id)},computed:{scollerHeight(){let e=this.showEmojiPicker?this.emojiContentHeight:this.keyboardHeight;return this.contentHeight-e-this.navHeight-110}},methods:{onNarLeftClick(){formatAppLog("log","at pages/mine-secondary-page/follow-list/follow-list.vue:84","onNarLeftClick()"),uni.navigateBack({delta:1})},onScrollRefresheRrefresh(){},async getMyfollows(e){let t=await request({data:{method:"GET",group:"user",action:`${e}/attentionList`,data:{userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return setTimeout((()=>{this.isRefresh=!1}),500),t.data.code===REQUEST_SUCCEEDED_CODE?t.data.data:[]}}};function _sfc_render$8(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("follow-item"),__easycom_1$2);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"我的关注")])),_:1}),vue.createElementVNode("scroll-view",{id:"followed-scrollview","scroll-y":"true","refresher-enabled":"",style:vue.normalizeStyle({height:n.scollerHeight+"px"}),"refresher-triggered":a.isRefresh,"scroll-anchoring":"",onRefresherrefresh:t[1]||(t[1]=e=>n.onScrollRefresheRrefresh())},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.followsList,(e=>(vue.openBlock(),vue.createBlock(r,{item:e,key:e.id},null,8,["item"])))),128))],44,["refresher-triggered"])])}var PagesMineSecondaryPageFollowListFollowList=_export_sfc(_sfc_main$9,[["render",_sfc_render$8]]);const _sfc_main$8={name:"visitor-item",props:{item:{type:Object,required:!0}},data:()=>({unlocked:!1,visitorInfo:{}}),computed:{avatar(){return this.unlocked&&this.visitorInfo.avatar?this.visitorInfo.avatar:AnonymousAvatars[this.item.visitorId%11]},username(){return this.unlocked&&this.visitorInfo.username?this.visitorInfo.username:`已经访问过你${this.item.visitSum}次了`},lastTime(){return GettimeifferenceOfNow(this.item.lastTime).DistanceNow}},methods:{onUnlockButtonClick(){this.unlocked?uni.navigateTo({url:`/pages/user-home-page/user-home-page?userId=${this.visitorInfo.id}&isAttention=${this.visitorInfo.isAttention}`}):this.unLockVisitor(this.item.visitorId)},async unLockVisitor(e){uni.showLoading({title:"正在解锁"});let t=await request({data:{method:"GET",group:"user/visitor",action:`${e}/unlock`,data:{visitorId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return uni.hideLoading(),t.data.code===REQUEST_SUCCEEDED_CODE?(this.unlocked=!0,this.visitorInfo=t.data.data,uni.showToast({title:"解锁成功",icon:"success"}),!0):"A0203"===t.data.code&&void uni.showModal({title:"没有权限",content:"只有vip才能查看访客哦~",cancelText:"我知道了",confirmText:"立即充值",success:function(e){e.confirm?uni.navigateTo({url:"/pages/setting/bugu-vip/bugu-vip"}):e.cancel&&formatAppLog("log","at components/visitor-item/visitor-item.vue:130","用户点击取消")}})}}};function _sfc_render$7(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{class:"visitor-item-content"},[vue.createElementVNode("view",{class:"user-avatar"},[vue.createElementVNode("view",{class:"user-item-avatar-content"},[vue.createElementVNode("image",{class:"user-item-avatar",mode:"aspectFill",src:n.avatar,style:vue.normalizeStyle({filter:a.unlocked?"none":" blur(10rpx)"})},null,12,["src"])])]),vue.createElementVNode("view",{class:"visit-info"},[vue.createElementVNode("view",{class:"user-name"},vue.toDisplayString(n.username),1),vue.createElementVNode("view",{class:"visit-sum"}," 上次访问"+vue.toDisplayString(n.lastTime),1)]),vue.createElementVNode("view",{class:"unlock-button-content"},[vue.createElementVNode("view",{class:"unlock-button",onClick:t[0]||(t[0]=(...e)=>n.onUnlockButtonClick&&n.onUnlockButtonClick(...e))},vue.toDisplayString(a.unlocked?"去Ta的主页":"解锁访客"),1)])])}var __easycom_1$1=_export_sfc(_sfc_main$8,[["render",_sfc_render$7],["__scopeId","data-v-793f551d"]]);const _sfc_main$7={data:()=>({isRefresh:!1,navHeight:0,contentHeight:0,visitorList:[]}),onReady(){let e=this;uni.getSystemInfo({success(t){e.contentHeight=t.windowHeight}}),uni.createSelectorQuery().select("#visitor-scrollview").boundingClientRect((t=>{e.navHeight=t.top})).exec()},async onLoad(){let e=await getMyUserInfo(),t=getViewsNumberChangedKey(e.id);uni.setStorage({key:t,data:0}),this.visitorList=await this.getMyVisitors(e.id)},computed:{scollerHeight(){let e=this.showEmojiPicker?this.emojiContentHeight:this.keyboardHeight;return this.contentHeight-e-this.navHeight-110}},methods:{onNarLeftClick(){formatAppLog("log","at pages/mine-secondary-page/visitor-list/visitor-list.vue:82","onNarLeftClick()"),uni.navigateBack({delta:1})},onScrollRefresheRrefresh(){},async getMyVisitors(e){let t=await request({data:{method:"GET",group:"user",action:"visitor/list",data:{userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return setTimeout((()=>{this.isRefresh=!1}),500),t.data.code===REQUEST_SUCCEEDED_CODE?(formatAppLog("log","at pages/mine-secondary-page/visitor-list/visitor-list.vue:116",t.data),t.data.data):[]}}};function _sfc_render$6(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("visitor-item"),__easycom_1$1);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"我的访客")])),_:1}),vue.createElementVNode("scroll-view",{id:"visitor-scrollview","scroll-y":"true","refresher-enabled":"",style:vue.normalizeStyle({height:n.scollerHeight+"px"}),"refresher-triggered":a.isRefresh,"scroll-anchoring":"",onRefresherrefresh:t[1]||(t[1]=e=>n.onScrollRefresheRrefresh())},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.visitorList,(e=>(vue.openBlock(),vue.createBlock(r,{item:e,key:e.visitorId},null,8,["item"])))),128))],44,["refresher-triggered"])])}var PagesMineSecondaryPageVisitorListVisitorList=_export_sfc(_sfc_main$7,[["render",_sfc_render$6]]);const _sfc_main$6={name:"search-user-item",props:{item:{type:Object,required:!0}},computed:{buttontext(){return this.isFollowed?"已关注":"关注"}},data:()=>({isFollowed:!1}),created(){1==this.item.isAttention&&(this.isFollowed=!0)},methods:{onContentClick(){uni.navigateTo({url:`/pages/user-home-page/user-home-page?userId=${this.item.id}`})},async onFollowButtonClick(){if(this.isFollowed){let e=this;uni.showModal({title:"取消关注",content:"你确定要取消关注这个用户吗？",success:async function(t){t.confirm?await cancelAttention(e.item.id)&&(e.isFollowed=!1):formatAppLog("log","at components/search-user-item/search-user-item.vue:74","用户点击取消")}})}else await followUser(this.item.id)&&(this.isFollowed=!0)}}};function _sfc_render$5(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",{onClick:t[1]||(t[1]=vue.withModifiers(((...e)=>n.onContentClick&&n.onContentClick(...e)),["stop"])),class:"search-user-content"},[vue.createElementVNode("view",{class:"user-avatar"},[vue.createElementVNode("image",{mode:"aspectFill",class:"user-item-avatar",src:o.item.avatar},null,8,["src"])]),vue.createElementVNode("text",{class:"user-name"},vue.toDisplayString(o.item.username),1),vue.createElementVNode("view",{class:"search-user-statu-button-content",onClick:t[0]||(t[0]=vue.withModifiers(((...e)=>n.onFollowButtonClick&&n.onFollowButtonClick(...e)),["stop"]))},[vue.createElementVNode("view",{style:vue.normalizeStyle({backgroundColor:a.isFollowed?"#bbbbbb":"#75e4d2"}),class:"search-user-statu-button"},vue.toDisplayString(n.buttontext),5)])])}var __easycom_2=_export_sfc(_sfc_main$6,[["render",_sfc_render$5],["__scopeId","data-v-72f4db0f"]]);const _sfc_main$5={data:()=>({searchText:"",searchHistory:[],searchResult:[],showSeacrhHistory:!0}),async onLoad(){let e=await uni.getStorageSync(SEARCH_USER_HISTORY);formatAppLog("log","at pages/message-secondary-page/search-user/search-user.vue:80","searchHistory",e),e&&(this.searchHistory=e)},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onHistoryTextClick(e){this.searchText=e,this.searchUsers(this.searchText)},onSearchInput(e){this.searchText=e},onSearchConfirm(){this.searchText.length<1?uni.showToast({title:"请先输入关键词"}):this.searchUsers(this.searchText)},async searchUsers(e){uni.showLoading({title:"搜索中"});let t=await request({data:{method:"GET",group:"social",action:"searchUser",data:{username:e},header:{"content-type":"application/x-www-form-urlencoded"}}});if(uni.hideLoading(),t.data.code===REQUEST_SUCCEEDED_CODE){let e=t.data.data;formatAppLog("log","at pages/message-secondary-page/search-user/search-user.vue:144",e),this.searchResult=e,this.showSeacrhHistory=!1}else formatAppLog("log","at pages/message-secondary-page/search-user/search-user.vue:148","searchActivities",t.data);let o=uni.getStorageSync(SEARCH_USER_HISTORY);o||(o=[]),-1==o.indexOf(e)?(o.push(e),o.length>10&&o.splice(0,1)):(o.splice(o.indexOf(e),1),o.push(e)),uni.setStorage({key:SEARCH_USER_HISTORY,data:o}),this.searchHistory=o.reverse()}}};function _sfc_render$4(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"),__easycom_1$b),l=resolveEasycom(vue.resolveDynamicComponent("search-user-item"),__easycom_2);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},"搜索用户")])),_:1}),vue.createElementVNode("view",{class:"search-content"},[vue.createVNode(r,{value:a.searchText,class:"search-input",placeholder:"搜索标签",cancelButton:"none",onInput:n.onSearchInput,onConfirm:t[1]||(t[1]=e=>n.onSearchConfirm())},null,8,["value","onInput"]),vue.createElementVNode("view",{class:"search-button"},[vue.createElementVNode("button",{style:{"background-color":"#4eccb8",color:"#fff"},onClick:t[2]||(t[2]=e=>n.onSearchConfirm()),size:"mini"},"搜索用户")])]),a.showSeacrhHistory?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"labels-cotent"},[a.searchHistory.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"search-history-content"},[vue.createElementVNode("view",{class:"hot-labels-title"},[vue.createElementVNode("text",null,"搜索历史")]),vue.createElementVNode("view",{class:"search-history-items"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.searchHistory,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:e,class:"history-item",onClick:t=>n.onHistoryTextClick(e)},vue.toDisplayString(e),9,["onClick"])))),128))])])):vue.createCommentVNode("",!0)])):(vue.openBlock(),vue.createElementBlock("view",{key:1},[vue.createElementVNode("scroll-view",{class:"scrollview","scroll-y":"true"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.searchResult,(e=>(vue.openBlock(),vue.createBlock(l,{item:e,key:e.id},null,8,["item"])))),128)),a.searchResult.length<=0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"no-user"},[vue.createElementVNode("view",{class:"iconfont icon-xingqiu",style:{fontSize:"150px"}}),vue.createElementVNode("view",{class:"no-user-text"},"没有结果哦换个关键词试试~")])):vue.createCommentVNode("",!0)])]))])}var PagesMessageSecondaryPageSearchUserSearchUser=_export_sfc(_sfc_main$5,[["render",_sfc_render$4]]);const _sfc_main$4={data:()=>({PrivacyPolicyUrl:PrivacyPolicyUrl}),methods:{}};function _sfc_render$3(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("web-view",{src:a.PrivacyPolicyUrl},null,8,["src"])])}var PagesLoginBuguPrivacyPolicyBuguPrivacyPolicy=_export_sfc(_sfc_main$4,[["render",_sfc_render$3]]);const _sfc_main$3={data:()=>({UseProtocolUrl:UseProtocolUrl}),methods:{}};function _sfc_render$2(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("web-view",{src:a.UseProtocolUrl},null,8,["src"])])}var PagesLoginBuguUseProtocolBuguUseProtocol=_export_sfc(_sfc_main$3,[["render",_sfc_render$2]]);const _sfc_main$2={name:"interactive-message-item",props:{interactiveData:{type:Object,required:!0}},computed:{createTime(){return GettimeifferenceOfNow(this.interactiveData.createTime).DistanceNow},username(){return this.interactiveData.username.length<7?this.interactiveData.username:this.interactiveData.username.slice(0,7)+"..."},title(){let e=this.interactiveData.type,t="";return e===COMMENT?t="评论":e===LIKE?t="喜欢":e===ATTENTION?t="关注":e===PUBLISH&&(t="发布"),t}},data:()=>({ATTENTION:ATTENTION,COMMENT:COMMENT,LIKE:LIKE,PUBLISH:PUBLISH}),methods:{onAvatarClick(){uni.navigateTo({url:`/pages/user-home-page/user-home-page?userId=${this.interactiveData.userId}`})},onClick(){this.$emit("onClick")}}};function _sfc_render$1(e,t,o,i,a,n){return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{class:"interactive-content",onClick:t[1]||(t[1]=(...e)=>n.onClick&&n.onClick(...e))},[vue.createElementVNode("view",{class:"interactive-avatar",onClick:t[0]||(t[0]=vue.withModifiers(((...e)=>n.onAvatarClick&&n.onAvatarClick(...e)),["stop"]))},[vue.createElementVNode("image",{mode:"aspectFill",class:"avatar",src:o.interactiveData.avatar},null,8,["src"])]),vue.createElementVNode("view",{class:"interactive-info"},[vue.createElementVNode("view",{class:"interactive-info-upper"},[vue.createElementVNode("view",{class:"interactive-name"},[vue.createElementVNode("text",null,vue.toDisplayString(n.username),1),vue.createElementVNode("view",{class:"interactive-type"},[o.interactiveData.type==a.LIKE?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"iconfont icon-heart-fill",style:{fontSize:"23px",color:"#83dbcd"}})):(vue.openBlock(),vue.createElementBlock("text",{key:1},vue.toDisplayString(n.title),1))]),o.interactiveData.type===a.PUBLISH?(vue.openBlock(),vue.createElementBlock("text",{key:0},"了一条新动态")):(vue.openBlock(),vue.createElementBlock("text",{key:1},"了你"+vue.toDisplayString(o.interactiveData.type!==a.ATTENTION?"的动态":""),1))]),vue.createElementVNode("view",{class:"interactive-time"},[vue.createElementVNode("text",{class:"interactive-text"},vue.toDisplayString(n.createTime),1)])])])])])}var __easycom_1=_export_sfc(_sfc_main$2,[["render",_sfc_render$1],["__scopeId","data-v-0582ae1c"]]);const _sfc_main$1={data:()=>({type:LIKE,userInfo:{},interactiveMessageList:{unreadSum:0,data:[]}}),async onLoad(e){if(this.type=e.type,this.userInfo=await getMyUserInfo(),this.userInfo.id){let e=await getInteractiveMessageList(this.userInfo.id,this.type);this.interactiveMessageList=e,changeUnreadMessageSum(-e.unreadSum),interactiveMessageALLRead(this.userInfo.id,this.type)}},computed:{title(){return this.type===LIKE?"我收到的赞":this.type===COMMENT?"我收到的评论":void 0}},methods:{onNarLeftClick(){uni.navigateBack({delta:1})},onInteractiveMessageItemClick(e){formatAppLog("log","at pages/message-secondary-page/interactive-message/interactive-message.vue:74","onInteractiveMessageItemClick"),e.type==LIKE||e.type==COMMENT?uni.navigateTo({url:`/pages/activity-info/activity-info?activityId=${e.activityId}`}):e.type==ATTENTION&&uni.navigateTo({url:`/pages/user-home-page/user-home-page?userId=${e.userId}`})},onDeleteAllInteractiveMessageClick(){deleteAllInteractiveMessage(this.userInfo.id,this.type)}}};function _sfc_render(e,t,o,i,a,n){const s=resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"),__easycom_0$1),r=resolveEasycom(vue.resolveDynamicComponent("interactive-message-item"),__easycom_1);return vue.openBlock(),vue.createElementBlock("view",{class:"page"},[vue.createVNode(s,{"left-icon":"back",class:"nav_bar",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true",onClickLeft:t[0]||(t[0]=e=>n.onNarLeftClick())},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"bar-title"},vue.toDisplayString(n.title),1)])),_:1}),a.interactiveMessageList.data.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"messages-clear-all"},[vue.createElementVNode("view",{class:"number-of-messages"},vue.toDisplayString(a.interactiveMessageList.data.length)+"条",1),vue.createElementVNode("view",{class:"clear-all-button",onClick:t[1]||(t[1]=(...e)=>n.onDeleteAllInteractiveMessageClick&&n.onDeleteAllInteractiveMessageClick(...e))},"清除全部")])):vue.createCommentVNode("",!0),a.interactiveMessageList.data.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"interactive-list-content"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.interactiveMessageList.data,((e,t)=>(vue.openBlock(),vue.createBlock(r,{key:e.createTime,interactiveData:e,onOnClick:t=>n.onInteractiveMessageItemClick(e)},null,8,["interactiveData","onOnClick"])))),128))])):(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"no-message"},[vue.createElementVNode("view",{class:"iconfont icon-message",style:{fontSize:"300rpx"}}),vue.createElementVNode("view",{class:"no-message-text"},"暂时没有互动消息")]))])}var PagesMessageSecondaryPageInteractiveMessageInteractiveMessage=_export_sfc(_sfc_main$1,[["render",_sfc_render]]);"undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((o=>t.resolve(e()).then((()=>o))),(o=>t.resolve(e()).then((()=>{throw o}))))}),uni.restoreGlobal&&uni.restoreGlobal(vue__namespace,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/index/index",PagesIndexIndex),__definePage("pages/bugu/bugu",PagesBuguBugu),__definePage("pages/message/message",PagesMessageMessage),__definePage("pages/mine/mine",PagesMineMine),__definePage("pages/publish/publish",PagesPublishPublish),__definePage("pages/bugu-secondary-page/sign-in-lottery/sign-in-lottery",PagesBuguSecondaryPageSignInLotterySignInLottery),__definePage("pages/login/login",PagesLoginLogin),__definePage("pages/login/account-login",PagesLoginAccountLogin),__definePage("pages/label-activity/label-activity",PagesLabelActivityLabelActivity),__definePage("pages/label-activity/search-activity",PagesLabelActivitySearchActivity),__definePage("pages/user-home-page/user-home-page",PagesUserHomePageUserHomePage),__definePage("pages/activity-info/activity-info",PagesActivityInfoActivityInfo),__definePage("pages/activity-info/comment-info",PagesActivityInfoCommentInfo),__definePage("pages/setting/setting",PagesSettingSetting),__definePage("pages/setting/report-user/report-user",PagesSettingReportUserReportUser),__definePage("pages/setting/personal_information/personal_information",PagesSettingPersonal_informationPersonal_information),__definePage("pages/setting/personal_information/change-username",PagesSettingPersonal_informationChangeUsername),__definePage("pages/setting/bugu-vip/bugu-vip",PagesSettingBuguVipBuguVip),__definePage("pages/setting/real-name-authentication/real-name-authentication",PagesSettingRealNameAuthenticationRealNameAuthentication),__definePage("pages/setting/school-login/school-login",PagesSettingSchoolLoginSchoolLogin),__definePage("pages/setting/sound-setting/sound-setting",PagesSettingSoundSettingSoundSetting),__definePage("pages/setting/help/help",PagesSettingHelpHelp),__definePage("pages/setting/about-bugu/about-bugu",PagesSettingAboutBuguAboutBugu),__definePage("pages/setting/about-bugu/update-log",PagesSettingAboutBuguUpdateLog),__definePage("pages/bugu-secondary-page/blind-box/blind-box",PagesBuguSecondaryPageBlindBoxBlindBox),__definePage("pages/bugu-secondary-page/blind-box/my-box",PagesBuguSecondaryPageBlindBoxMyBox),__definePage("pages/bugu-secondary-page/blind-box/box-tickets",PagesBuguSecondaryPageBlindBoxBoxTickets),__definePage("pages/message-secondary-page/chat-content/chat-content",PagesMessageSecondaryPageChatContentChatContent),__definePage("pages/message-secondary-page/chat-history/chat-history",PagesMessageSecondaryPageChatHistoryChatHistory),__definePage("pages/message-secondary-page/official-news-info/official-news-info",PagesMessageSecondaryPageOfficialNewsInfoOfficialNewsInfo),__definePage("pages/mine-secondary-page/fan-list/fan-list",PagesMineSecondaryPageFanListFanList),__definePage("pages/mine-secondary-page/follow-list/follow-list",PagesMineSecondaryPageFollowListFollowList),__definePage("pages/mine-secondary-page/visitor-list/visitor-list",PagesMineSecondaryPageVisitorListVisitorList),__definePage("pages/message-secondary-page/search-user/search-user",PagesMessageSecondaryPageSearchUserSearchUser),__definePage("pages/login/bugu-privacy-policy/bugu-privacy-policy",PagesLoginBuguPrivacyPolicyBuguPrivacyPolicy),__definePage("pages/login/bugu-use-protocol/bugu-use-protocol",PagesLoginBuguUseProtocolBuguUseProtocol),__definePage("pages/message-secondary-page/interactive-message/interactive-message",PagesMessageSecondaryPageInteractiveMessageInteractiveMessage);const _sfc_main={onLaunch:function(){formatAppLog("log","at App.vue:4","App Launch")},onShow:function(){formatAppLog("log","at App.vue:7","App Show")},onHide:function(){formatAppLog("log","at App.vue:10","App Hide")}};function createApp(){return{app:vue.createVueApp(_sfc_main)}}const __app__=createApp().app;__app__._component.mpType="app",__app__._component.render=()=>{},__app__.use(uni.__vuePlugin).mount("#app")})(Vue);
