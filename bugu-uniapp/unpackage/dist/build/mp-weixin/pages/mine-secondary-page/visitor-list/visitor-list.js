"use strict";var e=require("../../../common/vendor.js"),t=require("../../../common/storageKeys.js"),i=require("../../../common/constants.js"),o=require("../../../utils/request.js"),r=require("../../../common/storageFunctions.js");const s={data:()=>({isRefresh:!1,navHeight:0,contentHeight:0,visitorList:[]}),onReady(){let t=this;e.index.getSystemInfo({success(e){t.contentHeight=e.windowHeight}}),e.index.createSelectorQuery().select("#visitor-scrollview").boundingClientRect((e=>{t.navHeight=e.top})).exec()},async onLoad(){let i=await r.getMyUserInfo(),o=t.getViewsNumberChangedKey(i.id);e.index.setStorage({key:o,data:0}),this.visitorList=await this.getMyVisitors(i.id)},computed:{scollerHeight(){let e=this.showEmojiPicker?this.emojiContentHeight:this.keyboardHeight;return this.contentHeight-e-this.navHeight-110}},methods:{onNarLeftClick(){e.index.navigateBack({delta:1})},onScrollRefresheRrefresh(){},async getMyVisitors(e){let t=await o.request({data:{method:"GET",group:"user",action:"visitor/list",data:{userId:e},header:{"content-type":"application/x-www-form-urlencoded"}}});return setTimeout((()=>{this.isRefresh=!1}),500),t.data.code===i.REQUEST_SUCCEEDED_CODE?t.data.data:[]}}};if(!Array){(e.resolveComponent("uni-nav-bar")+e.resolveComponent("visitor-item"))()}Math||((()=>"../../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.js")+(()=>"../../../components/visitor-item/visitor-item.js"))();var n=e._export_sfc(s,[["render",function(t,i,o,r,s,n){return{a:e.o((e=>n.onNarLeftClick())),b:e.p({"left-icon":"back",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true"}),c:e.f(s.visitorList,((t,i,o)=>({a:t.visitorId,b:"0baf075a-1-"+o,c:e.p({item:t})}))),d:n.scollerHeight+"px",e:s.isRefresh,f:e.o((e=>n.onScrollRefresheRrefresh()))}}]]);wx.createPage(n);
