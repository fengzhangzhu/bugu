"use strict";var e=require("../../../common/vendor.js"),n=require("../../../common/constants.js"),a=require("../../../utils/request.js"),t=require("../../../common/globalMsgKeys.js");const r={data:()=>({username:""}),onLoad(e){this.username=e.username},methods:{onNarLeftClick(){e.index.navigateBack({delta:1})},onUsernameInput(e){this.username=e.detail.value},onSaveButtonClick(){this.username.length<1?e.index.showToast({title:"请先输入昵称",icon:"error"}):this.username.length>16?e.index.showToast({title:"昵称不能超过16个字符",icon:"error"}):this.changeName(this.username)},async changeName(r){e.index.showLoading({title:"修改中"});let o=await a.request({data:{method:"POST",group:"user",action:`username/change/${r}`,data:{username:r},header:{"content-type":"application/x-www-form-urlencoded"}}});e.index.hideLoading(),o.data.code===n.REQUEST_SUCCEEDED_CODE&&(e.index.$emit(t.REFRESH_USERINFO,{needRefresh:!0}),e.index.navigateBack())}}};if(!Array){e.resolveComponent("uni-nav-bar")()}Math;var o=e._export_sfc(r,[["render",function(n,a,t,r,o,s){return{a:e.o((e=>s.onNarLeftClick())),b:e.p({"left-icon":"back",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true"}),c:o.username,d:e.o(((...e)=>s.onUsernameInput&&s.onUsernameInput(...e))),e:e.o((e=>s.onSaveButtonClick()))}}]]);wx.createPage(o);
