"use strict";var e=require("../../../common/vendor.js"),i=require("../../../utils/request.js"),t=require("../../../common/constants.js"),a=require("../../../utils/aes/export.js");const o={data:()=>({isSuccessed:!1,fileUrl:""}),methods:{onNarLeftClick(){e.index.navigateBack({delta:1})},onImageContentClick(){let i=this;e.index.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(e){var t=e.tempFilePaths;i.fileUrl=t[0]}})},onPrivacyPolicyClick(){e.index.navigateTo({url:"/pages/login/bugu-privacy-policy/bugu-privacy-policy"})},onSubmitButtonClick(){this.fileUrl?this.submit_authentication(this.fileUrl):e.index.showToast({title:"请先选择照片",icon:"error"})},async submit_authentication(o){e.index.showLoading({title:"正在提交"});let n=await i.request({data:{method:"GET",group:"user",action:"verify/token",data:{},header:{"content-type":"application/x-www-form-urlencoded"}}});if(n.data.code===t.REQUEST_SUCCEEDED_CODE){let r=n.data.data.fileName,s=n.data.data.token,c=this;e.index.uploadFile({url:t.UploadUrl,filePath:o,name:"file",formData:{key:r,token:a.aes.decrypt(s)},async success(a){let o=await i.request({data:{method:"PUT",group:"user",action:"verify/submit",data:{verifyPic:r},header:{"content-type":"application/x-www-form-urlencoded"}}});e.index.hideLoading(),o.data.code===t.REQUEST_SUCCEEDED_CODE&&(c.isSuccessed=!0)}})}}}};if(!Array){(e.resolveComponent("uni-nav-bar")+e.resolveComponent("uni-transition"))()}Math||((()=>"../../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.js")+(()=>"../../../uni_modules/uni-transition/components/uni-transition/uni-transition.js"))();var n=e._export_sfc(o,[["render",function(i,t,a,o,n,r){return e.e({a:e.o((e=>r.onNarLeftClick())),b:e.p({"left-icon":"back",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true"}),c:e.p({"mode-class":"zoom-in",show:n.isSuccessed}),d:!n.isSuccessed},n.isSuccessed?{}:e.e({e:n.fileUrl},n.fileUrl?{f:n.fileUrl}:{},{g:e.o((e=>r.onImageContentClick())),h:e.o(((...e)=>r.onPrivacyPolicyClick&&r.onPrivacyPolicyClick(...e))),i:e.o((e=>r.onSubmitButtonClick()))}))}]]);wx.createPage(n);
