"use strict";var e=require("../../../common/vendor.js"),t=require("../../../common/storageFunctions.js"),i=require("../../../utils/messageUtils/storage.js"),s=require("../../../utils/tabBarBadgeUtils.js"),a=require("../../../common/constants.js");require("../../../common/storageKeys.js"),require("../../../utils/messageUtils/storageKeys.js"),require("../../../utils/dateUtils.js"),require("../../../common/requestFunctions.js"),require("../../../utils/request.js"),require("../../../common/globalMsgKeys.js"),require("../../../utils/messageUtils/index.js"),require("../../../utils/messageUtils/service.js");const n={data:()=>({type:a.InteractiveType.LIKE,userInfo:{},interactiveMessageList:{unreadSum:0,data:[]}}),async onLoad(e){if(this.type=e.type,this.userInfo=await t.getMyUserInfo(),this.userInfo.id){let e=await i.getInteractiveMessageList(this.userInfo.id,this.type);this.interactiveMessageList=e,s.changeUnreadMessageSum(-e.unreadSum),i.interactiveMessageALLRead(this.userInfo.id,this.type)}},computed:{title(){return i.likeGroup.indexOf(this.type)>-1?"我收到的喜欢和赞同":i.commentGroup.indexOf(this.type)>-1?"我收到的回答和评论":void 0}},methods:{onNarLeftClick(){e.index.navigateBack({delta:1})},onInteractiveMessageItemClick(t){t.type==a.InteractiveType.ATTENTION?e.index.navigateTo({url:`/pages/user-home-page/user-home-page?userId=${t.userId}`}):t.group===a.InteractiveGroup.ACTIVITY?e.index.navigateTo({url:`/pages/activity-info/activity-info?activityId=${t.contentId}`}):t.group===a.InteractiveGroup.QUESTION?e.index.navigateTo({url:`/pages/activity-info/question-info/question-info?questionId=${t.contentId}`}):t.group===a.InteractiveGroup.ANSWER&&e.index.navigateTo({url:`/pages/activity-info/answer-info/answer-info?answerId=${t.contentId}`})},onDeleteAllInteractiveMessageClick(){let t=this;e.index.showModal({title:"清除全部",content:"你确定要清除所有消息吗？",success:function(s){s.confirm&&(i.deleteAllInteractiveMessage(t.userInfo.id,t.type),t.interactiveMessageList={unreadSum:0,data:[]},e.index.showToast({title:"清除成功"}))}})}}};if(!Array){(e.resolveComponent("uni-nav-bar")+e.resolveComponent("interactive-message-item"))()}Math||((()=>"../../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.js")+(()=>"../../../components/interactive-message-item/interactive-message-item.js"))();var r=e._export_sfc(n,[["render",function(t,i,s,a,n,r){return e.e({a:e.t(r.title),b:e.o((e=>r.onNarLeftClick())),c:e.p({"left-icon":"back",fixed:"true",backgroundColor:"#fff",color:"#808080",statusBar:"true"}),d:n.interactiveMessageList.data.length>0},n.interactiveMessageList.data.length>0?{e:e.t(n.interactiveMessageList.data.length),f:e.o(((...e)=>r.onDeleteAllInteractiveMessageClick&&r.onDeleteAllInteractiveMessageClick(...e)))}:{},{g:n.interactiveMessageList.data.length>0},n.interactiveMessageList.data.length>0?{h:e.f(n.interactiveMessageList.data,((t,i,s)=>({a:t.createTime,b:e.o((e=>r.onInteractiveMessageItemClick(t)),t.createTime),c:"149e0067-1-"+s,d:e.p({interactiveData:t})})))}:{})}]]);wx.createPage(r);
