"use strict";var e=require("../common/vendor.js"),a=require("../common/constants.js"),t=require("../common/globalMsgKeys.js"),n=require("./messageUtils/index.js");exports.changeUnreadMessageSum=function(n=0){let s=0;try{s=a.getGlobalData(t.ALL_UNREAD_MESSAGE_SUM),s+=n}catch{n>0&&(s+=n)}a.setGlobalData(t.ALL_UNREAD_MESSAGE_SUM,s),s>0?e.index.setTabBarBadge({index:2,text:String(s)}):e.index.removeTabBarBadge({index:2})},exports.initUnreadMessageSum=async function(s){let i=0,r=await n.getAndHandleUserMessageList(s),o=await n.getAndHandOfficialNewsList(s),d=0;r.forEach((e=>{e.unReadSum>0&&(d+=e.unReadSum)}));let l=0;o.forEach((e=>{e.unreadSum>0&&(l+=e.unreadSum)}));let g=await n.getAndHandleInteractiveMessageList(s);i=d+l+g,console.log("messageSum",d),console.log("officialSum",l),console.log("interactiveSum",g),a.setGlobalData(t.ALL_UNREAD_MESSAGE_SUM,i),i>0?e.index.setTabBarBadge({index:2,text:String(i)}):e.index.removeTabBarBadge({index:2})};
