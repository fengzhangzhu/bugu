"use strict";var e=require("./uni-data-picker.js"),t=require("../../../../common/vendor.js");const a={name:"UniDataPickerView",emits:["nodeclick","change","datachange","update:modelValue"],mixins:[e.dataPicker],props:{managedMode:{type:Boolean,default:!1},ellipsis:{type:Boolean,default:!0}},data:()=>({}),created(){this.managedMode||this.$nextTick((()=>{this.load()}))},methods:{onPropsChange(){this._treeData=[],this.selectedIndex=0,this.load()},load(){this.isLocaldata?this.loadData():this.dataValue.length&&this.getTreePath((e=>{this.loadData()}))},handleSelect(e){this.selectedIndex=e},handleNodeClick(e,t,a){if(e.disable)return;const s=this.dataList[t][a],i=s[this.map.text],d=s[this.map.value];if(t<this.selected.length-1?(this.selected.splice(t,this.selected.length-t),this.selected.push({text:i,value:d})):t===this.selected.length-1&&this.selected.splice(t,1,{text:i,value:d}),s.isleaf)return void this.onSelectedChange(s,s.isleaf);const{isleaf:l,hasNodes:h}=this._updateBindData();(this._isTreeView()||h)&&(!this.isLocaldata||h&&!l)?l||h?this.onSelectedChange(s,!1):this._loadNodeData((e=>{e.length?(this._treeData.push(...e),this._updateBindData(s)):s.isleaf=!0,this.onSelectedChange(s,s.isleaf)}),this._nodeWhere()):this.onSelectedChange(s,!0)},updateData(e){this._treeData=e.treeData,this.selected=e.selected,this._treeData.length?this._updateBindData():this.loadData()},onDataChange(){this.$emit("datachange")},onSelectedChange(e,t){t&&this._dispatchEvent(),e&&this.$emit("nodeclick",e)},_dispatchEvent(){this.$emit("change",this.selected.slice(0))}}};if(!Array){t.resolveComponent("uni-load-more")()}Math;var s=t._export_sfc(a,[["render",function(e,a,s,i,d,l){return t.e({a:t.f(e.selected,((a,i,d)=>t.e({a:a.text},a.text?{b:t.t(a.text),c:i==e.selectedIndex?1:"",d:s.ellipsis?1:"",e:i,f:t.o((e=>l.handleSelect(i)),i)}:{}))),b:t.f(e.dataList,((a,s,i)=>t.e({a:s==e.selectedIndex},s==e.selectedIndex?{b:t.f(a,((a,i,d)=>t.e({a:t.t(a[e.map.text]),b:e.selected.length>s&&a[e.map.value]==e.selected[s].value},(e.selected.length>s&&(a[e.map.value],e.selected[s].value),{}),{c:a.disable?1:"",d:i,e:t.o((e=>l.handleNodeClick(a,s,i)),i)}))),c:s}:{}))),c:e.loading},e.loading?{d:t.p({contentText:e.loadMore,status:"loading"})}:{},{e:e.errorMessage},e.errorMessage?{f:t.t(e.errorMessage)}:{})}],["__scopeId","data-v-8d86a5bc"]]);wx.createComponent(s);
