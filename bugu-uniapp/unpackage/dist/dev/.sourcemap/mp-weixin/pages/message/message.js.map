{"version":3,"sources":["uni-app:///main.js","webpack:///E:/Project/uniapp/bugu-star-uniapp/pages/message/message.vue?3b9b","webpack:///E:/Project/uniapp/bugu-star-uniapp/pages/message/message.vue?e1a1","webpack:///E:/Project/uniapp/bugu-star-uniapp/pages/message/message.vue?a7fc","uni-app:///pages/message/message.vue?vue&type=script&lang=ts&","uni-app:///pages/message/message.vue","webpack:///E:/Project/uniapp/bugu-star-uniapp/pages/message/message.vue?230d","webpack:///E:/Project/uniapp/bugu-star-uniapp/pages/message/message.vue?d929"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","tabSelect","userMessageList","likedUnreadSum","commentUnreadSum","publishUnreadSum","state","store","userInfo","officialNewsList","editUserMessageItem","editOfficialNewsItem","attentionArticles","isRefresh","haveMoreData","page","onLoad","refreshMessages","id","reverse","onShow","interactiveMessageList","unreadSum","console","log","socketStateStore","isConnectSocket","computed","newMessage","messageStore","watch","message","type","USER_MESSAGE","WITHDRAW","INTERACTIVE","LIKE","COMMENT","PUBLISH","methods","onTabsClick","tabNumber","onSwiperChange","e","detail","current","onAttentionIsRefresh","getAttentionarticles","onAttentionScrolltolower","showBottomLoading","onMoreClick","item","$refs","articleActionPopup","open","editArticleItem","onPopupReportClick","uni","navigateTo","url","reportObjectType","activity","close","onCancelFollow","publisher","_this","showModal","title","content","username","success","res","confirm","squareArticles","i","length","isAttention","hotArticles","showToast","icon","cancel","onFollow","onChatClick","onSearchBarClick","onUserMessageItemClick","userId","onUserMessageMoreClick","userMessageActionPopup","onUserMessageDeleteClick","messageList","onUserMessageReportClick","onOfficialNewsItemMoreClick","officialNewsActionPopup","onOfficialNewsDeleteClick","onOfficialNewsItemClick","onInteractiveMessageItemClick","activityId","ATTENTION","notPlaySound","method","group","action","header","setTimeout","code","REQUEST_SUCCEEDED_CODE","pageSum","articles","list","playRefreshDynamicSound","scrollInto","allarticles","concat","refreshDynamicSound","getStorageSync","REFRESH_DYNAMIC_SOUND","RingingToneList","innerAudioContext","createInnerAudioContext","autoplay","src"],"mappings":"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","file":"pages/message/message.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/message/message.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./message.vue?vue&type=template&id=a91f51d4&\"\nvar renderjs\nimport script from \"./message.vue?vue&type=script&lang=ts&\"\nexport * from \"./message.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./message.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/message/message.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=template&id=a91f51d4&\"","var components\ntry {\n  components = {\n    activityItem: function() {\n      return import(\n        /* webpackChunkName: \"components/activity-item/activity-item\" */ \"@/components/activity-item/activity-item.vue\"\n      )\n    },\n    uniLoadMore: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n    interactiveMessage: function() {\n      return import(\n        /* webpackChunkName: \"components/interactive-message/interactive-message\" */ \"@/components/interactive-message/interactive-message.vue\"\n      )\n    },\n    userMessageItem: function() {\n      return import(\n        /* webpackChunkName: \"components/user-message-item/user-message-item\" */ \"@/components/user-message-item/user-message-item.vue\"\n      )\n    },\n    actionSheet: function() {\n      return import(\n        /* webpackChunkName: \"components/action-sheet/action-sheet\" */ \"@/components/action-sheet/action-sheet.vue\"\n      )\n    },\n    actionSheetItem: function() {\n      return import(\n        /* webpackChunkName: \"components/action-sheet-item/action-sheet-item\" */ \"@/components/action-sheet-item/action-sheet-item.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--13-1!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-2!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--13-1!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-2!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=script&lang=ts&\"","import { getUserMessageList, getMyUserInfo, getInteractiveMessageList, getOfficalList, deleteOfficalNewsItem, deleteUserMessageItem } from \"@/common/storageFunctions\";\r\nimport { INTERACTIVE, USER_MESSAGE, WITHDRAW, REQUEST_SUCCEEDED_CODE, LIKE, ATTENTION, COMMENT, PUBLISH, reportObjectType, RingingToneList } from \"@/common/constants\";\r\nimport store from '@/store/index';\r\nimport { connectSocket } from \"@/utils/socket\";\r\nimport { REFRESH_DYNAMIC_SOUND } from \"@/common/storageKeys\";\r\nimport { request } from \"@/utils/request\";\r\nimport { changeUnreadMessageSum } from \"@/utils/tabBarBadgeUtils\";\r\nimport { getAndHandOfficialNewsList, cancelAttention, followUser } from \"@/common/requestFunctions\";\r\n/**\r\n * message 消息界面\r\n * @description 消息界面\r\n * @Author: 穆兰\r\n * @Date: 2022/1/9\r\n * @LastEditors: 穆兰\r\n * @LastEditTime: 2022/1/9\r\n */\r\nexport default {\r\n    data() {\r\n        return {\r\n            tabSelect: 1,\r\n            userMessageList: [],\r\n            likedUnreadSum: 0,\r\n            commentUnreadSum: 0,\r\n            publishUnreadSum: 0,\r\n            state: store.state,\r\n            userInfo: {},\r\n            officialNewsList: [],\r\n            editUserMessageItem: {},\r\n            editOfficialNewsItem: {},\r\n            attentionArticles: {\r\n                data: [],\r\n                isRefresh: false,\r\n                haveMoreData: true,\r\n                page: 1,\r\n            },\r\n        };\r\n    },\r\n    async onLoad() {\r\n        this.userInfo = await getMyUserInfo();\r\n        if (!this.userInfo) {\r\n            return;\r\n        }\r\n        this.refreshMessages(this.userInfo);\r\n        let officialNewsList = await getOfficalList(this.userInfo.id);\r\n        this.officialNewsList = officialNewsList.reverse();\r\n    },\r\n    async onShow() {\r\n        changeUnreadMessageSum();\r\n        this.refreshMessages(this.userInfo);\r\n        this.userInfo = await getMyUserInfo();\r\n        if (!this.userInfo) {\r\n            this.userMessageList = [];\r\n            this.interactiveMessageList = { unreadSum: 0, data: [] };\r\n            return;\r\n        }\r\n        console.log('this.state.socketStateStore.isConnectSocket', this.state.socketStateStore.isConnectSocket);\r\n        if (!this.state.socketStateStore.isConnectSocket) {\r\n            connectSocket();\r\n        }\r\n    },\r\n    computed: {\r\n        newMessage() {\r\n            return this.state.messageStore.newMessage;\r\n        }\r\n    },\r\n    watch: {\r\n        /**\r\n         * @description 有新消息時\r\n         * @param {Object} message 新的消息\r\n         */\r\n        newMessage: async function (message) {\r\n            console.log(\"message:\", message);\r\n            if (message.type === USER_MESSAGE || message.type === WITHDRAW) {\r\n                let userMessageList = await getUserMessageList(this.userInfo.id);\r\n                this.userMessageList = userMessageList.reverse();\r\n            }\r\n            else if (message.type === INTERACTIVE) {\r\n                let interactiveMessageList = await getInteractiveMessageList(this.userInfo.id, message.data.type);\r\n                if (message.data.type === LIKE) {\r\n                    this.likedUnreadSum = interactiveMessageList.unreadSum;\r\n                }\r\n                else if (message.data.type === COMMENT) {\r\n                    this.commentUnreadSum = interactiveMessageList.unreadSum;\r\n                }\r\n                else if (message.data.type === PUBLISH) {\r\n                    this.publishUnreadSum = interactiveMessageList.unreadSum;\r\n                }\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        /**\r\n         * @description 点击导航标签\r\n         * @param {number} 点击的第几个\r\n         */\r\n        onTabsClick(tabNumber) {\r\n            this.tabSelect = tabNumber;\r\n        },\r\n        /**\r\n         * @description 切换页面时\r\n         * @param {Object} e\r\n         */\r\n        async onSwiperChange(e) {\r\n            this.tabSelect = e.detail.current;\r\n        },\r\n        /**\r\n         * @description 下拉刷新关注动态\r\n         */\r\n        onAttentionIsRefresh() {\r\n            this.attentionArticles.isRefresh = true;\r\n            this.attentionArticles.page = 1;\r\n            this.getAttentionarticles(this.attentionArticles.page);\r\n        },\r\n        /**\r\n         * @description 上拉获取之前的关注动态\r\n         */\r\n        onAttentionScrolltolower() {\r\n            if (!this.attentionArticles.haveMoreData) { //没有更多时不进行请求\r\n                return;\r\n            }\r\n            this.showBottomLoading = true;\r\n            this.attentionArticles.page = this.attentionArticles.page + 1;\r\n            this.getAttentionarticles(this.attentionArticles.page);\r\n        },\r\n        /**\r\n         * @description 点击动态上的更多按钮\r\n         */\r\n        onMoreClick(item) {\r\n            this.$refs.articleActionPopup.open();\r\n            this.editArticleItem = item;\r\n        },\r\n        /**\r\n         * @description 点击popup的举报按钮\r\n         * @param {ArticleItem} item\r\n         */\r\n        onPopupReportClick(item) {\r\n            uni.navigateTo({\r\n                url: `/pages/setting/report-user/report-user?objectId=${item.id}&objectType=${reportObjectType.activity}`\r\n            });\r\n            this.$refs.articleActionPopup.close();\r\n        },\r\n        /**\r\n         * @description 点击popup的取消关注按钮\r\n         * @param item\r\n         */\r\n        async onCancelFollow(item) {\r\n            if (!item.publisher) {\r\n                return;\r\n            }\r\n            let _this = this;\r\n            uni.showModal({\r\n                title: '取消关注',\r\n                content: `你确定要取消关注${item.publisher.username}`,\r\n                success: async function (res) {\r\n                    if (res.confirm) {\r\n                        if (item.publisher)\r\n                            if (await cancelAttention(item.publisher.id)) {\r\n                                let squareArticles = _this.squareArticles.data;\r\n                                for (let i = 0; i < squareArticles.length; i++) {\r\n                                    if (squareArticles[i].publisher && squareArticles[i].publisher\r\n                                        .id == item.publisher.id) {\r\n                                        squareArticles[i].publisher.isAttention = 0;\r\n                                    }\r\n                                }\r\n                                let attentionArticles = _this.attentionArticles.data;\r\n                                for (let i = 0; i < attentionArticles.length; i++) {\r\n                                    if (attentionArticles[i].publisher && attentionArticles[i]\r\n                                        .publisher.id ==\r\n                                        item.publisher.id) {\r\n                                        attentionArticles[i].publisher.isAttention = 0;\r\n                                    }\r\n                                }\r\n                                let hotArticles = _this.hotArticles.data;\r\n                                for (let i = 0; i < hotArticles.length; i++) {\r\n                                    if (hotArticles[i].publisher && hotArticles[i].publisher.id ==\r\n                                        item.publisher.id) {\r\n                                        hotArticles[i].publisher.isAttention = 0;\r\n                                    }\r\n                                }\r\n                                _this.squareArticles.data = squareArticles;\r\n                                _this.attentionArticles.data = attentionArticles;\r\n                                _this.hotArticles.data = hotArticles;\r\n                                _this.$refs.articleActionPopup.close();\r\n                                uni.showToast({\r\n                                    title: '取消关注',\r\n                                    icon: 'success'\r\n                                });\r\n                            }\r\n                    }\r\n                    else if (res.cancel) {\r\n                        console.log('用户点击取消');\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        /**\r\n         * @description 点击popup/activity-item的关注按钮\r\n         *  @param item\r\n         */\r\n        async onFollow(item) {\r\n            if (!item.publisher) {\r\n                return;\r\n            }\r\n            let _this = this;\r\n            if (await followUser(item.publisher.id)) {\r\n                let squareArticles = _this.squareArticles.data;\r\n                for (let i = 0; i < squareArticles.length; i++) {\r\n                    if (squareArticles[i].publisher && squareArticles[i].publisher.id == item.publisher.id) {\r\n                        squareArticles[i].publisher.isAttention = 1;\r\n                    }\r\n                }\r\n                let attentionArticles = _this.attentionArticles.data;\r\n                for (let i = 0; i < attentionArticles.length; i++) {\r\n                    if (attentionArticles[i].publisher && attentionArticles[i].publisher.id ==\r\n                        item.publisher.id) {\r\n                        attentionArticles[i].publisher.isAttention = 1;\r\n                    }\r\n                }\r\n                let hotArticles = _this.hotArticles.data;\r\n                for (let i = 0; i < hotArticles.length; i++) {\r\n                    if (hotArticles[i].publisher && hotArticles[i].publisher.id ==\r\n                        item.publisher.id) {\r\n                        hotArticles[i].publisher.isAttention = 1;\r\n                    }\r\n                }\r\n                _this.squareArticles.data = squareArticles;\r\n                _this.attentionArticles.data = attentionArticles;\r\n                _this.hotArticles.data = hotArticles;\r\n                _this.$refs.articleActionPopup.close();\r\n                uni.showToast({\r\n                    title: '关注成功',\r\n                    icon: 'success'\r\n                });\r\n            }\r\n        },\r\n        /**\r\n         * @description 点击popup私聊按钮\r\n         *  @param item\r\n         */\r\n        async onChatClick(item) {\r\n            if (item.publisher)\r\n                uni.navigateTo({\r\n                    url: `/pages/message-secondary-page/chat-content/chat-content?fromUserId=${item.publisher.id}`\r\n                });\r\n        },\r\n        /**\r\n         * @description 点击搜索框\r\n         */\r\n        onSearchBarClick() {\r\n            uni.navigateTo({\r\n                url: '/pages/message-secondary-page/search-user/search-user'\r\n            });\r\n        },\r\n        /**\r\n         * @description 点击某个私聊消息时\r\n         * @param {Object} item\r\n         */\r\n        onUserMessageItemClick(item) {\r\n            uni.navigateTo({\r\n                url: `/pages/message-secondary-page/chat-content/chat-content?fromUserId=${item.userId}`\r\n            });\r\n        },\r\n        /**\r\n         * @description 点击某个私聊消息的更多按钮\r\n         * @param {Object} item\r\n         */\r\n        onUserMessageMoreClick(item) {\r\n            this.editUserMessageItem = item;\r\n            this.$refs.userMessageActionPopup.open();\r\n        },\r\n        /**\r\n         * @description 点击弹出框的删除对话按钮\r\n         * @param {UserMessageListItem} item 选择的对话\r\n         */\r\n        onUserMessageDeleteClick(item) {\r\n            let _this = this;\r\n            uni.showModal({\r\n                title: '删除对话',\r\n                content: `你确定要删除与${item.username}的对话吗？`,\r\n                success: async function (res) {\r\n                    if (res.confirm) {\r\n                        if (item) {\r\n                            let messageList = await deleteUserMessageItem(_this.userInfo.id, item.userId);\r\n                            _this.userMessageList = messageList;\r\n                        }\r\n                        _this.$refs.userMessageActionPopup.close();\r\n                    }\r\n                    else if (res.cancel) {\r\n                        console.log('用户点击取消');\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        /**\r\n         * @description 点击弹出框的举报按钮\r\n         * @param {UserMessageListItem} item 选择的对话\r\n         */\r\n        onUserMessageReportClick(item) {\r\n            this.$refs.userMessageActionPopup.close();\r\n            uni.navigateTo({\r\n                url: `/pages/setting/report-user/report-user?objectId=${item.userId}&objectType=chat`\r\n            });\r\n        },\r\n        /**\r\n         * @description 点击某个官方消息的更多按钮\r\n         * @param {Object} item\r\n         */\r\n        onOfficialNewsItemMoreClick(item) {\r\n            this.editOfficialNewsItem = item;\r\n            this.$refs.officialNewsActionPopup.open();\r\n        },\r\n        /**\r\n         * @description 点击弹出框的删除对话按钮\r\n         * @param {OfficialNewsListItem} item 选择的对话\r\n         */\r\n        onOfficialNewsDeleteClick(item) {\r\n            let _this = this;\r\n            uni.showModal({\r\n                title: '删除对话',\r\n                content: `你确定要删除这个消息记录吗？`,\r\n                success: async function (res) {\r\n                    if (res.confirm) {\r\n                        if (item) {\r\n                            let officialNewsList = await deleteOfficalNewsItem(_this.userInfo.id, item.type);\r\n                            _this.officialNewsList = officialNewsList;\r\n                        }\r\n                        _this.$refs.officialNewsActionPopup.close();\r\n                    }\r\n                    else if (res.cancel) {\r\n                        console.log('用户点击取消');\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        /**\r\n         * @description 点击某个官方消息时\r\n         * @param {Object} item\r\n         */\r\n        onOfficialNewsItemClick(item) {\r\n            console.log(\"onOfficialNewsItemClick\");\r\n            uni.navigateTo({\r\n                url: `/pages/message-secondary-page/official-news-info/official-news-info?type=${item.type}`\r\n            });\r\n        },\r\n        /**\r\n         * @description 点击某个互动消息时\r\n         * @param {Object} item\r\n         */\r\n        onInteractiveMessageItemClick(item) {\r\n            console.log(\"onInteractiveMessageItemClick\");\r\n            if (item.type == LIKE || item.type == COMMENT || item.type == PUBLISH) {\r\n                uni.navigateTo({\r\n                    url: `/pages/activity-info/activity-info?activityId=${item.activityId}`\r\n                });\r\n            }\r\n            else if (item.type == ATTENTION) {\r\n                uni.navigateTo({ url: `/pages/user-home-page/user-home-page?userId=${item.userId}` });\r\n            }\r\n        },\r\n        /**\r\n         * @description 更新所有消息列表\r\n         * @param {Object} userInfo 用户信息\r\n         */\r\n        async refreshMessages(userInfo) {\r\n            let userMessageList = await getUserMessageList(userInfo.id);\r\n            this.userMessageList = userMessageList.reverse();\r\n            this.likedUnreadSum = (await getInteractiveMessageList(this.userInfo.id, LIKE)).unreadSum;\r\n            this.commentUnreadSum = (await getInteractiveMessageList(this.userInfo.id, COMMENT)).unreadSum;\r\n            this.publishUnreadSum = (await getInteractiveMessageList(this.userInfo.id, PUBLISH)).unreadSum;\r\n            let officialNewsList = await getAndHandOfficialNewsList(userInfo.id);\r\n            this.officialNewsList = officialNewsList.reverse();\r\n        },\r\n        /**\r\n         *\r\n         * @description 获取关注的动态列表\r\n         * @param page 第几页\r\n         * @param notPlaySound 可选参数是否播放刷新音效\r\n         */\r\n        async getAttentionarticles(page, notPlaySound = false) {\r\n            let res = await request({\r\n                data: {\r\n                    method: 'GET',\r\n                    group: 'activity',\r\n                    action: 'attention',\r\n                    data: {\r\n                        page\r\n                    },\r\n                    header: {\r\n                        'content-type': 'application/x-www-form-urlencoded',\r\n                    },\r\n                }\r\n            });\r\n            setTimeout(() => {\r\n                this.attentionArticles.isRefresh = false;\r\n            }, 700);\r\n            this.showBottomLoading = false;\r\n            console.log(res.data);\r\n            if (res.data.code === REQUEST_SUCCEEDED_CODE) {\r\n                let pageSum = res.data.data.pageSum;\r\n                let articles = res.data.data.list;\r\n                if (page === 1) {\r\n                    uni.showToast({\r\n                        title: '刷新成功',\r\n                        icon: 'none'\r\n                    });\r\n                    if (!notPlaySound) {\r\n                        this.playRefreshDynamicSound();\r\n                    }\r\n                    this.attentionArticles.data = articles;\r\n                    this.scrollInto = '';\r\n                    if (pageSum <= 1) {\r\n                        this.attentionArticles.haveMoreData = false;\r\n                    }\r\n                    else {\r\n                        this.attentionArticles.haveMoreData = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (page > pageSum) { //判断是不是最后一页\r\n                        this.attentionArticles.haveMoreData = false;\r\n                        this.attentionArticles.page = page - 1;\r\n                    }\r\n                    else {\r\n                        let allarticles = this.attentionArticles.data.concat(articles);\r\n                        this.attentionArticles.data = allarticles;\r\n                        if (page == pageSum) {\r\n                            this.attentionArticles.haveMoreData = false;\r\n                        }\r\n                        else {\r\n                            this.attentionArticles.haveMoreData = true;\r\n                        }\r\n                    }\r\n                }\r\n                if (articles.length < 1) { //如果这一页没有动态则切换到下一页\r\n                    if (page < pageSum) {\r\n                        this.attentionArticles.page = page + 1;\r\n                        this.getAttentionarticles(this.attentionArticles.page, true);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * @description 播放刷新音效\r\n         */\r\n        async playRefreshDynamicSound() {\r\n            let refreshDynamicSound = uni.getStorageSync(REFRESH_DYNAMIC_SOUND);\r\n            if (!refreshDynamicSound) {\r\n                refreshDynamicSound = RingingToneList[6];\r\n            }\r\n            const innerAudioContext = uni.createInnerAudioContext();\r\n            innerAudioContext.autoplay = true;\r\n            innerAudioContext.src = refreshDynamicSound.url;\r\n        }\r\n    }\r\n};\r\n","import mod from \"-!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1642830372714\n      var cssReload = require(\"E:/HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}