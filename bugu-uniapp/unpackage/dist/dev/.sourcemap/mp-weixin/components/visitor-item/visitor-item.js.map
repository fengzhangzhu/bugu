{"version":3,"sources":["webpack:///E:/Project/uniapp/bugu-star-uniapp/components/visitor-item/visitor-item.vue?0c27","webpack:///E:/Project/uniapp/bugu-star-uniapp/components/visitor-item/visitor-item.vue?c4b5","webpack:///E:/Project/uniapp/bugu-star-uniapp/components/visitor-item/visitor-item.vue?8a18","uni-app:///components/visitor-item/visitor-item.vue?vue&type=script&lang=ts&","uni-app:///components/visitor-item/visitor-item.vue","webpack:///E:/Project/uniapp/bugu-star-uniapp/components/visitor-item/visitor-item.vue?b7b2","webpack:///E:/Project/uniapp/bugu-star-uniapp/components/visitor-item/visitor-item.vue?86fc"],"names":["name","props","item","type","Object","required","data","unlocked","visitorInfo","computed","avatar","AnonymousAvatars","visitorId","username","visitSum","lastTime","DistanceNow","methods","onUnlockButtonClick","uni","navigateTo","url","id","isAttention","unLockVisitor","showLoading","title","method","group","action","header","res","hideLoading","code","REQUEST_SUCCEEDED_CODE","showToast","icon","showModal","content","cancelText","confirmText","success","e","confirm","cancel","console","log"],"mappings":"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","file":"components/visitor-item/visitor-item.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./visitor-item.vue?vue&type=template&id=53380a78&\"\nvar renderjs\nimport script from \"./visitor-item.vue?vue&type=script&lang=ts&\"\nexport * from \"./visitor-item.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./visitor-item.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/visitor-item/visitor-item.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./visitor-item.vue?vue&type=template&id=53380a78&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--13-1!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-2!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./visitor-item.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--13-1!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-2!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./visitor-item.vue?vue&type=script&lang=ts&\"","import { request } from \"@/utils/request\";\r\nimport { REQUEST_SUCCEEDED_CODE, AnonymousAvatars } from \"@/common/constants\";\r\nimport { GettimeifferenceOfNow } from \"@/utils/dateUtils\";\r\n/**\r\n * visitorItem 访客列表的单个项\r\n * @description 访客列表的单个项\r\n * @Author: 穆兰\r\n * @Date: 2022/1/16\r\n * @LastEditors: 穆兰\r\n * @LastEditTime: 2022/1/16\r\n * @property {Object} [item]    - 项数据\r\n */\r\nexport default {\r\n    name: \"visitor-item\",\r\n    props: {\r\n        item: {\r\n            type: Object,\r\n            required: true,\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            unlocked: false,\r\n            visitorInfo: {}\r\n        };\r\n    },\r\n    computed: {\r\n        avatar() {\r\n            return this.unlocked && this.visitorInfo.avatar ? this.visitorInfo.avatar :\r\n                AnonymousAvatars[this.item.visitorId % 11];\r\n        },\r\n        username() {\r\n            return this.unlocked && this.visitorInfo.username ? this.visitorInfo.username : `已经访问过你${this.item.visitSum}次了`;\r\n        },\r\n        lastTime() {\r\n            return GettimeifferenceOfNow(this.item.lastTime).DistanceNow;\r\n        },\r\n    },\r\n    methods: {\r\n        /**\r\n         * @description 点击解锁用户的按钮\r\n         */\r\n        onUnlockButtonClick() {\r\n            if (this.unlocked) {\r\n                uni.navigateTo({\r\n                    url: `/pages/user-home-page/user-home-page?userId=${this.visitorInfo.id}&isAttention=${this.visitorInfo.isAttention}`\r\n                });\r\n            }\r\n            else {\r\n                this.unLockVisitor(this.item.visitorId);\r\n            }\r\n        },\r\n        /**\r\n         * @description 解锁隐身用户\r\n         * @param {number}  visitorId 用户的id\r\n         */\r\n        async unLockVisitor(visitorId) {\r\n            uni.showLoading({\r\n                title: \"正在解锁\"\r\n            });\r\n            let res = await request({\r\n                data: {\r\n                    method: 'GET',\r\n                    group: 'user/visitor',\r\n                    action: `${visitorId}/unlock`,\r\n                    data: {\r\n                        visitorId: visitorId\r\n                    },\r\n                    header: {\r\n                        'content-type': 'application/x-www-form-urlencoded',\r\n                    },\r\n                }\r\n            });\r\n            uni.hideLoading();\r\n            if (res.data.code === REQUEST_SUCCEEDED_CODE) {\r\n                this.unlocked = true,\r\n                    this.visitorInfo = res.data.data;\r\n                uni.showToast({\r\n                    title: '解锁成功',\r\n                    icon: 'success'\r\n                });\r\n                return true;\r\n            }\r\n            else if (res.data.code === 'A0203') {\r\n                uni.showModal({\r\n                    title: '没有权限',\r\n                    content: '只有vip才能查看访客哦~',\r\n                    cancelText: '我知道了',\r\n                    confirmText: '立即充值',\r\n                    success: function (e) {\r\n                        if (e.confirm) {\r\n                            uni.navigateTo({\r\n                                url: '/pages/setting/bugu-vip/bugu-vip'\r\n                            });\r\n                        }\r\n                        else if (e.cancel) {\r\n                            console.log('用户点击取消');\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n};\r\n","import mod from \"-!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./visitor-item.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./visitor-item.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1642830374900\n      var cssReload = require(\"E:/HBuilderX.3.3.3.20211225.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}